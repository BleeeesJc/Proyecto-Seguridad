(function(){"use strict";var e={1405:function(e,a,o){var t=o(3751),s=o(641);function r(e,a,o,t,r,i){const l=(0,s.g2)("NavbarComponent"),n=(0,s.g2)("router-view"),c=(0,s.g2)("FooterComponent");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(l),(0,s.bF)(n),(0,s.bF)(c)],64)}var i=o.p+"img/logoprincipal.dedf10a2.jpeg";const l={class:"nav-container"},n={class:"navIzquierda"},c={class:"opciones"},d={key:0},u={key:1},p={key:2},m={key:3},h={key:4},f={key:0,class:"dropdown-content"};function v(e,a,o,t,r,v){const b=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",l,[(0,s.Lk)("div",n,[(0,s.Lk)("img",{src:i,alt:"Imagen del logo",class:"logo",style:{width:"120px"},onClick:a[0]||(a[0]=(...e)=>v.goToHome&&v.goToHome(...e))}),a[14]||(a[14]=(0,s.Lk)("h1",null,"Tu lugar para compartir y disfrutar",-1)),(0,s.Lk)("div",c,[r.isLoggedIn&&r.permisos.ofertacliente?((0,s.uX)(),(0,s.CE)("a",d,[(0,s.bF)(b,{to:"/ofertas"},{default:(0,s.k6)((()=>a[6]||(a[6]=[(0,s.eW)("Ofertas")]))),_:1,__:[6]})])):(0,s.Q3)("",!0),r.isLoggedIn&&r.permisos.pedidocliente?((0,s.uX)(),(0,s.CE)("a",u,[(0,s.bF)(b,{to:"/menupedido"},{default:(0,s.k6)((()=>a[7]||(a[7]=[(0,s.eW)("Realizar Pedido")]))),_:1,__:[7]})])):(0,s.Q3)("",!0),r.isLoggedIn&&r.permisos.mapacliente?((0,s.uX)(),(0,s.CE)("a",p,[(0,s.bF)(b,{to:"/mapa"},{default:(0,s.k6)((()=>a[8]||(a[8]=[(0,s.eW)("Mapa Interactivo")]))),_:1,__:[8]})])):(0,s.Q3)("",!0),r.isLoggedIn&&r.permisos.menucliente?((0,s.uX)(),(0,s.CE)("a",m,[(0,s.bF)(b,{to:"/menu"},{default:(0,s.k6)((()=>a[9]||(a[9]=[(0,s.eW)("Menú")]))),_:1,__:[9]})])):(0,s.Q3)("",!0),r.isLoggedIn&&v.puedeVerPanelAdmin?((0,s.uX)(),(0,s.CE)("a",h,[(0,s.bF)(b,{to:"/panelAdministrativo"},{default:(0,s.k6)((()=>a[10]||(a[10]=[(0,s.eW)("Panel Administrativo")]))),_:1,__:[10]})])):(0,s.Q3)("",!0),r.isLoggedIn&&1!==e.isAdmin?((0,s.uX)(),(0,s.CE)("div",{key:5,class:"dropdown",onMouseleave:a[3]||(a[3]=(...e)=>v.closeDropdown&&v.closeDropdown(...e))},[(0,s.Lk)("button",{class:"dropdown-btn",onClick:a[1]||(a[1]=(...e)=>v.toggleDropdown&&v.toggleDropdown(...e))},"Opciones"),r.dropdownVisible?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(b,{to:"/mispedidos"},{default:(0,s.k6)((()=>a[11]||(a[11]=[(0,s.eW)("Mis Pedidos")]))),_:1,__:[11]}),(0,s.bF)(b,{to:"/misreservas"},{default:(0,s.k6)((()=>a[12]||(a[12]=[(0,s.eW)("Mis Reservas")]))),_:1,__:[12]}),(0,s.bF)(b,{to:"/miscalificaciones"},{default:(0,s.k6)((()=>a[13]||(a[13]=[(0,s.eW)("Mis Calificaciones")]))),_:1,__:[13]}),(0,s.Lk)("a",{onClick:a[2]||(a[2]=(...e)=>v.handleAuthAction&&v.handleAuthAction(...e))},"Cerrar Sesión")])):(0,s.Q3)("",!0)],32)):(0,s.Q3)("",!0),r.isLoggedIn&&1!==e.isAdmin?((0,s.uX)(),(0,s.CE)("span",{key:6,onClick:a[4]||(a[4]=(...e)=>v.handleAuthAction&&v.handleAuthAction(...e)),class:"logout-admin"},"Cerrar Sesión")):(0,s.Q3)("",!0),r.isLoggedIn?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("a",{key:7,onClick:a[5]||(a[5]=(...e)=>v.goToLogin&&v.goToLogin(...e))},"Login"))])])])}o(4114);var b={name:"NavbarComponent",data(){return{isLoggedIn:!1,permisos:{},dropdownVisible:!1}},computed:{puedeVerPanelAdmin(){return this.permisos.asignacionroles||this.permisos.dashboard||this.permisos.ofertas||this.permisos.usuarios||this.permisos.platillos||this.permisos.pedidos||this.permisos.reservas||this.permisos.mapainteractivo}},mounted(){const e=localStorage.getItem("token"),a=JSON.parse(localStorage.getItem("usuario"));this.isLoggedIn=!!e&&!!a,this.permisos=a?.rol||{}},methods:{toggleDropdown(){this.dropdownVisible=!this.dropdownVisible},closeDropdown(){this.dropdownVisible=!1},goToHome(){this.$router.push("/")},goToLogin(){this.$router.push("/iniciarsesion")},handleAuthAction(){localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("rol"),localStorage.removeItem("usuario"),this.isLoggedIn=!1,this.$router.push("/")}}},g=o(6262);const k=(0,g.A)(b,[["render",v],["__scopeId","data-v-0630a81e"]]);var C=k;const L={class:"footer"};function y(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("footer",L,a[0]||(a[0]=[(0,s.Fv)('<div class="container" data-v-5929ed0d><div class="row" data-v-5929ed0d><div class="col-md-4" data-v-5929ed0d><h5 data-v-5929ed0d>Sobre Nosotros</h5><p data-v-5929ed0d>Yummy, para saborear y compartir</p></div><div class="col-md-4" data-v-5929ed0d><h5 data-v-5929ed0d>Contacto</h5><p data-v-5929ed0d>Teléfono: +123 456 789</p><p data-v-5929ed0d>Email: info@Yummy.com</p></div><div class="col-md-4" data-v-5929ed0d><h5 data-v-5929ed0d>Nuestras redes sociales</h5><div class="social-links" data-v-5929ed0d><a href="https://www.facebook.com/Yummy" target="_blank" rel="noopener noreferrer" data-v-5929ed0d><img src="https://img.icons8.com/ios-filled/50/ffffff/facebook--v1.png" alt="Facebook" class="social-icon" data-v-5929ed0d> Facebook </a><a href="https://www.instagram.com/Yummy" target="_blank" rel="noopener noreferrer" data-v-5929ed0d><img src="https://img.icons8.com/ios-filled/50/ffffff/instagram-new.png" alt="Instagram" class="social-icon" data-v-5929ed0d> Instagram </a><a href="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3825.068280228346!2d-68.1145714889087!3d-16.522650184158717!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x915f20ee187a3103%3A0x2f2bb2b7df32a24d!2sUniversidad%20Cat%C3%B3lica%20Boliviana%20%22San%20Pablo%22!5e0!3m2!1ses!2sbo!4v1729875829431!5m2!1ses!2sbo" target="_blank" rel="noopener noreferrer" data-v-5929ed0d><img src="https://img.icons8.com/ios-filled/50/ffffff/marker.png" alt="GoogleMaps" class="social-icon" data-v-5929ed0d> Ubicación </a></div></div></div></div>',1)]))}var E={name:"FooterComponent"};const M=(0,g.A)(E,[["render",y],["__scopeId","data-v-5929ed0d"]]);var w=M,S={name:"App",components:{NavbarComponent:C,FooterComponent:w}};const A=(0,g.A)(S,[["render",r]]);var _=A,x=o(5220);const P={class:"main"},F={class:"cards"},O={class:"cards"};function R(e,a,o,t,r,i){const l=(0,s.g2)("CarouselComponent"),n=(0,s.g2)("CardComponent"),c=(0,s.g2)("HorizontalCardComponent");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(l),a[3]||(a[3]=(0,s.Lk)("div",{class:"descripcion"},[(0,s.Lk)("h1",null,"Desde platos clásicos hasta creaciones innovadoras, nuestro menú está diseñado para complacer todos los paladares. Ya sea que vengas a disfrutar de un brunch relajado, una cena en familia o una ocasión especial, en Yummy siempre encontrarás sabor, calidad y una atención cálida. ¡Te invitamos a explorar nuestras deliciosas opciones y a descubrir por qué Yummy es el restaurante favorito para toda la familia!")],-1)),(0,s.Lk)("div",P,[(0,s.Lk)("ul",F,[(0,s.bF)(n,{imageSrc:"https://media.citybeat.com/citybeat/imager/the-25-best-restaurants-in-greater-cincinnati-right-now-according-to-yelp/u/zoom/14734515/bakerstable_hb-4234.jpg?cb=1724366981",imageAlt:"QuienesSomos",title:"Quiénes somos",description:"Yummy es más que un restaurante, es un lugar donde la comida se convierte en una experiencia inolvidable. Con un ambiente acogedor y familiar, es el destino perfecto para disfrutar de momentos especiales junto a tus seres queridos.",extraText:"¡Te invitamos a explorar nuestras instalaciones y a disfrutar de nuestros delicioso menú!"}),(0,s.bF)(n,{imageSrc:"https://www.agoda.com/wp-content/uploads/2019/03/Best-restaurants-in-Seoul-Fine-dining-Jungsik-Seoul-Mingles-restaurant.jpg",imageAlt:"Misión",title:"Nuestra Misión",description:"En Yummy, nuestra misión es ofrecer una experiencia gastronómica excepcional que combina calidad, sabor y atención al cliente. Nos esforzamos por crear un ambiente acogedor y familiar donde cada plato esté hecho con ingredientes frescos y de la mejor calidad, garantizando una experiencia culinaria memorable.",extraText:"¡Disfruta cada momento con nosotros!"}),(0,s.bF)(n,{imageSrc:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60",imageAlt:"Visión",title:"Nuestra Visión",description:"Ser el restaurante de referencia para las familias y amigos que buscan compartir momentos especiales alrededor de la buena comida. Aspiramos a expandir nuestra marca, manteniendo siempre el compromiso con la calidad y la innovación en cada uno de nuestros platos.",extraText:"¡Creciendo contigo, plato a plato!"})]),a[0]||(a[0]=(0,s.Lk)("br",null,null,-1)),a[1]||(a[1]=(0,s.Lk)("h2",null,"Lo que te ofrecemos",-1)),a[2]||(a[2]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("ul",O,[(0,s.bF)(c,{imageSrc:"https://images.unsplash.com/photo-1547573854-74d2a71d0826?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8bWVzYSUyMGRlJTIwY29taWRhfGVufDB8fDB8fHww",imageAlt:"Menu",title:"Acerca del Menú",description:"En Yummy, hemos creado un menú cuidadosamente seleccionado para ofrecerte una experiencia gastronómica única. Desde entradas frescas y deliciosas, hasta platos principales que combinan lo mejor de la cocina tradicional e innovadora, nuestro menú es una celebración de sabores. También contamos con una irresistible variedad de postres para los amantes de lo dulce y una amplia selección de bebidas refrescantes para acompañar cada comida.",extraText:"¡Únete a esta deliciosa experiencia!"}),(0,s.bF)(c,{imageSrc:"https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/c1050b145653163.62a1f338f3bd5.jpg",imageAlt:"Pedidos",title:"Para realizar pedidos",description:"Disfruta de la comodidad de pedir tus platos favoritos de Yummy sin moverte de casa. Nuestro servicio te permite explorar el menú completo y hacer tus pedidos de forma rápida y sencilla. Además, si prefieres disfrutar de la experiencia en nuestro restaurante, puedes seleccionar tu mesa favorita y hacer una reserva para asegurar tu lugar.",extraText:"¡Tan sencillo como un click!"})])])])}var X=o(33);const I={class:"cards_item"},D={class:"card"},V={class:"card_image"},$=["src","alt"],U={class:"card_content"},z={class:"card_title"},j={class:"card_text"};function N(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("li",I,[(0,s.Lk)("div",D,[(0,s.Lk)("div",V,[(0,s.Lk)("img",{src:o.imageSrc,alt:o.imageAlt},null,8,$)]),(0,s.Lk)("div",U,[(0,s.Lk)("h2",z,(0,X.v_)(o.title),1),(0,s.Lk)("div",j,[(0,s.Lk)("p",null,(0,X.v_)(o.description),1),a[0]||(a[0]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("p",null,(0,X.v_)(o.extraText),1)])])])])}var q={name:"CardComponent",props:{imageSrc:{type:String,required:!0},imageAlt:{type:String,default:"Imagen de tarjeta"},title:{type:String,required:!0},description:{type:String,required:!0},extraText:{type:String,default:""}}};const T=(0,g.A)(q,[["render",N],["__scopeId","data-v-216d85ef"]]);var B=T;const W={id:"enhancedCarousel",class:"carousel slide","data-bs-ride":"carousel","data-bs-interval":"3000"},H={class:"carousel-indicators"},Q=["data-bs-slide-to","aria-current","aria-label"],J={class:"carousel-inner"},K=["src","alt"],G={class:"carousel-caption d-none d-md-block"};function Y(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",W,[(0,s.Lk)("div",H,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.images,((e,a)=>((0,s.uX)(),(0,s.CE)("button",{key:a,type:"button","data-bs-target":"#enhancedCarousel","data-bs-slide-to":a,class:(0,X.C4)({active:0===a}),"aria-current":0===a?"true":null,"aria-label":"Slide "+(a+1)},null,10,Q)))),128))]),(0,s.Lk)("div",J,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.images,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:(0,X.C4)(["carousel-item",{active:0===a}])},[(0,s.Lk)("img",{src:e.src,alt:e.alt,class:"d-block w-100"},null,8,K),(0,s.Lk)("div",G,[(0,s.Lk)("h5",null,(0,X.v_)(e.title),1),(0,s.Lk)("p",null,(0,X.v_)(e.description),1)])],2)))),128))]),a[0]||(a[0]=(0,s.Fv)('<button class="carousel-control-prev" type="button" data-bs-target="#enhancedCarousel" data-bs-slide="prev" data-v-e30e0b1c><span class="carousel-control-prev-icon" aria-hidden="true" data-v-e30e0b1c></span><span class="visually-hidden" data-v-e30e0b1c>Anterior</span></button><button class="carousel-control-next" type="button" data-bs-target="#enhancedCarousel" data-bs-slide="next" data-v-e30e0b1c><span class="carousel-control-next-icon" aria-hidden="true" data-v-e30e0b1c></span><span class="visually-hidden" data-v-e30e0b1c>Siguiente</span></button>',2))])}var Z={name:"CarouselComponent",props:{images:{type:Array,required:!0,default:()=>[{src:"https://images.pexels.com/photos/260922/pexels-photo-260922.jpeg?cs=srgb&dl=pexels-pixabay-260922.jpg&fm=jpg",alt:"Imagen 1",title:"Elegancia en el Estilo",description:"Reserva alguna mesa en Yummy"},{src:"https://cdn.hellofresh.com/es/cms/SEO/recipes/gourmet/entrecot-de-ternera.jpeg",alt:"Imagen 2",title:"Más que comida, momentos.",description:"Experimenta los mejores sabores."},{src:"https://i.pinimg.com/1200x/41/56/6e/41566ee1e43c46ca0db336a4b0114d73.jpg",alt:"Imagen 3",title:"La bebida perfecta para cada ocasión.",description:"Bebidas refrescantes, sofisticadas y siempre listas para elevar tu momento. ¡Encuentra tu favorita!"}]}}};const ee=(0,g.A)(Z,[["render",Y],["__scopeId","data-v-e30e0b1c"]]);var ae=ee;const oe={class:"horizontal-card"},te={class:"horizontal-card-container"},se={class:"horizontal-card-image"},re=["src","alt"],ie={class:"horizontal-card-content"},le={class:"horizontal-card-title"},ne={class:"horizontal-card-text"};function ce(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("li",oe,[(0,s.Lk)("div",te,[(0,s.Lk)("div",se,[(0,s.Lk)("img",{src:o.imageSrc,alt:o.imageAlt},null,8,re)]),(0,s.Lk)("div",ie,[(0,s.Lk)("h2",le,(0,X.v_)(o.title),1),(0,s.Lk)("div",ne,[(0,s.Lk)("p",null,(0,X.v_)(o.description),1),a[0]||(a[0]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("p",null,(0,X.v_)(o.extraText),1)])])])])}var de={name:"HorizontalCardComponent",props:{imageSrc:{type:String,required:!0},imageAlt:{type:String,default:"Imagen de tarjeta"},title:{type:String,required:!0},description:{type:String,required:!0},extraText:{type:String,default:""}}};const ue=(0,g.A)(de,[["render",ce],["__scopeId","data-v-5ab3d348"]]);var pe=ue,me={name:"HomePage",components:{CardComponent:B,CarouselComponent:ae,HorizontalCardComponent:pe}};const he=(0,g.A)(me,[["render",R],["__scopeId","data-v-e06bfbce"]]);var fe=he;const ve={class:"login-container"},be={class:"login-card"},ge={class:"password-container"},ke=["type"],Ce={class:"signup-text"},Le={key:0,class:"modal"},ye={class:"modal-content"},Ee={key:1,class:"modal"},Me={class:"modal-content"};function we(e,a,o,r,i,l){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",ve,[(0,s.Lk)("div",be,[a[19]||(a[19]=(0,s.Lk)("h2",{class:"title"},"Bienvenido",-1)),(0,s.Lk)("form",{onSubmit:a[5]||(a[5]=(0,t.D$)(((...e)=>l.handleRegister&&l.handleRegister(...e)),["prevent"]))},[a[12]||(a[12]=(0,s.Lk)("label",{for:"nombre"},"Nombre:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"nombre","onUpdate:modelValue":a[0]||(a[0]=e=>i.nombre=e),required:"",placeholder:"Ingresa tu nombre"},null,512),[[t.Jo,i.nombre]]),a[13]||(a[13]=(0,s.Lk)("label",{for:"apellidos"},"Apellidos:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"apellidos","onUpdate:modelValue":a[1]||(a[1]=e=>i.apellidos=e),required:"",placeholder:"Ingresa tus apellidos"},null,512),[[t.Jo,i.apellidos]]),a[14]||(a[14]=(0,s.Lk)("label",{for:"email"},"Correo electrónico:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[2]||(a[2]=e=>i.email=e),required:"",placeholder:"Ingresa tu correo"},null,512),[[t.Jo,i.email]]),a[15]||(a[15]=(0,s.Lk)("label",{for:"password"},"Contraseña:",-1)),(0,s.Lk)("div",ge,[(0,s.bo)((0,s.Lk)("input",{type:i.showPassword?"text":"password",id:"password","onUpdate:modelValue":a[3]||(a[3]=e=>i.password=e),required:"",placeholder:"Ingresa tu contraseña"},null,8,ke),[[t.hp,i.password]]),(0,s.Lk)("span",{onClick:a[4]||(a[4]=(...e)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...e)),class:"toggle-password"},[(0,s.Lk)("i",{class:(0,X.C4)(i.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),(0,s.Lk)("p",Ce,[a[11]||(a[11]=(0,s.eW)("¿Ya tienes una cuenta? ")),(0,s.bF)(n,{to:"/iniciarsesion"},{default:(0,s.k6)((()=>a[10]||(a[10]=[(0,s.eW)("Inicia sesión aquí")]))),_:1,__:[10]})]),a[16]||(a[16]=(0,s.Lk)("button",{type:"submit",class:"login-button"},"Listo",-1))],32),i.showVerificationModal?((0,s.uX)(),(0,s.CE)("div",Le,[(0,s.Lk)("div",ye,[a[17]||(a[17]=(0,s.Lk)("h3",null,"Verifica tu correo",-1)),(0,s.Lk)("p",null,"Ingresa el código que enviamos a "+(0,X.v_)(i.email)+".",1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>i.verificationCode=e),placeholder:"Código de verificación"},null,512),[[t.Jo,i.verificationCode]]),(0,s.Lk)("button",{onClick:a[7]||(a[7]=(...e)=>l.verifyCode&&l.verifyCode(...e)),class:"login-button"},"Verificar"),(0,s.Lk)("button",{onClick:a[8]||(a[8]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"cancel-button"},"Cancelar")])])):(0,s.Q3)("",!0),i.showErrorModal?((0,s.uX)(),(0,s.CE)("div",Ee,[(0,s.Lk)("div",Me,[a[18]||(a[18]=(0,s.Lk)("h3",null,"Error en el registro",-1)),(0,s.Lk)("p",null,(0,X.v_)(i.errorMessage),1),(0,s.Lk)("button",{onClick:a[9]||(a[9]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"cancel-button"},"Intentar de nuevo")])])):(0,s.Q3)("",!0)])])}var Se=o(4335),Ae=o(8465),_e=o.n(Ae),xe={name:"RegistroUsuario",data(){return{nombre:"",apellidos:"",email:"",password:"",verificationCode:"",showVerificationModal:!1,showErrorModal:!1,errorMessage:"",showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},validatePassword(e){const a=/^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>]).+$/;return a.test(e)},async handleRegister(){if(this.validatePassword(this.password))try{const e=await Se.A.post("/api/usuario/enviar-codigo",{email:this.email});e.data.success?this.showVerificationModal=!0:this.showError(e.data.message)}catch(e){const a=e.response?.data?.message||"No se pudo verificar el correo";this.showError(a)}else _e().fire({icon:"error",title:"Contraseña inválida",text:"La contraseña debe contener al menos una mayúscula, un número y un carácter especial."})},async verifyCode(){try{const e=await Se.A.post("/api/usuario/verificar-codigo",{email:this.email,code:this.verificationCode});e.data.success?(await this.registerUser(),this.$router.push("/iniciarsesion")):this.showError("El código de verificación es incorrecto")}catch(e){this.showError("No se pudo verificar el código")}},async registerUser(){try{await Se.A.post("/api/usuario/registrar",{nombre:this.nombre,apellidos:this.apellidos,email:this.email,password:this.password}),this.closeModal(),_e().fire({icon:"success",title:"Registro exitoso",text:"Usuario registrado correctamente."})}catch(e){this.showError("No se pudo completar el registro")}},showError(e){this.errorMessage=e,this.showErrorModal=!0},closeModal(){this.showVerificationModal=!1,this.showErrorModal=!1}}};const Pe=(0,g.A)(xe,[["render",we],["__scopeId","data-v-55a46279"]]);var Fe=Pe;const Oe={class:"login-container"},Re={class:"login-card"},Xe={class:"password-container"},Ie=["type"],De={class:"signup-text"},Ve={class:"signup-text"},$e={key:0,class:"loader-modal"};function Ue(e,a,o,r,i,l){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",Oe,[(0,s.Lk)("div",Re,[a[11]||(a[11]=(0,s.Lk)("h2",{class:"title"},"Bienvenido",-1)),(0,s.Lk)("form",{onSubmit:a[3]||(a[3]=(0,t.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[a[7]||(a[7]=(0,s.Lk)("label",{for:"email"},"Correo electrónico:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>i.email=e),required:"",placeholder:"Ingresa tu correo"},null,512),[[t.Jo,i.email]]),a[8]||(a[8]=(0,s.Lk)("label",{for:"password"},"Contraseña:",-1)),(0,s.Lk)("div",Xe,[(0,s.bo)((0,s.Lk)("input",{type:i.showPassword?"text":"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>i.password=e),required:"",placeholder:"Ingresa tu contraseña"},null,8,Ie),[[t.hp,i.password]]),(0,s.Lk)("span",{onClick:a[2]||(a[2]=(...e)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...e)),class:"toggle-password"},[(0,s.Lk)("i",{class:(0,X.C4)(i.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),(0,s.Lk)("p",De,[a[5]||(a[5]=(0,s.eW)("¿No tienes una cuenta? ")),(0,s.bF)(n,{to:"/registro"},{default:(0,s.k6)((()=>a[4]||(a[4]=[(0,s.eW)("Regístrate aquí")]))),_:1,__:[4]})]),(0,s.Lk)("p",Ve,[(0,s.bF)(n,{to:"/recupera"},{default:(0,s.k6)((()=>a[6]||(a[6]=[(0,s.eW)("¿Olvidaste tu contraseña?")]))),_:1,__:[6]})]),a[9]||(a[9]=(0,s.Lk)("div",{id:"recaptcha-container",class:"g-recaptcha","data-sitekey":"6Lc0oi8rAAAAAIGxKd-wV2XETb6fZ3FwA6J_hMlz","data-callback":"onCaptchaVerified"},null,-1)),a[10]||(a[10]=(0,s.Lk)("button",{type:"submit",class:"login-button"},"Listo",-1))],32)]),i.isLoading?((0,s.uX)(),(0,s.CE)("div",$e,a[12]||(a[12]=[(0,s.Fv)('<div class="book" data-v-b7999156><div class="book__pg-shadow" data-v-b7999156></div><div class="book__pg" data-v-b7999156></div><div class="book__pg book__pg--2" data-v-b7999156></div><div class="book__pg book__pg--3" data-v-b7999156></div><div class="book__pg book__pg--4" data-v-b7999156></div><div class="book__pg book__pg--5" data-v-b7999156></div></div>',1)]))):(0,s.Q3)("",!0)])}const ze={baseURL:"http://localhost:5000/api/"};var je=o(5615);const Ne=(0,je.nY)("auth",{state:()=>({token:localStorage.getItem("token")||null,user:null,loading:!1,rol:null,id:null,error:null}),actions:{async login(e){this.loading=!0,this.error=null;try{const a=await Se.A.post(`${ze.baseURL}auth/login`,e,{headers:{"Content-Type":"application/json"}});if(200===a.status){const e=a.data;return localStorage.setItem("usuario",JSON.stringify(e)),localStorage.setItem("token",e.token),this.token=e.token,this.user=e,this.rol=e.rol?.rol||null,this.id=e.idusuario,!0}return this.error="Error en el inicio de sesión",!1}catch(a){return this.error=a.response?.data?.message||"Error en la solicitud de inicio de sesión",!1}finally{this.loading=!1}},async crearActividad(e,a){if(!e||!a)return!1;try{const o=await Se.A.post(`${ze.baseURL}actividad/`,{usuario:e,estado:a},{headers:{"Content-Type":"application/json"}});return 201===o.status&&o.data}catch(o){return!1}},logout(){Se.A.post("http://localhost:5000/api/log/",{accion:`Usuario ${this.id} cerró sesión`,medio:"auth",fecha:new Date,origen:"usuario",idusuario:this.id,codigo:200}).catch((()=>{})),this.token=null,this.user=null,localStorage.removeItem("token")},async verifyToken(){if(!this.token)return!1;try{const e=await Se.A.get(`${ze.baseURL}auth/verify`,{headers:{Authorization:`Bearer ${this.token}`}});return 200===e.status?(this.user=e.data.user,!0):(this.logout(),!1)}catch(e){return this.logout(),!1}}}});var qe={name:"LogIn",data(){return{showPassword:!1,email:"",password:"",error:null,loginAttempts:0,maxAttempts:3,recaptchaToken:"",isLoading:!1}},computed:{loading(){return this.store.loading}},mounted(){window.onCaptchaVerified=this.onCaptchaVerified;const e=()=>{window.grecaptcha?window.grecaptcha.render("recaptcha-container",{sitekey:"6Lc0oi8rAAAAAIGxKd-wV2XETb6fZ3FwA6J_hMlz",callback:this.onCaptchaVerified}):setTimeout(e,500)};e()},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},onCaptchaVerified(e){this.recaptchaToken=e},async handleSubmit(){if(!this.recaptchaToken)return _e().fire({icon:"warning",title:"Captcha requerido",text:"Por favor completa el reCAPTCHA antes de continuar."}),void await Se.A.post("http://localhost:5000/api/log/",{accion:`Usuario intentó iniciar sesión sin completar reCAPTCHA (email=${this.email})`,medio:"auth",fecha:new Date,origen:"usuario",idusuario:null,codigo:400});const e={correo:this.email,password:this.password,"g-recaptcha-response":this.recaptchaToken};this.isLoading=!0;const a=await this.store.login(e);let o;a?(this.isLoading=!1,this.loginAttempts=0,_e().fire({icon:"success",title:"¡Bienvenido!",text:"Has iniciado sesión correctamente."}),this.$router.push("/"),o="exitoso"):(this.isLoading=!1,this.loginAttempts++,o="fallido",this.loginAttempts>=this.maxAttempts?(_e().fire({icon:"warning",title:"Cuenta bloqueada",text:"Has alcanzado el máximo de intentos fallidos. Tu cuenta acaba de ser bloqueada."}),await Se.A.post("http://localhost:5000/api/log/",{accion:`Cuenta ${this.email} bloqueada tras ${this.loginAttempts} intentos fallidos`,medio:"auth",fecha:new Date,origen:"usuario",idusuario:null,codigo:403})):(this.error="Correo o contraseña incorrectos",_e().fire({icon:"error",title:"Error",text:this.error})));try{await this.store.crearActividad(this.email,o)}catch(t){console.error("Error al registrar la actividad:",t)}}},created(){this.store=Ne()},watch:{token(e){e&&this.$router.push({name:"Home"})}}};const Te=(0,g.A)(qe,[["render",Ue],["__scopeId","data-v-b7999156"]]);var Be=Te;const We={class:"reservas-container"},He={class:"filtros"},Qe={class:"filtro-fecha"},Je={class:"input-group"},Ke={class:"filtro-fecha"},Ge={class:"input-group"},Ye={class:"filtro-hora"},Ze={class:"input-group"},ea={class:"filtro-hora"},aa={class:"input-group"},oa={class:"reservas-grid"};function ta(e,a,o,r,i,l){const n=(0,s.g2)("HeaderAdminTitle"),c=(0,s.g2)("NuevaReserva"),d=(0,s.g2)("ReservaCard"),u=(0,s.g2)("ModalEditReserva");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(n,{icon:"fa fa-calendar-check",title:"Reservas",subtitle:"Gestiona las reservas realizadas por tus clientes"}),(0,s.Lk)("div",We,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>l.abrirModalNuevaReserva&&l.abrirModalNuevaReserva(...e)),class:"nuevo-button"},"Nueva Reserva"),i.modalNuevaReservaVisible?((0,s.uX)(),(0,s.Wv)(c,{key:0,titulo:"Nueva Reserva",onOnClose:l.cerrarModalNuevaReserva,onOnSave:l.guardarNuevaReserva},null,8,["onOnClose","onOnSave"])):(0,s.Q3)("",!0),(0,s.Lk)("div",He,[(0,s.Lk)("div",Qe,[a[10]||(a[10]=(0,s.Lk)("label",null,"Desde:",-1)),(0,s.Lk)("div",Je,[(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":a[1]||(a[1]=e=>i.filtroFechaDesde=e)},null,512),[[t.Jo,i.filtroFechaDesde]]),(0,s.Lk)("button",{onClick:a[2]||(a[2]=e=>l.limpiarFiltro("filtroFechaDesde")),class:"limpiar-boton"},"✖")])]),(0,s.Lk)("div",Ke,[a[11]||(a[11]=(0,s.Lk)("label",null,"Hasta:",-1)),(0,s.Lk)("div",Ge,[(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":a[3]||(a[3]=e=>i.filtroFechaHasta=e)},null,512),[[t.Jo,i.filtroFechaHasta]]),(0,s.Lk)("button",{onClick:a[4]||(a[4]=e=>l.limpiarFiltro("filtroFechaHasta")),class:"limpiar-boton"},"✖")])]),(0,s.Lk)("div",Ye,[a[12]||(a[12]=(0,s.Lk)("label",null,"Desde:",-1)),(0,s.Lk)("div",Ze,[(0,s.bo)((0,s.Lk)("input",{type:"time","onUpdate:modelValue":a[5]||(a[5]=e=>i.filtroHoraDesde=e)},null,512),[[t.Jo,i.filtroHoraDesde]]),(0,s.Lk)("button",{onClick:a[6]||(a[6]=e=>l.limpiarFiltro("filtroHoraDesde")),class:"limpiar-boton"},"✖")])]),(0,s.Lk)("div",ea,[a[13]||(a[13]=(0,s.Lk)("label",null,"Hasta:",-1)),(0,s.Lk)("div",aa,[(0,s.bo)((0,s.Lk)("input",{type:"time","onUpdate:modelValue":a[7]||(a[7]=e=>i.filtroHoraHasta=e)},null,512),[[t.Jo,i.filtroHoraHasta]]),(0,s.Lk)("button",{onClick:a[8]||(a[8]=e=>l.limpiarFiltro("filtroHoraHasta")),class:"limpiar-boton"},"✖")])])]),(0,s.Lk)("div",oa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.reservasFiltradas,(e=>((0,s.uX)(),(0,s.Wv)(d,{key:e.idreserva,mesa:e.nombremesa,fecha:e.fecha,hora:e.hora,nombre:e.nombre,estado:String(e.estado),onClick:a=>l.editarReserva(e),onCambiarEstado:a=>l.actualizarEstadoReserva(e,a)},null,8,["mesa","fecha","hora","nombre","estado","onClick","onCambiarEstado"])))),128)),i.modalVisible?((0,s.uX)(),(0,s.Wv)(u,{key:0,titulo:"Editar Reserva",reserva:i.reservaSeleccionada,onOnClose:a[9]||(a[9]=e=>i.modalVisible=!1),onOnSave:l.guardarReservaEditada},null,8,["reserva","onOnSave"])):(0,s.Q3)("",!0)])])],64)}o(8111),o(2489),o(116),o(1701);const sa={class:"mesa"};function ra(e,a,o,r,i,l){return(0,s.uX)(),(0,s.CE)("div",{class:(0,X.C4)(["reserva-card",l.estadoClase]),onClick:a[1]||(a[1]=(...e)=>l.abrirModal&&l.abrirModal(...e))},[(0,s.Lk)("h3",sa,(0,X.v_)(o.mesa),1),(0,s.Lk)("p",null,"Fecha: "+(0,X.v_)(o.fecha),1),(0,s.Lk)("p",null,"Hora: "+(0,X.v_)(o.hora),1),(0,s.Lk)("p",null,"Nombre: "+(0,X.v_)(o.nombre),1),(0,s.Lk)("button",{class:(0,X.C4)(["estado",l.estadoClase]),onClick:a[0]||(a[0]=(0,t.D$)(((...e)=>l.toggleEstado&&l.toggleEstado(...e)),["stop"]))},(0,X.v_)("1"===o.estado?"Pendiente":"Finalizada"),3)],2)}var ia={name:"ReservaCard",props:{mesa:String,fecha:String,hora:String,nombre:String,estado:String},computed:{estadoClase(){return"1"===this.estado?"pendiente":"finalizada"}},methods:{toggleEstado(){const e="1"===this.estado?"0":"1";this.$emit("cambiarEstado",e)},abrirModal(){this.$emit("abrirModal")}}};const la=(0,g.A)(ia,[["render",ra],["__scopeId","data-v-c99f6972"]]);var na=la;const ca={class:"modal-success"},da={class:"modal-content"},ua={class:"form-group"},pa={class:"form-group"},ma={class:"form-group"},ha={class:"form-group"},fa={class:"form-group"};function va(e,a,o,r,i,l){const n=(0,s.g2)("ErrorCard");return(0,s.uX)(),(0,s.CE)("div",ca,[(0,s.Lk)("div",da,[(0,s.Lk)("span",{class:"close-button",onClick:a[0]||(a[0]=(...e)=>r.onClose&&r.onClose(...e))},"×"),(0,s.Lk)("h2",null,(0,X.v_)(o.titulo),1),r.mensajeError.mostrar?((0,s.uX)(),(0,s.Wv)(n,{key:0,mensaje:r.mensajeError.texto},null,8,["mensaje"])):(0,s.Q3)("",!0),(0,s.Lk)("form",{onSubmit:a[6]||(a[6]=(0,t.D$)(((...e)=>r.guardarCambios&&r.guardarCambios(...e)),["prevent"]))},[(0,s.Lk)("div",ua,[a[8]||(a[8]=(0,s.Lk)("label",{for:"mesa"},"Mesa:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"mesa","onUpdate:modelValue":a[1]||(a[1]=e=>r.reservaData.idmesa=e),required:""},null,512),[[t.Jo,r.reservaData.idmesa]])]),(0,s.Lk)("div",pa,[a[9]||(a[9]=(0,s.Lk)("label",{for:"nombre"},"Nombre:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"nombre","onUpdate:modelValue":a[2]||(a[2]=e=>r.reservaData.nombre=e),required:"",disabled:""},null,512),[[t.Jo,r.reservaData.nombre]])]),(0,s.Lk)("div",ma,[a[10]||(a[10]=(0,s.Lk)("label",{for:"fecha"},"Fecha:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date",id:"fecha","onUpdate:modelValue":a[3]||(a[3]=e=>r.reservaData.fecha=e),required:""},null,512),[[t.Jo,r.reservaData.fecha]])]),(0,s.Lk)("div",ha,[a[11]||(a[11]=(0,s.Lk)("label",{for:"hora"},"Hora:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"time",id:"hora","onUpdate:modelValue":a[4]||(a[4]=e=>r.reservaData.hora=e),required:""},null,512),[[t.Jo,r.reservaData.hora]])]),(0,s.Lk)("div",fa,[a[13]||(a[13]=(0,s.Lk)("label",{for:"estado"},"Estado:",-1)),(0,s.bo)((0,s.Lk)("select",{id:"estado","onUpdate:modelValue":a[5]||(a[5]=e=>r.reservaData.estado=e),required:""},a[12]||(a[12]=[(0,s.Lk)("option",{value:"1"},"Pendiente",-1),(0,s.Lk)("option",{value:"0"},"Finalizada",-1)]),512),[[t.u1,r.reservaData.estado]])]),a[14]||(a[14]=(0,s.Lk)("button",{type:"submit",class:"save-button"},"Guardar",-1))],32),(0,s.Lk)("button",{class:"delete-button",onClick:a[7]||(a[7]=(...e)=>r.eliminarReserva&&r.eliminarReserva(...e))},"Eliminar Reserva")])])}var ba=o(953);const ga={key:0,class:"error-card"};function ka(e,a,o,t,r,i){return r.visible?((0,s.uX)(),(0,s.CE)("div",ga,[(0,s.Lk)("p",null,(0,X.v_)(o.mensaje),1),(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>i.cerrar&&i.cerrar(...e)),class:"cerrar-boton"},"✖")])):(0,s.Q3)("",!0)}var Ca={name:"ErrorCard",props:{mensaje:{type:String,required:!0}},data(){return{visible:!0}},methods:{cerrar(){this.visible=!1}}};const La=(0,g.A)(Ca,[["render",ka],["__scopeId","data-v-33d1c3a3"]]);var ya=La,Ea={name:"EditarReserva",components:{ErrorCard:ya},props:{titulo:String,reserva:{type:Object,required:!0}},emits:["onClose","onSave","onDelete"],setup(e,{emit:a}){const o=(0,ba.Kh)({idreserva:e.reserva.idreserva,idusuario:e.reserva.idusuario,idmesa:e.reserva.idmesa,fecha:e.reserva.fecha,hora:e.reserva.hora,nombre:e.reserva.nombre,estado:e.reserva.estado}),t=(0,ba.Kh)({texto:"",mostrar:!1}),s=async()=>{try{const{idmesa:e,fecha:s,hora:r,idreserva:i}=o,l=await fetch(`/api/reservas/verificar-disponibilidad?idmesa=${e}&fecha=${s}&hora=${r}&idreserva=${i}`),{disponible:n}=await l.json();if(!n)return t.texto="La mesa seleccionada ya tiene una reserva en la misma fecha y hora (o dentro de 1 hora y media).",void(t.mostrar=!0);console.log("Datos enviados al guardar:",o),a("onSave",{...o}),a("onClose")}catch(e){console.error("Error al verificar disponibilidad:",e),t.texto="Ocurrió un error al verificar la disponibilidad. Intenta de nuevo.",t.mostrar=!0}},r=async()=>{const e=window.confirm("¿Estás seguro de que deseas eliminar esta reserva? Esta acción no se puede deshacer.");if(e)try{const e=await fetch(`/api/reservas/${o.idreserva}`,{method:"DELETE"});if(e.ok)console.log("Reserva eliminada exitosamente"),a("onDelete"),a("onClose");else{const a=await e.json();t.texto=a.error||"No se pudo eliminar la reserva.",t.mostrar=!0}}catch(s){console.error("Error al eliminar la reserva:",s),t.texto="Ocurrió un error al intentar eliminar la reserva.",t.mostrar=!0}},i=()=>{a("onClose")};return{reservaData:o,guardarCambios:s,onClose:i,mensajeError:t,eliminarReserva:r}}};const Ma=(0,g.A)(Ea,[["render",va],["__scopeId","data-v-006828c2"]]);var wa=Ma;const Sa={class:"modal-success"},Aa={class:"modal-content"},_a={key:0,class:"error-card"},xa={class:"form-group"},Pa={class:"form-group"},Fa={class:"form-group"},Oa={class:"form-group"},Ra=["disabled"];function Xa(e,a,o,r,i,l){const n=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",Sa,[(0,s.Lk)("div",Aa,[(0,s.Lk)("span",{class:"close-button",onClick:a[0]||(a[0]=(...e)=>r.onClose&&r.onClose(...e))},"×"),(0,s.Lk)("h2",null,(0,X.v_)(o.titulo),1),r.error?((0,s.uX)(),(0,s.CE)("div",_a,[(0,s.Lk)("p",null,(0,X.v_)(r.error),1)])):(0,s.Q3)("",!0),(0,s.Lk)("form",{onSubmit:a[6]||(a[6]=(0,t.D$)(((...e)=>r.guardarReserva&&r.guardarReserva(...e)),["prevent"]))},[(0,s.Lk)("div",xa,[a[7]||(a[7]=(0,s.Lk)("label",{for:"idUsuario"},"ID Usuario:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"idUsuario","onUpdate:modelValue":a[1]||(a[1]=e=>r.reservaData.idusuario=e),placeholder:"Ingrese ID del usuario"},null,512),[[t.Jo,r.reservaData.idusuario]]),(0,s.Lk)("button",{onClick:a[2]||(a[2]=(0,t.D$)(((...e)=>r.continuarSinUsuario&&r.continuarSinUsuario(...e)),["prevent"])),class:"sin-usuario-button"}," Continuar sin usuario ")]),(0,s.Lk)("div",Pa,[a[8]||(a[8]=(0,s.Lk)("label",{for:"fecha"},"Fecha:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date",id:"fecha","onUpdate:modelValue":a[3]||(a[3]=e=>r.reservaData.fecha=e),required:""},null,512),[[t.Jo,r.reservaData.fecha]])]),(0,s.Lk)("div",Fa,[a[9]||(a[9]=(0,s.Lk)("label",{for:"hora"},"Hora:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"time",id:"hora","onUpdate:modelValue":a[4]||(a[4]=e=>r.reservaData.hora=e),required:""},null,512),[[t.Jo,r.reservaData.hora]])]),(0,s.Lk)("div",Oa,[a[10]||(a[10]=(0,s.Lk)("label",{for:"mesa"},"Mesa:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"mesa","onUpdate:modelValue":a[5]||(a[5]=e=>r.reservaData.idmesa=e),required:"",placeholder:"Ingrese número de mesa"},null,512),[[t.Jo,r.reservaData.idmesa]])]),(0,s.Lk)("button",{type:"submit",class:"save-button",disabled:r.loading},(0,X.v_)(r.loading?"Guardando...":"Guardar Reserva"),9,Ra)],32)]),r.mostrarExito?((0,s.uX)(),(0,s.Wv)(n,{key:0,mensaje:"Reserva guardada exitosamente.",onOnClose:e.cerrarModalExito},null,8,["onOnClose"])):(0,s.Q3)("",!0)])}const Ia={class:"modal-overlay"},Da={class:"modal-content success-modal"},Va={class:"success-message"};function $a(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",Ia,[(0,s.Lk)("div",Da,[a[1]||(a[1]=(0,s.Lk)("div",{class:"icon-container"},[(0,s.Lk)("span",{class:"check-icon"},"✔")],-1)),(0,s.Lk)("p",Va,(0,X.v_)(o.mensaje),1),(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>i.onClose&&i.onClose(...e)),class:"accept-button"},"Aceptar")])])}var Ua={name:"SuccessModal",props:{mensaje:{type:String,required:!0}},emits:["onClose"],methods:{onClose(){this.$emit("onClose")}}};const za=(0,g.A)(Ua,[["render",$a],["__scopeId","data-v-b529ddfa"]]);var ja=za,Na={name:"NuevaReserva",components:{SuccessModal:ja},props:{titulo:String},emits:["onClose","onSave"],setup(e,{emit:a}){const o=(0,ba.KR)(null),t=(0,ba.KR)(!1),s=(0,ba.KR)(!1),r=(0,ba.Kh)({idusuario:"",fecha:"",hora:"",idmesa:""}),i=()=>{r.idusuario=1},l=async()=>{if(!t.value){t.value=!0;try{o.value=null;const{idusuario:e,idmesa:t,fecha:i,hora:l}=r,n=await fetch(`/api/reservas/verificar-disponibilidad?idmesa=${t}&fecha=${i}&hora=${l}&idreserva=`);if(!n.ok){const e=await n.json();return void(o.value=e.error||"Error en la solicitud de disponibilidad.")}const{disponible:c}=await n.json(),d=await fetch(`/api/reservas/verificar-usuario?idusuario=${r.idusuario}`);if(!d.ok){const e=await d.json();return void(o.value=e.error||"Error en la verificación del usuario.")}const{registrado:u}=await d.json();if(!u)return void(o.value="El usuario no está registrado. Puede continuar sin un usuario registrado.");if(!c)return void(o.value="La mesa seleccionada ya tiene una reserva en la misma fecha y hora (o dentro de 1 hora y media).");const p={idusuario:e||1,idmesa:t,fecha:i,hora:l,estado:1};console.log("Reserva guardada:",p),a("onSave",p),s.value=!0}catch(e){console.error("Error al guardar la reserva:",e),o.value="Ocurrió un error al guardar la reserva."}finally{t.value=!1}}},n=()=>{s.value=!1,a("onClose")};return{reservaData:r,guardarReserva:l,continuarSinUsuario:i,error:o,onClose:n,loading:t,mostrarExito:s}}};const qa=(0,g.A)(Na,[["render",Xa],["__scopeId","data-v-a58b5f2c"]]);var Ta=qa;const Ba={class:"custom-header"};function Wa(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("header",Ba,[(0,s.Lk)("h2",null,[(0,s.Lk)("i",{class:(0,X.C4)(o.icon)},null,2),(0,s.eW)(" "+(0,X.v_)(o.title),1)]),(0,s.Lk)("p",null,(0,X.v_)(o.subtitle),1)])}var Ha={name:"HeaderAdminTitle",props:{icon:{type:String,required:!0,default:"fas fa-tags"},title:{type:String,required:!0,default:"Ofertas"},subtitle:{type:String,required:!0,default:"Administra y crea nuevas ofertas para tus clientes"}}};const Qa=(0,g.A)(Ha,[["render",Wa],["__scopeId","data-v-03e36938"]]);var Ja=Qa,Ka={name:"ReservasView",components:{ReservaCard:na,ModalEditReserva:wa,NuevaReserva:Ta,HeaderAdminTitle:Ja},data(){return{reservas:[],mesas:[],modalVisible:!1,reservaSeleccionada:null,filtroFechaDesde:"",filtroFechaHasta:"",filtroHoraDesde:"",filtroHoraHasta:"",modalNuevaReservaVisible:!1}},computed:{reservasFiltradas(){return this.reservas.filter((e=>{const a=!this.filtroFechaDesde||e.fecha>=this.filtroFechaDesde,o=!this.filtroFechaHasta||e.fecha<=this.filtroFechaHasta,t=!this.filtroHoraDesde||e.hora>=this.filtroHoraDesde,s=!this.filtroHoraHasta||e.hora<=this.filtroHoraHasta;return a&&o&&t&&s}))}},methods:{abrirModalNuevaReserva(){this.modalNuevaReservaVisible=!0},cerrarModalNuevaReserva(){this.modalNuevaReservaVisible=!1},async cargarReservas(){try{const e=await Se.A.get("/api/reservas");this.reservas=e.data,this.mesas.length>0&&this.asociarReservasConMesas(),console.log("Reservas cargadas: ",this.reservas)}catch(e){console.error("Error al cargar reservas:",e)}},async cargarMesas(){try{const e=await Se.A.get("/api/mesas");this.mesas=e.data,this.reservas.length>0&&this.asociarReservasConMesas(),console.log("Mesas cargadas:",this.mesas)}catch(e){console.error("Error al cargar mesas:",e)}},asociarReservasConMesas(){this.reservas=this.reservas.map((e=>{const a=this.mesas.find((a=>a.idmesa===e.idmesa));return{...e,nombremesa:a?a.nombre:"Mesa desconocida"}})),console.log("Reservas con nombres de mesa: ",this.reservas)},limpiarFiltro(e){this[e]=""},editarReserva(e){this.reservaSeleccionada={...e},this.modalVisible=!0},async guardarReservaEditada(e){try{const a=parseInt(e.estado),o=e.idusuario,t=e.idmesa;await Se.A.put(`/api/reservas/${e.idreserva}`,{...e,estado:a,idUsuario:o,idMesa:t});const s=this.reservas.findIndex((a=>a.idreserva===e.idreserva));-1!==s&&this.reservas.splice(s,1,{...e,estado:a}),this.modalVisible=!1}catch(a){console.error("Error al guardar la reserva editada:",a)}},async actualizarEstadoReserva(e,a){try{const o=parseInt(a);await Se.A.put(`/api/reservas/${e.idreserva}`,{idreserva:e.idreserva,idusuario:e.idusuario,idmesa:e.idmesa,fecha:e.fecha,hora:e.hora,estado:o}),e.estado=o}catch(o){console.error("Error al actualizar el estado de la reserva:",o)}},async guardarNuevaReserva(e){try{const a=await Se.A.post("/api/reservas",e);this.reservas.push(a.data),this.asociarReservasConMesas(),this.cerrarModalNuevaReserva()}catch(a){console.error("Error al guardar la nueva reserva:",a),alert("Ocurrió un error al guardar la nueva reserva.")}}},mounted(){this.cargarReservas(),this.cargarMesas()}};const Ga=(0,g.A)(Ka,[["render",ta],["__scopeId","data-v-1d4f93de"]]);var Ya=Ga;const Za={id:"app",class:"dashboard"},eo={class:"main-content"};function ao(e,a,o,t,r,i){const l=(0,s.g2)("Sidebar"),n=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",Za,[(0,s.bF)(l),(0,s.Lk)("div",eo,[(0,s.bF)(n)])])}const oo={class:"sidebar"},to={class:"opciones"};function so(e,a,o,t,r,i){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",oo,[a[0]||(a[0]=(0,s.Lk)("h2",{class:"logo"},"Yummy",-1)),(0,s.Lk)("div",to,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.rutasConPermiso,((e,a)=>((0,s.uX)(),(0,s.CE)("a",{key:a},[(0,s.bF)(l,{to:e.to,class:"sidebar-link","active-class":"active-link"},{default:(0,s.k6)((()=>[(0,s.eW)((0,X.v_)(e.label),1)])),_:2},1032,["to"])])))),128))])])}var ro={name:"SidebarComponent",data(){return{selectedSection:"DashboardComponent",permisos:{},rutasVisibles:[{to:"/panelAdministrativo/rol",label:"Rol",permiso:"asignacionroles"},{to:"/panelAdministrativo/section1",label:"Dashboard",permiso:"dashboard"},{to:"/panelAdministrativo/ofertas",label:"Ofertas",permiso:"ofertas"},{to:"/panelAdministrativo/usuarios",label:"Usuarios",permiso:"usuarios"},{to:"/panelAdministrativo/platillos",label:"Platillos",permiso:"platillos"},{to:"/panelAdministrativo/pedidosadmin",label:"Pedidos",permiso:"pedidos"},{to:"/panelAdministrativo/reservas",label:"Reservas",permiso:"reservas"},{to:"/panelAdministrativo/mapa",label:"Mapa Interactivo",permiso:"mapainteractivo"},{to:"/panelAdministrativo/logs",label:"Logs del Sistema",permiso:"logs"}]}},computed:{rutasConPermiso(){return this.rutasVisibles.filter((e=>this.permisos[e.permiso]))}},created(){const e=JSON.parse(localStorage.getItem("usuario"));this.permisos=e?.rol||{}},methods:{navigate(e){this.selectedSection=e,this.$emit("navigate",e)}}};const io=(0,g.A)(ro,[["render",so],["__scopeId","data-v-f97c1872"]]);var lo=io,no={name:"PanelAdministrativo",components:{Sidebar:lo}};const co=(0,g.A)(no,[["render",ao]]);var uo=co;const po={class:"login-container"},mo={class:"login-card"},ho={class:"signup-text"},fo={key:0,class:"modal"},vo={class:"modal-content"},bo={key:1,class:"modal"},go={class:"modal-content"};function ko(e,a,o,r,i,l){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",po,[(0,s.Lk)("div",mo,[a[12]||(a[12]=(0,s.Lk)("h2",{class:"title"},"Recupera tu contraseña",-1)),(0,s.Lk)("form",{onSubmit:a[1]||(a[1]=(0,t.D$)(((...e)=>l.handleRegister&&l.handleRegister(...e)),["prevent"]))},[a[8]||(a[8]=(0,s.Lk)("label",{for:"email"},"Ingresa tu correo electrónico:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>i.email=e),required:"",placeholder:"Ingresa tu correo"},null,512),[[t.Jo,i.email]]),(0,s.Lk)("p",ho,[a[7]||(a[7]=(0,s.eW)("¿Ya tienes una cuenta? ")),(0,s.bF)(n,{to:"/iniciarsesion"},{default:(0,s.k6)((()=>a[6]||(a[6]=[(0,s.eW)("Inicia sesión aquí")]))),_:1,__:[6]})]),a[9]||(a[9]=(0,s.Lk)("button",{type:"submit",class:"login-button"},"Listo",-1))],32),i.showVerificationModal?((0,s.uX)(),(0,s.CE)("div",fo,[(0,s.Lk)("div",vo,[a[10]||(a[10]=(0,s.Lk)("h3",null,"Verifica tu correo",-1)),(0,s.Lk)("p",null,"Ingresa el código que enviamos a "+(0,X.v_)(i.email)+".",1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>i.verificationCode=e),placeholder:"Código de verificación"},null,512),[[t.Jo,i.verificationCode]]),(0,s.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>l.verifyCode&&l.verifyCode(...e)),class:"login-button"},"Verificar"),(0,s.Lk)("button",{onClick:a[4]||(a[4]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"cancel-button"},"Cancelar")])])):(0,s.Q3)("",!0),i.showErrorModal?((0,s.uX)(),(0,s.CE)("div",bo,[(0,s.Lk)("div",go,[a[11]||(a[11]=(0,s.Lk)("h3",null,"Error en el registro",-1)),(0,s.Lk)("p",null,(0,X.v_)(i.errorMessage),1),(0,s.Lk)("button",{onClick:a[5]||(a[5]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"cancel-button"},"Intentar de nuevo")])])):(0,s.Q3)("",!0)])])}var Co={name:"RegistroUsuario",data(){return{nombre:"",apellidos:"",email:"",password:"",verificationCode:"",showVerificationModal:!1,showErrorModal:!1,errorMessage:"",showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async handleRegister(){try{const e=await Se.A.post("/api/usuario/enviar-codigo",{email:this.email});e.data.success?this.showVerificationModal=!0:this.showError("El correo no existe o ocurrió un problema")}catch(e){this.showError("No se pudo verificar el correo")}},async verifyCode(){console.log("llega el email acá: ",this.email);try{const e=await Se.A.post("/api/usuario/verificar-codigo",{email:this.email,code:this.verificationCode});if(e.data.success){const e=await Se.A.get(`/api/usuario/correo/${this.email}`),a=e.data.idusuario;this.$router.push({name:"CambioPassword",params:{id:a}})}else this.showError("El código de verificación es incorrecto")}catch(e){this.showError("No se pudo verificar el código")}},showError(e){this.errorMessage=e,this.showErrorModal=!0},closeModal(){this.showVerificationModal=!1,this.showErrorModal=!1}}};const Lo=(0,g.A)(Co,[["render",ko],["__scopeId","data-v-31d05aa4"]]);var yo=Lo;const Eo={class:"login-container"},Mo={class:"login-card"},wo={class:"password-container"},So=["type"],Ao={class:"signup-text"},_o={key:0,class:"modal"},xo={class:"modal-content"},Po={key:1,class:"modal"},Fo={class:"modal-content"};function Oo(e,a,o,r,i,l){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",Eo,[(0,s.Lk)("div",Mo,[a[13]||(a[13]=(0,s.Lk)("h2",{class:"title"},"Bienvenido",-1)),(0,s.Lk)("form",{onSubmit:a[2]||(a[2]=(0,t.D$)(((...e)=>l.changePassword&&l.changePassword(...e)),["prevent"]))},[a[9]||(a[9]=(0,s.Lk)("label",{for:"password"},"Nueva contraseña:",-1)),(0,s.Lk)("div",wo,[(0,s.bo)((0,s.Lk)("input",{type:i.showPassword?"text":"password",id:"password","onUpdate:modelValue":a[0]||(a[0]=e=>i.password=e),required:"",placeholder:"Ingresa tu contraseña"},null,8,So),[[t.hp,i.password]]),(0,s.Lk)("span",{onClick:a[1]||(a[1]=(...e)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...e)),class:"toggle-password"},[(0,s.Lk)("i",{class:(0,X.C4)(i.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),(0,s.Lk)("p",Ao,[a[8]||(a[8]=(0,s.eW)("¿Ya tienes una cuenta? ")),(0,s.bF)(n,{to:"/iniciarsesion"},{default:(0,s.k6)((()=>a[7]||(a[7]=[(0,s.eW)("Inicia sesión aquí")]))),_:1,__:[7]})]),a[10]||(a[10]=(0,s.Lk)("button",{type:"submit",class:"login-button"},"Listo",-1))],32),e.showVerificationModal?((0,s.uX)(),(0,s.CE)("div",_o,[(0,s.Lk)("div",xo,[a[11]||(a[11]=(0,s.Lk)("h3",null,"Verifica tu correo",-1)),(0,s.Lk)("p",null,"Ingresa el código que enviamos a "+(0,X.v_)(e.email)+".",1),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=a=>e.verificationCode=a),placeholder:"Código de verificación"},null,512),[[t.Jo,e.verificationCode]]),(0,s.Lk)("button",{onClick:a[4]||(a[4]=(...a)=>e.verifyCode&&e.verifyCode(...a)),class:"login-button"},"Verificar"),(0,s.Lk)("button",{onClick:a[5]||(a[5]=(...a)=>e.closeModal&&e.closeModal(...a)),class:"cancel-button"},"Cancelar")])])):(0,s.Q3)("",!0),e.showErrorModal?((0,s.uX)(),(0,s.CE)("div",Po,[(0,s.Lk)("div",Fo,[a[12]||(a[12]=(0,s.Lk)("h3",null,"Error en el registro",-1)),(0,s.Lk)("p",null,(0,X.v_)(e.errorMessage),1),(0,s.Lk)("button",{onClick:a[6]||(a[6]=(...a)=>e.closeModal&&e.closeModal(...a)),class:"cancel-button"},"Intentar de nuevo")])])):(0,s.Q3)("",!0)])])}var Ro={name:"RegistroUsuario",data(){return{password:"",showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async changePassword(){const e=/^(?=.*[A-Z])(?=.*[!@#$%^&*])(?=.*\d)[A-Za-z\d!@#$%^&*]{12,}$/;if(e.test(this.password))if(a(this.password))_e().fire({icon:"error",title:"Contraseña insegura",text:'No uses secuencias numéricas obvias como "123", "000" o "111".'});else try{const e=this.$route.params.id,a=await Se.A.put(`/api/usuario/actualizar-contrasena/${e}`,{newPassword:this.password});a.data.message&&(_e().fire({icon:"success",title:"¡Contraseña actualizada!",text:"Tu contraseña ha sido cambiada con éxito."}),this.$router.push("/iniciarsesion"))}catch(o){console.error("Error al actualizar la contraseña:",o),o.response&&o.response.data&&o.response.data.message?_e().fire({icon:"error",title:"Error",text:o.response.data.message}):_e().fire({icon:"error",title:"Error",text:"Hubo un error al actualizar la contraseña."})}else _e().fire({icon:"error",title:"Contraseña inválida",text:"La contraseña debe tener al menos 12 caracteres, una letra mayúscula, un número y un carácter especial."});function a(e){const a=/(012|123|234|345|456|567|678|789|000|111|222|333|444|555|666|777|888|999)/;return a.test(e)}}}};const Xo=(0,g.A)(Ro,[["render",Oo],["__scopeId","data-v-183b5d0d"]]);var Io=Xo;const Do={class:"main"},Vo={class:"cards"};function $o(e,a,o,t,r,i){const l=(0,s.g2)("CarouselComponent"),n=(0,s.g2)("FlipCardComponent");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(l),(0,s.Lk)("div",Do,[(0,s.Lk)("ul",Vo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.ofertasConRutaCompleta,((e,a)=>((0,s.uX)(),(0,s.Wv)(n,{key:a,imageSrc:e.srcCompleto,title:e.titulo,requirement:e.requerimiento,description:e.descripcion,discount:e.descuento,dateInit:e.fecha_inicio,dateEnd:e.fecha_fin},null,8,["imageSrc","title","requirement","description","discount","dateInit","dateEnd"])))),128))])])])}const Uo={class:"card-container"},zo=["src"],jo={class:"main-content"},No={href:"#"},qo={class:"flex-row"},To={class:"coin-base"},Bo={class:"time-left"};function Wo(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",Uo,[(0,s.Lk)("img",{class:"hero-image",src:o.imageSrc,alt:"Spinning glass cube"},null,8,zo),(0,s.Lk)("main",jo,[(0,s.Lk)("h1",null,[(0,s.Lk)("a",No,(0,X.v_)(o.title),1)]),(0,s.Lk)("p",null,(0,X.v_)(o.requirement)+", aplicando esta oferta en tus pedidos obtendras un "+(0,X.v_)(o.discount)+"% de descuento",1),(0,s.Lk)("div",qo,[(0,s.Lk)("div",To,[a[0]||(a[0]=(0,s.Lk)("img",{src:"https://i.postimg.cc/T1F1K0bW/Ethereum.png",alt:"Ethereum",class:"small-image"},null,-1)),(0,s.Lk)("h2",null,"A partir del "+(0,X.v_)(o.dateInit),1)]),(0,s.Lk)("div",Bo,[a[1]||(a[1]=(0,s.Lk)("img",{src:"https://i.postimg.cc/prpyV4mH/clock-selection-no-bg.png",alt:"clock",class:"small-image"},null,-1)),(0,s.Lk)("p",null,(0,X.v_)(i.daysLeft)+" días restantes",1)])])])])}var Ho={name:"CardComponent",props:{imageSrc:{type:String,required:!0},title:{type:String,required:!0},requirement:{type:String,required:!0},description:{type:String,required:!0},discount:{type:Number,required:!0},dateInit:{type:String,required:!0},dateEnd:{type:String,required:!0}},computed:{daysLeft(){const e=new Date(this.dateEnd),a=new Date,o=e-a,t=Math.ceil(o/864e5);return t>0?t:0}}};const Qo=(0,g.A)(Ho,[["render",Wo],["__scopeId","data-v-71dfa10a"]]);var Jo=Qo,Ko={name:"OfertasPage",components:{FlipCardComponent:Jo,CarouselComponent:ae},data(){return{ofertas:[]}},mounted(){this.obtenerOfertas()},computed:{ofertasValidas(){return this.ofertas.filter((e=>{const a=new Date,o=new Date(e.fecha_inicio),t=new Date(e.fecha_fin);return o<=a&&a<=t}))},ofertasConRutaCompleta(){return this.ofertas.map((e=>({...e,srcCompleto:`http://localhost:5000/${e.src}`})))}},methods:{async obtenerOfertas(){try{const e=await Se.A.get("http://localhost:5000/api/ofertas"),a=e.data;this.ofertas=Array.isArray(a)?a:[a]}catch(e){console.error("Error al obtener las ofertas:",e),e.response?console.error("Error en la respuesta:",e.response):e.request?console.error("No se recibió respuesta del servidor:",e.request):console.error("Error al configurar la solicitud:",e.message)}}}};const Go=(0,g.A)(Ko,[["render",$o],["__scopeId","data-v-114cff26"]]);var Yo=Go;const Zo={class:"main"},et={class:"cards"};function at(e,a,o,t,r,i){const l=(0,s.g2)("CarouselComponent"),n=(0,s.g2)("ListaProductosPedidos"),c=(0,s.g2)("FiltroCategorias"),d=(0,s.g2)("CardMenuPedido"),u=(0,s.g2)("FooterComponent"),p=(0,s.g2)("SuccessModal"),m=(0,s.g2)("ExpCalificacion");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(l),(0,s.bF)(n,{cantidadesSeleccionadas:r.cantidadesSeleccionadas,platillos:r.platillos,onPedidoRealizado:i.mostrarSuccessModal,onReiniciarCantidades:a[0]||(a[0]=e=>r.cantidadesSeleccionadas={})},null,8,["cantidadesSeleccionadas","platillos","onPedidoRealizado"]),(0,s.bF)(c,{onCategoriaSeleccionada:a[1]||(a[1]=e=>r.categoriaSeleccionada=e)}),(0,s.Lk)("div",Zo,[(0,s.Lk)("div",et,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.platillosFiltrados,(e=>((0,s.uX)(),(0,s.Wv)(d,{key:e.idplato,imagen:e.imagen,nombre:e.nombre,descripcion:e.descripcion,precio:e.precio,descuento:e.descuento,id:e.idplato,cantidad:r.cantidadesSeleccionadas[e.idplato]||0,onActualizarCantidad:i.actualizarCantidad},null,8,["imagen","nombre","descripcion","precio","descuento","id","cantidad","onActualizarCantidad"])))),128))])]),(0,s.bF)(u),r.successModalVisible?((0,s.uX)(),(0,s.Wv)(p,{key:0,mensaje:r.successMensaje,onOnClose:i.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0),(0,s.bF)(m,{show:r.isModalOpen,onClose:i.closeModal,onSubmitted:i.handleSubmitted},null,8,["show","onClose","onSubmitted"])])}const ot={class:"filtro-categorias"},tt=["onClick"];function st(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",ot,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=e=>i.seleccionarCategoria(null)),class:(0,X.C4)({activo:null===r.categoriaSeleccionada})}," Todos ",2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.categorias,((e,a)=>((0,s.uX)(),(0,s.CE)("button",{key:a,onClick:a=>i.seleccionarCategoria(e.idcategoria),class:(0,X.C4)({activo:r.categoriaSeleccionada===e.idcategoria})},(0,X.v_)(e.tipo),11,tt)))),128))])}var rt={name:"FiltroCategorias",data(){return{categorias:[],categoriaSeleccionada:null}},mounted(){this.obtenerCategorias()},methods:{async obtenerCategorias(){try{const e=await Se.A.get("http://localhost:5000/api/categorias");this.categorias=e.data}catch(e){console.error("Error al obtener las categorías:",e)}},seleccionarCategoria(e){this.categoriaSeleccionada=e,this.$emit("categoriaSeleccionada",e)}}};const it=(0,g.A)(rt,[["render",st],["__scopeId","data-v-2cc813e8"]]);var lt=it;const nt={class:"menu-card"},ct={class:"card-front"},dt={class:"info"},ut=["src"],pt={class:"info"},mt={key:0},ht={class:"precio-original"},ft={class:"precio-descuento"},vt={key:1},bt={key:2,class:"descuento"},gt={class:"cantidad"};function kt(e,a,o,r,i,l){return(0,s.uX)(),(0,s.CE)("div",nt,[(0,s.Lk)("div",ct,[(0,s.Lk)("div",dt,[(0,s.Lk)("img",{src:o.imagen,alt:"plato",class:"imagen"},null,8,ut)]),(0,s.Lk)("div",pt,[(0,s.Lk)("div",null,[(0,s.Lk)("h3",null,(0,X.v_)(o.nombre),1),o.descuento?((0,s.uX)(),(0,s.CE)("p",mt,[(0,s.Lk)("span",ht,(0,X.v_)(o.precio)+" Bs.",1),(0,s.Lk)("span",ft,(0,X.v_)(l.precioConDescuento)+" Bs.",1)])):((0,s.uX)(),(0,s.CE)("p",vt,(0,X.v_)(o.precio)+" Bs.",1)),o.descuento?((0,s.uX)(),(0,s.CE)("p",bt,(0,X.v_)(o.descuento)+"% de descuento ",1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",gt,[(0,s.bo)((0,s.Lk)("input",{type:"number",min:"0","onUpdate:modelValue":a[0]||(a[0]=e=>i.cantidadInterna=e),onInput:a[1]||(a[1]=(...e)=>l.validarCantidad&&l.validarCantidad(...e))},null,544),[[t.Jo,i.cantidadInterna,void 0,{number:!0}]])])])])])}var Ct={name:"CardMenuPedido",props:{imagen:{type:String,required:!0},nombre:{type:String,required:!0},descripcion:{type:String,required:!0},precio:{type:Number,required:!0},descuento:{type:Number,default:null},id:{type:Number,required:!0},cantidad:{type:Number,required:!0}},data(){return{cantidadInterna:this.cantidad}},watch:{cantidad(e){this.cantidadInterna=e}},computed:{precioConDescuento(){return this.descuento?(this.precio*(1-this.descuento/100)).toFixed(2):this.precio}},methods:{validarCantidad(){this.cantidadInterna<0&&(this.cantidadInterna=0),this.$emit("actualizarCantidad",this.id,this.cantidadInterna)}}};const Lt=(0,g.A)(Ct,[["render",kt],["__scopeId","data-v-52b6e17d"]]);var yt=Lt;const Et={class:"modal-content"},Mt={class:"table-container"},wt={class:"table"};function St(e,a,o,r,i,l){const n=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"floating-button",onClick:a[0]||(a[0]=(...e)=>l.toggleModal&&l.toggleModal(...e))},a[4]||(a[4]=[(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1)])),(0,s.bF)(t.eB,{name:"fade"},{default:(0,s.k6)((()=>[i.isModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:a[3]||(a[3]=(0,t.D$)(((...e)=>l.toggleModal&&l.toggleModal(...e)),["self"]))},[(0,s.Lk)("div",Et,[(0,s.Lk)("button",{class:"close-icon",onClick:a[1]||(a[1]=(...e)=>l.toggleModal&&l.toggleModal(...e))},a[5]||(a[5]=[(0,s.Lk)("i",{class:"fa-solid fa-x"},null,-1)])),a[7]||(a[7]=(0,s.Lk)("h2",null,"Tu Pedido",-1)),(0,s.Lk)("div",Mt,[(0,s.Lk)("table",wt,[a[6]||(a[6]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Platillo"),(0,s.Lk)("th",null,"Precio"),(0,s.Lk)("th",null,"Cantidad"),(0,s.Lk)("th",null,"Subtotal")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.platillosSeleccionados,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.idplato},[(0,s.Lk)("td",null,(0,X.v_)(e.nombre),1),(0,s.Lk)("td",null,(0,X.v_)(e.descuento?`${e.precioConDescuento} Bs. (Oferta)`:`${e.precio} Bs.`),1),(0,s.Lk)("td",null,(0,X.v_)(e.cantidad),1),(0,s.Lk)("td",null,(0,X.v_)(e.subtotal)+" Bs.",1)])))),128))])]),(0,s.Lk)("h2",null,[(0,s.Lk)("strong",null,"Total: "+(0,X.v_)(l.total)+" Bs. ",1)])]),(0,s.Lk)("button",{class:"order-button",onClick:a[2]||(a[2]=(...e)=>l.realizarPedido&&l.realizarPedido(...e))},"Realizar pedido")])])):(0,s.Q3)("",!0)])),_:1})]),i.successModalVisible?((0,s.uX)(),(0,s.Wv)(n,{key:0,mensaje:i.successMensaje,onOnClose:l.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)],64)}o(8237);var At=o(4323),_t=(o(3246),{name:"ListaProductosPedidos",components:{SuccessModal:ja},props:{cantidadesSeleccionadas:{type:Object,required:!0},platillos:{type:Array,required:!0}},computed:{platillosSeleccionados(){return this.platillos.filter((e=>this.cantidadesSeleccionadas[e.idplato]>0)).map((e=>{const a=e.descuento?e.precio-e.precio*e.descuento/100:e.precio;return{...e,precioConDescuento:a.toFixed(2),cantidad:this.cantidadesSeleccionadas[e.idplato],subtotal:(this.cantidadesSeleccionadas[e.idplato]*a).toFixed(2)}}))},total(){return this.platillosSeleccionados.reduce(((e,a)=>e+parseFloat(a.subtotal)),0).toFixed(2)}},data(){return{isModalOpen:!1,successModalVisible:!1,successMensaje:""}},methods:{toggleModal(){this.isModalOpen=!this.isModalOpen},async realizarPedido(){if(0===this.platillosSeleccionados.length)return void alert("Debe seleccionar productos primero");const e=JSON.parse(localStorage.getItem("usuario")),a=e?.idusuario;if(!a)return void alert("Debe iniciar sesión antes de realizar un pedido.");const o={fecha:(new Date).toISOString().slice(0,10),hora:(new Date).toTimeString().slice(0,8),estado:0,idusuario:parseInt(a,10),precio_total:this.total,detalles:this.platillosSeleccionados.map((e=>({idplato:e.idplato,cantidad:e.cantidad})))};try{const e=await Se.A.post("http://localhost:5000/api/pedidos",o);await Se.A.post("http://localhost:5000/api/log/",{accion:`Usuario ${a} realizó un pedido (ID ${e.data.idpedido})`,medio:"pedidos",fecha:new Date,origen:"usuario",idusuario:a,codigo:201}),await Se.A.post("http://localhost:5000/api/usuario/confirmar-pedido",{idUsuario:e.data.idusuario,detalles:e.data.detalles,precio_total:e.data.precio_total}),await Se.A.post("http://localhost:5000/api/log/",{accion:`Usuario ${a} confirmó envío de detalles del pedido ${e.data.idpedido}`,medio:"pedidos",fecha:new Date,origen:"usuario",idusuario:a,codigo:200}),this.mostrarSuccessModal("Pedido realizado con éxito. Revisa tu correo electrónico."),this.$emit("pedidoRealizado"),this.toggleModal(),this.generarPDF()}catch(t){await Se.A.post("http://localhost:5000/api/log/",{accion:`Error del sistema al procesar pedido para usuario ${a}: ${t.message}`,medio:"pedidos",fecha:new Date,origen:"sistema",idusuario:a,codigo:t.response?.status||500}),console.error("Error al realizar el pedido:",t),alert("Hubo un error al realizar el pedido. Por favor, inténtelo nuevamente.")}},mostrarSuccessModal(e){this.successMensaje=e,this.successModalVisible=!0},closeSuccessModal(){this.successModalVisible=!1},generarPDF(){const e=new At.jsPDF;e.setFontSize(18),e.setFont("helvetica","bold"),e.text("DETALLE DEL PEDIDO",10,20);const a=(new Date).toISOString().slice(0,10),o=(new Date).toTimeString().slice(0,8);e.setFontSize(12),e.setFont("helvetica","normal"),e.text(`Fecha: ${a}`,10,30),e.text(`Hora: ${o}`,10,36);const t=this.platillosSeleccionados.map((e=>[e.nombre,e.descuento?`${e.precioConDescuento} Bs. (Oferta)`:`${e.precio} Bs.`,e.cantidad,`${e.subtotal} Bs.`]));e.autoTable({startY:50,head:[["Platillo","Precio","Cantidad","Subtotal"]],body:t,theme:"grid",styles:{font:"helvetica",fontSize:12,halign:"center"},headStyles:{fillColor:[255,223,102],textColor:[50,34,9]},bodyStyles:{textColor:[50,34,9]}});const s=e.lastAutoTable.finalY+10;e.setFontSize(16),e.setFont("helvetica","bold"),e.text(`Total: ${this.total} Bs.`,10,s),e.save("pedido.pdf")}}});const xt=(0,g.A)(_t,[["render",St],["__scopeId","data-v-d60a6ba2"]]);var Pt=xt;const Ft={class:"modal-content"},Ot={class:"rating-card"},Rt={class:"stars"},Xt=["onClick"];function It(e,a,o,r,i,l){return o.show?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:a[2]||(a[2]=(0,t.D$)(((...e)=>l.close&&l.close(...e)),["self"]))},[(0,s.Lk)("div",Ft,[(0,s.Lk)("div",Ot,[a[3]||(a[3]=(0,s.Lk)("h2",null,"Califica tu experiencia",-1)),(0,s.Lk)("div",Rt,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(5,(e=>(0,s.Lk)("span",{key:e,class:(0,X.C4)(["star",{active:e<=i.rating}]),onClick:a=>l.setRating(e)}," ★ ",10,Xt))),64))]),(0,s.Lk)("button",{class:"submit-button",onClick:a[0]||(a[0]=(...e)=>l.submitRating&&l.submitRating(...e))},"enviar")]),(0,s.Lk)("button",{class:"close-button",onClick:a[1]||(a[1]=(...e)=>l.close&&l.close(...e))},"X")])])):(0,s.Q3)("",!0)}var Dt={name:"ExpCalificacion",props:{show:{type:Boolean,required:!0}},emits:["close","submitted"],data(){return{rating:0}},methods:{setRating(e){this.rating=e},async submitRating(){try{const e=localStorage.getItem("id");if(!e)return void alert("No se encontró un usuario logueado.");const a=(new Date).toISOString().split("T")[0];await Se.A.post("/api/calificaciones/calificar-experiencia",{puntuacion:this.rating,idusuario:parseInt(e,10),fecha:a}),this.$emit("submitted",this.rating),this.close()}catch(e){console.error("Error al enviar la calificación:",e),alert("Hubo un problema al guardar tu calificación.")}},close(){this.$emit("close")}}};const Vt=(0,g.A)(Dt,[["render",It],["__scopeId","data-v-dcf23fb8"]]);var $t=Vt,Ut={name:"MenuPedido",components:{CarouselComponent:ae,CardMenuPedido:yt,FiltroCategorias:lt,ListaProductosPedidos:Pt,SuccessModal:ja,ExpCalificacion:$t},data(){return{platillos:[],categoriaSeleccionada:null,cargando:!1,error:null,cantidadesSeleccionadas:{},successModalVisible:!1,successMensaje:"",isModalOpen:!1}},computed:{platillosFiltrados(){return this.categoriaSeleccionada?this.platillos.filter((e=>e.idcategoria===this.categoriaSeleccionada)):this.platillos}},mounted(){this.obtenerPlatillosOfertas()},methods:{async obtenerPlatillosOfertas(){try{const e=await Se.A.get("http://localhost:5000/api/platillos/platillos-ofertas");this.platillos=e.data,await this.obtenerOfertas(),this.platillos=this.platillos.map((e=>{const a=this.ofertas.find((a=>a.idPlato===e.idplato));return e.descuento=a?a.descuento:null,e})),console.log("Platillos con descuentos:",this.platillos)}catch(e){console.error("Error al obtener los platillos:",e)}},actualizarCantidad(e,a){this.cantidadesSeleccionadas={...this.cantidadesSeleccionadas,[e]:a}},reiniciarCantidades(){this.cantidadesSeleccionadas={}},mostrarSuccessModal(){this.successModalVisible=!0,this.successMensaje="¡Pedido realizado exitosamente!"},closeSuccessModal(){this.successModalVisible=!1,this.openModal()},openModal(){this.isModalOpen=!0},closeModal(){this.isModalOpen=!1},handleSubmitted(e){console.log("Calificación enviada:",e),this.closeModal()}}};const zt=(0,g.A)(Ut,[["render",at],["__scopeId","data-v-7fa0e0bf"]]);var jt=zt;const Nt={class:"pedidos-admin"},qt={key:0},Tt={key:1,class:"error"},Bt={class:"lista-pedidos"},Wt={key:0,class:"mensaje-vacio"},Ht={key:1,class:"cards"};function Qt(e,a,o,t,r,i){const l=(0,s.g2)("HeaderAdminTitle"),n=(0,s.g2)("FiltroEstadoPedido"),c=(0,s.g2)("CardPedido"),d=(0,s.g2)("ConfirmationModal"),u=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(l,{icon:"fas fa-clipboard-list",title:"Pedidos",subtitle:"Administra los pedidos realizados"}),(0,s.bF)(n,{estadoInicial:r.estadoActual,onCambioEstado:i.actualizarFiltro},null,8,["estadoInicial","onCambioEstado"]),(0,s.Lk)("div",Nt,[r.cargando?((0,s.uX)(),(0,s.CE)("div",qt,"Cargando pedidos...")):(0,s.Q3)("",!0),r.error?((0,s.uX)(),(0,s.CE)("div",Tt,(0,X.v_)(r.error),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",Bt,[0===i.pedidosFiltrados.length?((0,s.uX)(),(0,s.CE)("div",Wt,a[0]||(a[0]=[(0,s.Lk)("p",null,"No hay pedidos para mostrar.",-1)]))):((0,s.uX)(),(0,s.CE)("div",Ht,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.pedidosFiltrados,(e=>((0,s.uX)(),(0,s.Wv)(c,{key:e.idpedido,pedido:e,onActualizarEstado:i.handleActualizarEstado},null,8,["pedido","onActualizarEstado"])))),128))]))]),r.modalVisible?((0,s.uX)(),(0,s.Wv)(d,{key:2,mensaje:r.modalMensaje,onOnCancel:i.closeModal,onOnConfirm:i.confirmAction},null,8,["mensaje","onOnCancel","onOnConfirm"])):(0,s.Q3)("",!0),r.successModalVisible?((0,s.uX)(),(0,s.Wv)(u,{key:3,mensaje:r.successMensaje,onOnClose:i.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)])],64)}const Jt={class:"pedido-card"},Kt={class:"info"},Gt={key:0,class:"acciones"},Yt={key:1,class:"acciones"};function Zt(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",Jt,[(0,s.Lk)("div",Kt,[(0,s.Lk)("h3",null,"Pedido #"+(0,X.v_)(o.pedido.idpedido),1),(0,s.Lk)("p",null,[a[3]||(a[3]=(0,s.Lk)("strong",null,"Usuario:",-1)),(0,s.eW)(" "+(0,X.v_)(o.pedido.usuario),1)]),(0,s.Lk)("p",null,[a[4]||(a[4]=(0,s.Lk)("strong",null,"Monto Total:",-1)),(0,s.eW)(" "+(0,X.v_)(o.pedido.precio_total)+" Bs.",1)]),(0,s.Lk)("p",null,[a[5]||(a[5]=(0,s.Lk)("strong",null,"Fecha:",-1)),(0,s.eW)(" "+(0,X.v_)(o.pedido.fecha),1)]),(0,s.Lk)("p",null,[a[6]||(a[6]=(0,s.Lk)("strong",null,"Hora:",-1)),(0,s.eW)(" "+(0,X.v_)(o.pedido.hora),1)]),(0,s.Lk)("p",null,[a[7]||(a[7]=(0,s.Lk)("strong",null,"Estado:",-1)),(0,s.eW)(" "+(0,X.v_)(i.estadoTexto),1)])]),0===o.pedido.estado?((0,s.uX)(),(0,s.CE)("div",Gt,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>i.entregar&&i.entregar(...e))},"Entregar"),(0,s.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>i.cancelar&&i.cancelar(...e))},"Cancelar")])):(0,s.Q3)("",!0),1===o.pedido.estado?((0,s.uX)(),(0,s.CE)("div",Yt,[(0,s.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>i.registrarPago&&i.registrarPago(...e))},"Registrar Pago")])):(0,s.Q3)("",!0)])}var es={name:"CardPedido",props:{pedido:{type:Object,required:!0}},computed:{estadoTexto(){switch(this.pedido.estado){case 0:return"Sin entregar";case 1:return"Entregado";case 2:return"Cancelado";case 3:return"Pagado";default:return"Desconocido"}}},methods:{entregar(){this.$emit("actualizarEstado",this.pedido.idpedido,1)},cancelar(){this.$emit("actualizarEstado",this.pedido.idpedido,2)},registrarPago(){console.log("Emit evento para registrar pago"),this.$emit("actualizarEstado",this.pedido.idpedido,3)}}};const as=(0,g.A)(es,[["render",Zt],["__scopeId","data-v-9c3a7242"]]);var os=as;const ts={class:"modal-overlay"},ss={class:"modal-content confirmation-modal"},rs={class:"confirmation-message"},is={class:"button-container"};function ls(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",ts,[(0,s.Lk)("div",ss,[(0,s.Lk)("p",rs,(0,X.v_)(o.mensaje),1),(0,s.Lk)("div",is,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>i.onCancel&&i.onCancel(...e)),class:"cancel-button"},"Cancelar"),(0,s.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>i.onConfirm&&i.onConfirm(...e)),class:"confirm-button"},"Continuar")])])])}var ns={name:"ConfirmationModal",props:{mensaje:{type:String,required:!0}},emits:["onCancel","onConfirm"],methods:{onCancel(){this.$emit("onCancel")},onConfirm(){this.$emit("onConfirm")}}};const cs=(0,g.A)(ns,[["render",ls],["__scopeId","data-v-7b200b8c"]]);var ds=cs;const us={class:"filtro-estado-botones"},ps=["onClick"];function ms(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",us,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.opciones,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e.valor,class:(0,X.C4)({activo:e.valor===r.estadoSeleccionado}),onClick:a=>i.cambiarEstado(e.valor)},(0,X.v_)(e.texto),11,ps)))),128))])}var hs={name:"FiltroEstadoPedido",props:{estadoInicial:{type:Number,default:0}},data(){return{estadoSeleccionado:this.estadoInicial,opciones:[{valor:0,texto:"En espera"},{valor:1,texto:"Entregado"},{valor:3,texto:"Pagados"},{valor:2,texto:"Cancelados"}]}},methods:{cambiarEstado(e){this.estadoSeleccionado=e,this.$emit("cambioEstado",e)}}};const fs=(0,g.A)(hs,[["render",ms],["__scopeId","data-v-5cd80752"]]);var vs=fs,bs={name:"PedidosAdmin",components:{CardPedido:os,ConfirmationModal:ds,SuccessModal:ja,FiltroEstadoPedido:vs,HeaderAdminTitle:Ja},data(){return{pedidos:[],cargando:!1,error:null,modalVisible:!1,modalMensaje:"",successModalVisible:!1,successMensaje:"",action:null,pedidoSeleccionado:null,estadoActual:0}},computed:{pedidosFiltrados(){return this.pedidos.filter((e=>e.estado===this.estadoActual))}},mounted(){this.obtenerPedidos()},methods:{actualizarFiltro(e){this.estadoActual=e},async obtenerPedidos(){this.cargando=!0;try{const e=await Se.A.get("http://localhost:5000/api/pedidos");this.pedidos=e.data}catch(e){console.error("Error al obtener los pedidos:",e),this.error="No se pudieron cargar los pedidos."}finally{this.cargando=!1}},handleActualizarEstado(e,a){console.log(`Evento recibido: Pedido ID ${e}, Nuevo Estado: ${a}`),this.pedidoSeleccionado=this.pedidos.find((a=>a.idpedido===e)),this.action=a,3===a?this.modalMensaje=`¿Desea registrar el pago del pedido #${e}?`:1===a?this.modalMensaje=`¿Desea marcar el pedido #${e} como entregado?`:2===a&&(this.modalMensaje=`¿Seguro que desea cancelar el pedido #${e}?`),this.modalVisible=!0},closeModal(){this.modalVisible=!1,this.pedidoSeleccionado=null},async confirmAction(){if(this.pedidoSeleccionado)try{let e;switch(this.action){case 1:e=`http://localhost:5000/api/pedidos/entregar/${this.pedidoSeleccionado.idpedido}`;break;case 2:e=`http://localhost:5000/api/pedidos/cancelar/${this.pedidoSeleccionado.idpedido}`;break;case 3:e=`http://localhost:5000/api/pedidos/pagar/${this.pedidoSeleccionado.idpedido}`;break;default:throw new Error("Acción no válida")}await Se.A.put(e),this.pedidoSeleccionado.estado=this.action,this.pedidos=this.pedidos.map((e=>e.idpedido===this.pedidoSeleccionado.idpedido?{...e,estado:this.pedidoSeleccionado.estado}:e));const a={1:"El pedido se marcó como entregado.",2:"El pedido fue cancelado.",3:"El pago del pedido se registró exitosamente."};this.successMensaje=a[this.action],this.successModalVisible=!0}catch(e){console.error("Error al actualizar el estado del pedido:",e),this.error="No se pudo actualizar el pedido."}finally{this.closeModal()}},closeSuccessModal(){this.successModalVisible=!1,this.obtenerPedidos()}}};const gs=(0,g.A)(bs,[["render",Qt],["__scopeId","data-v-98ca39e2"]]);var ks=gs;const Cs={class:"contenedorP"},Ls={class:"filtros"},ys={class:"filtro-fecha"},Es={class:"input-group"},Ms={class:"filtro-hora"},ws={class:"input-group"},Ss={key:0,class:"row"},As={class:"card"},_s={ref:"mapa",width:"800",height:"400"},xs={id:"info-mesa"},Ps={key:3,class:"modal"};function Fs(e,a,o,r,i,l){const n=(0,s.g2)("NuevaReserva");return(0,s.uX)(),(0,s.CE)("div",Cs,[a[22]||(a[22]=(0,s.Lk)("h1",null,"Mapa Interactivo de Mesas",-1)),(0,s.Lk)("div",Ls,[(0,s.Lk)("div",ys,[a[15]||(a[15]=(0,s.Lk)("label",null,"Día:",-1)),(0,s.Lk)("div",Es,[(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":a[0]||(a[0]=e=>i.filtroDia=e)},null,512),[[t.Jo,i.filtroDia]]),(0,s.Lk)("button",{onClick:a[1]||(a[1]=e=>l.limpiarFiltro("filtroDia")),class:"limpiar-boton"},"✖")])]),(0,s.Lk)("div",Ms,[a[16]||(a[16]=(0,s.Lk)("label",null,"Hora:",-1)),(0,s.Lk)("div",ws,[(0,s.bo)((0,s.Lk)("input",{type:"time","onUpdate:modelValue":a[2]||(a[2]=e=>i.filtroHora=e)},null,512),[[t.Jo,i.filtroHora]]),(0,s.Lk)("button",{onClick:a[3]||(a[3]=e=>l.limpiarFiltro("filtroHora")),class:"limpiar-boton"},"✖")])]),(0,s.Lk)("button",{onClick:a[4]||(a[4]=(...e)=>l.aplicarFiltros&&l.aplicarFiltros(...e)),class:"btn-aplicar"},"Aplicar Filtros")]),i.mostrarMesa?((0,s.uX)(),(0,s.CE)("div",Ss,[(0,s.Lk)("div",As,[(0,s.Lk)("h4",null,(0,X.v_)(i.mesaSeleccionada.nombre),1),(0,s.Lk)("p",null,"Capacidad: "+(0,X.v_)(i.mesaSeleccionada.capacidad),1),(0,s.Lk)("button",{class:"btn-reservar",onClick:a[5]||(a[5]=(...e)=>l.abrirModalReserva&&l.abrirModalReserva(...e))},"Reservar")])])):(0,s.Q3)("",!0),2==e.rol?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:a[6]||(a[6]=e=>l.mostrarFormulario("añadir"))},"Añadir Mesa")):(0,s.Q3)("",!0),((0,s.uX)(),(0,s.CE)("svg",_s,null,512)),(0,s.Lk)("div",xs,(0,X.v_)(i.infoMesa),1),i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"overlay",onClick:a[7]||(a[7]=(...e)=>l.cerrarModal&&l.cerrarModal(...e))})):(0,s.Q3)("",!0),i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",Ps,[(0,s.Lk)("h2",null,(0,X.v_)("añadir"===i.modoFormulario?"Añadir Mesa":"Editar Mesa"),1),(0,s.Lk)("form",{onSubmit:a[14]||(a[14]=(0,t.D$)((e=>"añadir"===i.modoFormulario?l.agregarMesa():l.actualizarMesa()),["prevent"]))},[a[17]||(a[17]=(0,s.Lk)("label",{for:"nombre"},"Nombre:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=e=>i.mesaForm.nombre=e),required:""},null,512),[[t.Jo,i.mesaForm.nombre]]),a[18]||(a[18]=(0,s.Lk)("label",{for:"capacidad"},"Capacidad:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":a[9]||(a[9]=e=>i.mesaForm.capacidad=e),min:"1",required:""},null,512),[[t.Jo,i.mesaForm.capacidad]]),a[19]||(a[19]=(0,s.Lk)("label",{for:"capacidad"},"PosX:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":a[10]||(a[10]=e=>i.mesaForm.posx=e)},null,512),[[t.Jo,i.mesaForm.posx]]),a[20]||(a[20]=(0,s.Lk)("label",{for:"capacidad"},"PosY:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":a[11]||(a[11]=e=>i.mesaForm.posy=e)},null,512),[[t.Jo,i.mesaForm.posy]]),a[21]||(a[21]=(0,s.Lk)("button",{type:"submit",style:{"grid-column":"span 2"}},"Aceptar",-1)),(0,s.Lk)("button",{type:"button",onClick:a[12]||(a[12]=(...e)=>l.borrarMesaConfirmada&&l.borrarMesaConfirmada(...e)),style:{"grid-column":"span 2"}},"Eliminar"),(0,s.Lk)("button",{type:"button",onClick:a[13]||(a[13]=(...e)=>l.cerrarModal&&l.cerrarModal(...e)),style:{"grid-column":"span 2"}},"Cancelar")],32)])):(0,s.Q3)("",!0),i.modalNuevaReservaVisible?((0,s.uX)(),(0,s.Wv)(n,{key:4,titulo:"Nueva Reserva",idmesa:i.mesaSeleccionada.idmesa,onOnClose:l.cerrarModalNuevaReserva},null,8,["idmesa","onOnClose"])):(0,s.Q3)("",!0)])}var Os=o(1069);const Rs=(0,je.nY)("mesaStore",{state:()=>({mesas:[],reservas:[],mesa:null,error:null}),actions:{async obtenerMesas(){try{const e=await Se.A.get(`${ze.baseURL}mesas/`);this.mesas=e.data,console.log("mesas obtenidas del backend: ",this.mesas)}catch(e){console.error("Error al obtener las mesas:",e),this.error="Error al obtener las mesas"}},async obtenerReservas(){try{const e=await Se.A.get(`${ze.baseURL}reservas/`);this.reservas=e.data,console.log("reservas obtenidas del backend: ",this.reservas)}catch(e){console.error("Error al obtener las reservas:",e),this.error="Error al obtener las reservas"}},async crearMesa(e){console.log("mesa que está llegando ",e);try{const a=await Se.A.post(`${ze.baseURL}mesas/`,e);this.mesas.push(a.data)}catch(a){console.error("Error al crear la mesa:",a),this.error="Error al crear la mesa"}},async actualizarMesa(e,a){console.log("llega a actualizar la mesa en el store, id que llega",e),console.log("llega a actualizar la mesa en el store, mesa que llega",a);try{const o=await Se.A.put(`${ze.baseURL}mesas/${e}`,a),t=this.mesas.findIndex((a=>a.id===e));-1!==t&&(this.mesas[t]=o.data,console.log("mesa actualizada"))}catch(o){console.error("Error al actualizar la mesa:",o),this.error="Error al actualizar la mesa"}},async borrarMesa(e){try{await Se.A.put(`${ze.baseURL}mesas/${e}/estado`,{visible:!1}),this.mesas=this.mesas.filter((a=>a.id!==e))}catch(a){console.error("Error al ocultar la mesa:",a),this.error="Error al ocultar la mesa"}}}}),Xs={class:"modal-success"},Is={class:"modal-content"},Ds={key:0,class:"error-card"},Vs={class:"form-group"},$s={class:"form-group"};function Us(e,a,o,r,i,l){return(0,s.uX)(),(0,s.CE)("div",Xs,[(0,s.Lk)("div",Is,[(0,s.Lk)("span",{class:"close-button",onClick:a[0]||(a[0]=(...e)=>r.onClose&&r.onClose(...e))},"×"),(0,s.Lk)("h2",null,(0,X.v_)(o.titulo),1),r.error?((0,s.uX)(),(0,s.CE)("div",Ds,[(0,s.Lk)("p",null,(0,X.v_)(r.error),1)])):(0,s.Q3)("",!0),(0,s.Lk)("form",{onSubmit:a[3]||(a[3]=(0,t.D$)(((...e)=>r.guardarReserva&&r.guardarReserva(...e)),["prevent"]))},[(0,s.Lk)("div",Vs,[a[4]||(a[4]=(0,s.Lk)("label",{for:"fecha"},"Fecha:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"date",id:"fecha","onUpdate:modelValue":a[1]||(a[1]=e=>r.reservaData.fecha=e),required:""},null,512),[[t.Jo,r.reservaData.fecha]])]),(0,s.Lk)("div",$s,[a[5]||(a[5]=(0,s.Lk)("label",{for:"hora"},"Hora:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"time",id:"hora","onUpdate:modelValue":a[2]||(a[2]=e=>r.reservaData.hora=e),required:""},null,512),[[t.Jo,r.reservaData.hora]])]),a[6]||(a[6]=(0,s.Lk)("button",{type:"submit",class:"save-button"},"Guardar Reserva",-1))],32)])])}var zs={name:"NuevaReserva",props:{titulo:String,idmesa:Number},emits:["onClose","onSave"],setup(e,{emit:a}){const o=(0,ba.KR)(null),t=(0,ba.Kh)({idusuario:"",fecha:"",hora:"",idmesa:e.idmesa});(0,s.sV)((()=>{const e=localStorage.getItem("id");e?t.idusuario=parseInt(e,10):(console.warn("No se encontró idusuario en el localStorage. Usando valor predeterminado."),t.idusuario=1)}));const r=()=>{t.idusuario=1},i=async()=>{try{o.value=null;const{idusuario:e,idmesa:s,fecha:r,hora:i}=t,l=await fetch(`/api/reservas/verificar-disponibilidad?idmesa=${s}&fecha=${r}&hora=${i}&idreserva=`);if(!l.ok){const e=await l.json();return void(o.value=e.error||"Error en la solicitud de disponibilidad.")}const{disponible:n}=await l.json(),c=await fetch(`/api/reservas/verificar-usuario?idusuario=${t.idusuario}`);if(!c.ok){const e=await c.json();return void(o.value=e.error||"Error en la verificación del usuario.")}const{registrado:d}=await c.json();if(!d)return void(o.value="El usuario no está registrado. Puede continuar sin un usuario registrado.");if(!n)return void(o.value="La mesa seleccionada ya tiene una reserva en la misma fecha y hora (o dentro de 1 hora y media).");const u={idusuario:e||1,idmesa:s,fecha:r,hora:i,estado:1},p=await Se.A.post("/api/reservas",u);201===p.status&&(a("onSave",p.data.data),a("onClose"),_e().fire({title:"Reserva exitosa!",text:"Tu reserva se ha guardado correctamente.",icon:"success",confirmButtonText:"Aceptar"}))}catch(e){console.error("Error al guardar la reserva:",e),o.value="Ocurrió un error al guardar la reserva."}},l=()=>{a("onClose")};return{reservaData:t,guardarReserva:i,continuarSinUsuario:r,error:o,onClose:l}}};const js=(0,g.A)(zs,[["render",Us],["__scopeId","data-v-664980ca"]]);var Ns=js,qs={name:"ReservasPage",components:{NuevaReserva:Ns},data(){return{mesas:[],reservas:[],reservasFiltradasTemp:[],filtroDia:"",filtroHora:"",infoMesa:"",mostrarMesa:!1,clickTimeout:null,mostrarModal:!1,mostrarModalConfirmacion:!1,modalNuevaReservaVisible:!1,modoFormulario:"",mesaSeleccionada:{},mesaForm:{nombre:"",capacidad:1,posx:"",posy:""}}},created(){this.rol=parseInt(localStorage.getItem("rol"),10)},watch:{filtroDia(e){console.log("Nuevo filtro de día:",e)},filtroHora(e){console.log("Nuevo filtro de hora:",e)}},async mounted(){const e=Rs();await e.obtenerMesas(),await e.obtenerReservas(),this.mesas=e.mesas,this.reservas=e.reservas,this.crearMapa()},methods:{aplicarFiltros(){if(!this.filtroDia||!this.filtroHora)return console.log("Filtros no aplicados: día o hora están vacíos."),void(this.reservasFiltradasTemp=[]);const e=new Date(this.filtroDia),a=new Date(`1970-01-01T${this.filtroHora}:00`);if(isNaN(e)||isNaN(a))return console.log("Error al interpretar los filtros como fechas u horas."),void(this.reservasFiltradasTemp=[]);this.reservasFiltradasTemp=this.reservas.filter((o=>{const t=new Date(o.fecha),s=new Date(`1970-01-01T${o.hora}`),r=t.toDateString()===e.toDateString(),i=Math.abs(s-a)/6e4,l=i<=60;return r&&l})),console.log("Reservas filtradas manualmente:",this.reservasFiltradasTemp),this.actualizarColoresMesas()},actualizarColoresMesas(){const e=Os.Ltv(this.$refs.mapa);e.selectAll(".mesa").style("fill",(e=>{const a=this.reservasFiltradasTemp.find((a=>a.idmesa===e.idmesa));return a?"#724A0E":"#FFFEDC"}))},cerrarModalNuevaReserva(){this.modalNuevaReservaVisible=!1},limpiarFiltro(e){this[e]="",console.log(`Filtro ${e} limpiado, valor actual:`,this[e])},crearMapa(){const e=Os.Ltv(this.$refs.mapa);e.append("rect").attr("class","fondo").attr("width","100%").attr("height","100%").attr("fill","#A16F23");const a=Os.$Er().on("start",(function(e,a){Os.Ltv(this).raise().classed("active",!0)})).on("drag",(function(e,a){a.x=e.x,a.y=e.y,Os.Ltv(this).attr("cx",a.x).attr("cy",a.y),Os.Ltv(this.parentNode).select(".mesa-label").attr("x",a.x).attr("y",a.y+5)})).on("end",(function(){Os.Ltv(this).classed("active",!1)}));new Date;e.selectAll(".mesa").data(this.mesas).enter().append("circle").attr("class","mesa").attr("r",35).attr("cx",(e=>e.posx)).attr("cy",(e=>e.posy)).style("fill",(e=>{const a=this.reservasFiltradasTemp.find((a=>a.idmesa===e.idmesa));return a?"#724A0E":"#FFFEDC"})).style("stroke","#000").style("cursor",(e=>{const a=this.reservasFiltradasTemp.find((a=>a.idmesa===e.idmesa));return a?"not-allowed":"pointer"})).call(2==this.rol?a:()=>{}).on("click",((a,o)=>{const t=this.reservasFiltradasTemp.find((e=>e.idmesa===o.idmesa));t||(clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{e.selectAll(".mesa").filter((e=>e.idmesa===o.idmesa)).style("fill","#322209"),e.selectAll(".mesa-label").filter((e=>e.idmesa===o.idmesa)).attr("fill","white"),1===this.rol?this.abrirModalNuevaReserva(o):this.mostrarFormulario("editar",o)}),200))})),e.selectAll(".mesa-label").data(this.mesas).enter().append("text").attr("class","mesa-label").attr("x",(e=>e.posx)).attr("y",(e=>e.posy+5)).attr("text-anchor","middle").attr("font-size","16px").attr("font-weight","bold").attr("fill","#322209").text((e=>e.nombre)),e.append("rect").attr("x",50).attr("y",350).attr("width",100).attr("height",40).attr("fill","#724A0E").attr("stroke","#000"),e.append("text").attr("x",100).attr("y",375).attr("text-anchor","middle").attr("font-size","16px").attr("fill","#ffffff").text("Entrada"),e.append("rect").attr("x",540).attr("y",80).attr("width",2).attr("height",250).attr("fill","#ffffff").attr("stroke","#fff")},abrirModalNuevaReserva(e){this.mostrarMesa=!0,this.mesaSeleccionada=e,console.log(`Abriendo modal de reserva para la mesa: ${e.nombre}`)},abrirModalReserva(){this.modalNuevaReservaVisible=!0},mostrarInfo(e){this.infoMesa=`Mesa: ${e.nombre}, Capacidad: ${e.capacidad}`},mostrarFormulario(e,a=null){this.modoFormulario=e,this.mesaSeleccionada=a,"editar"===e&&this.mesaSeleccionada?this.mesaForm={...this.mesaSeleccionada}:this.mesaForm={nombre:"",capacidad:1},this.mostrarModal=!0,console.log("Modal visible:",this.mostrarModal)},cerrarModal(){this.mostrarModal=!1,this.mostrarModalConfirmacion=!1},agregarMesa(){const e={nombre:this.mesaForm.nombre,capacidad:this.mesaForm.capacidad,posx:250,posy:250},a=Rs();a.crearMesa(e).then((()=>{this.cerrarModal(),this.actualizarMapa()})).catch((e=>{console.error("Error al agregar la mesa:",e)}))},actualizarMesa(){const e={nombre:this.mesaForm.nombre,capacidad:this.mesaForm.capacidad,posx:this.mesaForm.posx,posy:this.mesaForm.posy},a=Rs();a.actualizarMesa(this.mesaSeleccionada.idmesa,e).then((()=>{this.cerrarModal(),this.actualizarMapa(),a.obtenerMesas()})).catch((e=>{console.error("Error al actualizar la mesa:",e)}))},mostrarModalBorrar(){this.mesaSeleccionada&&(this.mostrarModalConfirmacion=!0)},borrarMesaConfirmada(){if(this.mesaSeleccionada&&this.mesaSeleccionada.idmesa){const e=confirm("¿Estás seguro de que deseas eliminar esta mesa?");if(e){const e=Rs();e.borrarMesa(this.mesaSeleccionada.idmesa).then((()=>{this.cerrarModal(),this.actualizarMapa(),e.obtenerMesas()})).catch((e=>{console.error("Error al borrar la mesa desde el store:",e)}))}}else console.error("No hay mesa seleccionada para eliminar.")},actualizarMapa(){Os.Ltv(this.$refs.mapa).selectAll(".mesa").remove(),this.crearMapa()}}};const Ts=(0,g.A)(qs,[["render",Fs],["__scopeId","data-v-769241cd"]]);var Bs=Ts;const Ws={class:"main"},Hs={class:"cards"};function Qs(e,a,o,t,r,i){const l=(0,s.g2)("CarouselComponent"),n=(0,s.g2)("FiltroCategorias"),c=(0,s.g2)("CardMenu");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(l),(0,s.bF)(n,{onCategoriaSeleccionada:a[0]||(a[0]=e=>r.categoriaSeleccionada=e)}),(0,s.Lk)("div",Ws,[(0,s.Lk)("div",Hs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.platillosFiltrados,((e,a)=>((0,s.uX)(),(0,s.Wv)(c,{key:a,imagen:e.imagen,nombre:e.nombre,descripcion:e.descripcion,precio:e.precio,descuento:e.descuento},null,8,["imagen","nombre","descripcion","precio","descuento"])))),128))])])])}const Js={class:"card-front"},Ks={class:"info"},Gs=["src"],Ys={class:"info"},Zs={key:0},er={class:"precio-original"},ar={class:"precio-descuento"},or={key:1},tr={key:2,class:"descuento"},sr={class:"card-back"};function rr(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",{class:"menu-card",onMouseover:a[0]||(a[0]=e=>r.hover=!0),onMouseleave:a[1]||(a[1]=e=>r.hover=!1)},[(0,s.Lk)("div",{class:(0,X.C4)(["card-inner",{rotated:r.hover}])},[(0,s.Lk)("div",Js,[(0,s.Lk)("div",Ks,[(0,s.Lk)("img",{src:o.imagen,alt:"plato",class:"imagen"},null,8,Gs)]),(0,s.Lk)("div",Ys,[(0,s.Lk)("h3",null,(0,X.v_)(o.nombre),1),o.descuento?((0,s.uX)(),(0,s.CE)("p",Zs,[(0,s.Lk)("span",er,(0,X.v_)(o.precio)+" Bs.",1),(0,s.Lk)("span",ar,(0,X.v_)(i.precioConDescuento)+" Bs.",1)])):((0,s.uX)(),(0,s.CE)("p",or,(0,X.v_)(o.precio)+" Bs.",1)),o.descuento?((0,s.uX)(),(0,s.CE)("p",tr,(0,X.v_)(o.descuento)+"% de descuento ",1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",sr,[(0,s.Lk)("p",null,(0,X.v_)(o.descripcion),1)])],2)],32)}var ir={name:"CardMenu",props:{imagen:{type:String,required:!0},nombre:{type:String,required:!0},descripcion:{type:String,required:!0},precio:{type:Number,required:!0},descuento:{type:Number,default:null}},data(){return{hover:!1}},computed:{precioConDescuento(){return this.descuento?(this.precio*(1-this.descuento/100)).toFixed(2):this.precio}}};const lr=(0,g.A)(ir,[["render",rr],["__scopeId","data-v-3a0af9bd"]]);var nr=lr,cr={name:"MenuCliente",components:{CarouselComponent:ae,CardMenu:nr,FiltroCategorias:lt},data(){return{platillos:[],ofertas:[],categoriaSeleccionada:null,cargando:!1,error:null}},computed:{platillosFiltrados(){return this.categoriaSeleccionada?this.platillos.filter((e=>e.idcategoria===this.categoriaSeleccionada)):this.platillos}},mounted(){this.obtenerPlatillosOfertas()},methods:{async obtenerPlatillosOfertas(){try{const e=await Se.A.get("http://localhost:5000/api/platillos/platillos-ofertas");this.platillos=e.data,await this.obtenerOfertas(),this.platillos=this.platillos.map((e=>{const a=this.ofertas.find((a=>a.idPlato===e.idplato));return e.descuento=a?a.descuento:null,e})),console.log("Platillos con descuentos:",this.platillos)}catch(e){console.error("Error al obtener los platillos:",e)}}}};const dr=(0,g.A)(cr,[["render",Qs],["__scopeId","data-v-86c68b0a"]]);var ur=dr;function pr(e,a,o,t,r,i){const l=(0,s.g2)("StarRatingModal"),n=(0,s.g2)("StarRatingModalPlatillo");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>i.openModal&&i.openModal(...e)),class:"open-modal-button"},"Abrir Modal"),(0,s.bF)(l,{show:r.isModalOpen,onClose:i.closeModal,onSubmitted:i.handleSubmitted},null,8,["show","onClose","onSubmitted"]),(0,s.Lk)("button",{onClick:a[1]||(a[1]=e=>i.openModalPlatillo("Tacos al Pastor")),class:"open-modal-button"}," Calificar Platillo "),(0,s.bF)(n,{show:r.isModalPlatilloOpen,platillo:r.platilloActual,onClose:i.closeModalPlatillo,onSubmitted:i.handleSubmittedPlatillo},null,8,["show","platillo","onClose","onSubmitted"])])}const mr={class:"modal-content"},hr={class:"rating-card"},fr={class:"stars"},vr=["onClick"];function br(e,a,o,r,i,l){return o.show?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:a[2]||(a[2]=(0,t.D$)(((...e)=>l.close&&l.close(...e)),["self"]))},[(0,s.Lk)("div",mr,[(0,s.Lk)("div",hr,[a[5]||(a[5]=(0,s.Lk)("h2",null,"Queremos saber tu opinión",-1)),(0,s.Lk)("p",null,[a[3]||(a[3]=(0,s.eW)("¿Qué te pareció ")),(0,s.Lk)("strong",null,(0,X.v_)(o.platillo),1),a[4]||(a[4]=(0,s.eW)("?"))]),(0,s.Lk)("div",fr,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(5,(e=>(0,s.Lk)("span",{key:e,class:(0,X.C4)(["star",{active:e<=i.rating}]),onClick:a=>l.setRating(e)}," ★ ",10,vr))),64))]),(0,s.Lk)("button",{class:"submit-button",onClick:a[0]||(a[0]=(...e)=>l.submitRating&&l.submitRating(...e))},"Enviar")]),(0,s.Lk)("button",{class:"close-button",onClick:a[1]||(a[1]=(...e)=>l.close&&l.close(...e))},"X")])])):(0,s.Q3)("",!0)}var gr={name:"StarRatingModalPlatillo",props:{show:{type:Boolean,required:!0},platillo:{type:String,required:!0}},emits:["close","submitted"],data(){return{rating:0}},methods:{setRating(e){this.rating=e},submitRating(){this.$emit("submitted",{platillo:this.platillo,rating:this.rating}),this.close()},close(){this.$emit("close")}}};const kr=(0,g.A)(gr,[["render",br],["__scopeId","data-v-ee1849e8"]]);var Cr=kr,Lr={name:"TemporalCalificacion",components:{StarRatingModal:$t,StarRatingModalPlatillo:Cr},data(){return{isModalOpen:!1,isModalPlatilloOpen:!1,platilloActual:""}},methods:{openModal(){this.isModalOpen=!0},closeModal(){this.isModalOpen=!1},handleSubmitted(e){console.log("Calificación enviada:",e)},openModalPlatillo(e){this.platilloActual=e,this.isModalPlatilloOpen=!0},closeModalPlatillo(){this.isModalPlatilloOpen=!1},handleSubmittedPlatillo({platillo:e,rating:a}){console.log(`Calificación enviada: ${a} para ${e}`)}}};const yr=(0,g.A)(Lr,[["render",pr],["__scopeId","data-v-a009b760"]]);var Er=yr;const Mr={class:"reservas-container"},wr={key:0,class:"error-card"},Sr={key:1,class:"reservas-list"},Ar={key:0,class:"acciones"},_r=["onClick"],xr={key:2};function Pr(e,a,o,t,r,i){const l=(0,s.g2)("ConfirmationModal"),n=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",Mr,[a[1]||(a[1]=(0,s.Lk)("h1",null,"Mis Reservas",-1)),t.error?((0,s.uX)(),(0,s.CE)("div",wr,[(0,s.Lk)("p",null,(0,X.v_)(t.error),1)])):(0,s.Q3)("",!0),t.reservas.length>0?((0,s.uX)(),(0,s.CE)("div",Sr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.reservas,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.idreserva,class:(0,X.C4)(["reserva-card",1===e.estado?"pendiente":"finalizada"])},[(0,s.Lk)("h3",null,(0,X.v_)(1===e.estado?"Reserva pendiente":"Reserva finalizada"),1),(0,s.Lk)("p",null,"Mesa: "+(0,X.v_)(e.idmesa),1),(0,s.Lk)("p",null,"Fecha: "+(0,X.v_)(t.formatFecha(e.fecha)),1),(0,s.Lk)("p",null,"Hora: "+(0,X.v_)(e.hora),1),1===e.estado?((0,s.uX)(),(0,s.CE)("div",Ar,[(0,s.Lk)("button",{onClick:a=>t.mostrarConfirmacion(e),class:"cancelar-btn"}," Cancelar ",8,_r)])):(0,s.Q3)("",!0)],2)))),128))])):((0,s.uX)(),(0,s.CE)("p",xr,"No tienes reservas en este momento.")),t.mostrarModalConfirmacion?((0,s.uX)(),(0,s.Wv)(l,{key:3,mensaje:"¿Estás seguro de que deseas cancelar esta reserva?",onOnCancel:t.cancelarCancelacion,onOnConfirm:t.confirmarCancelacion},null,8,["onOnCancel","onOnConfirm"])):(0,s.Q3)("",!0),e.mostrarSuccessModal?((0,s.uX)(),(0,s.Wv)(n,{key:4,mensaje:e.mensajeSuccess,onOnClose:a[0]||(a[0]=a=>e.mostrarSuccessModal=!1)},null,8,["mensaje"])):(0,s.Q3)("",!0)])}var Fr={name:"MisReservas",components:{ConfirmationModal:ds,SuccessModal:ja},setup(){const e=(0,ba.KR)([]),a=(0,ba.KR)(null),o=(0,ba.KR)(!1),t=(0,ba.KR)(null),r=(0,ba.KR)(!1),i=(0,ba.KR)(""),l=async()=>{try{const o=localStorage.getItem("id");if(!o)return void(a.value="No se encontró un usuario logueado.");const t=await Se.A.get(`/api/reservas/usuario/${o}`);e.value=t.data}catch(o){console.error("Error al cargar reservas:",o),a.value="Ocurrió un error al cargar tus reservas."}},n=e=>{t.value=e,o.value=!0},c=async()=>{try{await Se.A.delete(`/api/reservas/${t.value.idreserva}`),e.value=e.value.filter((e=>e.idreserva!==t.value.idreserva)),i.value="Reserva cancelada exitosamente.",r.value=!0}catch(s){console.error("Error al cancelar reserva:",s),a.value="Ocurrió un error al cancelar la reserva."}finally{o.value=!1,t.value=null}},d=()=>{o.value=!1,t.value=null},u=e=>{const a=new Date(e+"T00:00:00");return a.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})};return(0,s.sV)(l),{reservas:e,error:a,mostrarConfirmacion:n,confirmarCancelacion:c,cancelarCancelacion:d,formatFecha:u,mostrarModalConfirmacion:o}}};const Or=(0,g.A)(Fr,[["render",Pr],["__scopeId","data-v-78137bd6"]]);var Rr=Or;const Xr={class:"pedidos-container"},Ir={key:0,class:"error-card"},Dr={key:1,class:"pedidos-list"},Vr={class:"acciones"},$r=["onClick"],Ur=["onClick"],zr={key:2},jr={key:3,class:"modal-overlay"},Nr={class:"modal-content"},qr=["onClick"],Tr=["onClick"];function Br(e,a,o,t,r,i){const l=(0,s.g2)("StarRatingModalPlatillo"),n=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",Xr,[a[6]||(a[6]=(0,s.Lk)("h1",null,"Mis Pedidos",-1)),t.error?((0,s.uX)(),(0,s.CE)("div",Ir,[(0,s.Lk)("p",null,(0,X.v_)(t.error),1)])):(0,s.Q3)("",!0),t.pedidos.length>0?((0,s.uX)(),(0,s.CE)("div",Dr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.pedidos,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.idpedido,class:(0,X.C4)(["pedido-card",t.getEstadoClase(e.estado)])},[(0,s.Lk)("h3",null,(0,X.v_)(t.getEstadoTexto(e.estado)),1),(0,s.Lk)("p",null,"Fecha: "+(0,X.v_)(t.formatFecha(e.fecha)),1),(0,s.Lk)("p",null,"Hora: "+(0,X.v_)(e.hora),1),(0,s.Lk)("p",null,"Precio Total: Bs. "+(0,X.v_)(e.precio_total.toFixed(2)),1),(0,s.Lk)("div",Vr,[(0,s.Lk)("button",{onClick:a=>t.verDetallesPedido(e.idpedido,e.estado),class:"detalle-btn"},"Ver Detalles",8,$r),0===e.estado?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a=>t.cancelarPedido(e.idpedido),class:"accion-btn cancelar"}," Cancelar ",8,Ur)):(0,s.Q3)("",!0)])],2)))),128))])):((0,s.uX)(),(0,s.CE)("p",zr,"No tienes pedidos en este momento.")),t.mostrarModal?((0,s.uX)(),(0,s.CE)("div",jr,[(0,s.Lk)("div",Nr,[(0,s.Lk)("span",{class:"close-button",onClick:a[0]||(a[0]=(...e)=>t.cerrarModal&&t.cerrarModal(...e))},"×"),a[5]||(a[5]=(0,s.Lk)("h2",null,"Detalles del Pedido",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.detallesPedido,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.iddetalle},[(0,s.Lk)("p",null,[a[3]||(a[3]=(0,s.Lk)("strong",null,"Platillo:",-1)),(0,s.eW)(" "+(0,X.v_)(e.platillo),1)]),(0,s.Lk)("p",null,[a[4]||(a[4]=(0,s.Lk)("strong",null,"Cantidad:",-1)),(0,s.eW)(" "+(0,X.v_)(e.cantidad),1)]),1===t.estadoPedido?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"calificar-btn",onClick:a=>t.abrirCalificacionModal(e.platillo,e.idplato)}," Calificar ",8,qr)):(0,s.Q3)("",!0),3===t.estadoPedido?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"calificar-btn",onClick:a=>t.abrirCalificacionModal(e.platillo,e.idplato)}," Calificar ",8,Tr)):(0,s.Q3)("",!0)])))),128))])])])):(0,s.Q3)("",!0),t.mostrarCalificacionModal?((0,s.uX)(),(0,s.Wv)(l,{key:4,show:!0,platillo:t.platilloSeleccionado.nombre,onClose:a[1]||(a[1]=e=>t.mostrarCalificacionModal=!1),onSubmitted:t.manejarCalificacion},null,8,["platillo","onSubmitted"])):(0,s.Q3)("",!0),t.mostrarSuccessModal?((0,s.uX)(),(0,s.Wv)(n,{key:5,mensaje:t.mensajeSuccess,onOnClose:a[2]||(a[2]=e=>t.mostrarSuccessModal=!1)},null,8,["mensaje"])):(0,s.Q3)("",!0)])}var Wr={name:"MisPedidos",components:{StarRatingModalPlatillo:Cr,SuccessModal:ja},setup(){const e=(0,ba.KR)([]),a=(0,ba.KR)([]),o=(0,ba.KR)(!1),t=(0,ba.KR)(!1),r=(0,ba.KR)({}),i=(0,ba.KR)(null),l=(0,ba.KR)(null),n=(0,ba.KR)(!1),c=(0,ba.KR)(""),d=(e,a)=>{r.value={nombre:e,idplato:a},t.value=!0,console.log("Modal abierto para:",r.value)},u=async({rating:e})=>{try{const a=localStorage.getItem("id");if(!a)return void alert("Usuario no autenticado. No se puede guardar la calificación.");const o=await Se.A.get("/api/calificaciones/existe",{params:{idusuario:parseInt(a,10),idplato:r.value.idplato}});o.data.existe?(await Se.A.put("/api/calificaciones/actualizar",{puntuacion:e,idusuario:parseInt(a,10),idplato:r.value.idplato}),c.value=`¡Gracias por actualizar tu calificación de ${r.value.nombre} a ${e} estrellas!`):(await Se.A.post("/api/calificaciones",{puntuacion:e,idusuario:parseInt(a,10),idplato:r.value.idplato}),c.value=`¡Gracias por calificar ${r.value.nombre} con ${e} estrellas!`),n.value=!0}catch(l){console.error("Error al manejar la calificación:",l),alert("Hubo un problema al guardar tu calificación.")}finally{t.value=!1}},p=async()=>{try{const a=localStorage.getItem("id");if(!a)return void(l.value="No se encontró un usuario logueado.");const o=await Se.A.get(`/api/pedidos/usuario/${a}`);e.value=o.data}catch(a){console.error("Error al cargar pedidos:",a),l.value="Ocurrió un error al cargar tus pedidos."}},m=async(e,t)=>{try{const s=await Se.A.get(`/api/detalle_pedido/pedido?pedido=${e}`);a.value=s.data,i.value=t,o.value=!0}catch(s){console.error("Error al cargar detalles del pedido:",s),l.value="Ocurrió un error al cargar los detalles del pedido."}},h=()=>{o.value=!1,a.value=[],i.value=null},f=async e=>{try{await Se.A.put(`/api/pedidos/cancelar/${e}`),alert("Pedido cancelado exitosamente."),p()}catch(a){console.error("Error al cancelar pedido:",a),l.value="Error al cancelar el pedido."}},v=e=>{switch(e){case 0:return"Pedido pendiente";case 1:return"Pedido entregado";case 2:return"Pedido cancelado";case 3:return"Pedido pagado";default:return"Estado desconocido"}},b=e=>{switch(e){case 0:return"pendiente";case 1:return"entregado";case 2:return"cancelado";case 3:return"pagado";default:return""}},g=e=>{const a=new Date(e);return a.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})};return(0,s.sV)(p),{pedidos:e,detallesPedido:a,mostrarModal:o,mostrarCalificacionModal:t,platilloSeleccionado:r,estadoPedido:i,error:l,abrirCalificacionModal:d,manejarCalificacion:u,cargarPedidos:p,verDetallesPedido:m,cerrarModal:h,cancelarPedido:f,getEstadoTexto:v,getEstadoClase:b,formatFecha:g,mostrarSuccessModal:n,mensajeSuccess:c}}};const Hr=(0,g.A)(Wr,[["render",Br],["__scopeId","data-v-35bd7b4c"]]);var Qr=Hr;const Jr={class:"calificaciones-container"},Kr={key:0,class:"error-card"},Gr={key:1,class:"calificaciones-grid"},Yr={key:2};function Zr(e,a,o,t,r,i){const l=(0,s.g2)("CardMenuWithRating");return(0,s.uX)(),(0,s.CE)("div",Jr,[a[0]||(a[0]=(0,s.Lk)("h1",null,"Mis Calificaciones",-1)),r.error?((0,s.uX)(),(0,s.CE)("div",Kr,[(0,s.Lk)("p",null,(0,X.v_)(r.error),1)])):(0,s.Q3)("",!0),r.calificaciones.length>0?((0,s.uX)(),(0,s.CE)("div",Gr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.calificaciones,(e=>((0,s.uX)(),(0,s.Wv)(l,{key:e.idresenia,idresenia:e.idresenia,imagen:e.imagen,nombre:e.platillo,descripcion:e.descripcion,"rating-inicial":e.puntuacion,idusuario:r.idusuario,idplato:e.idplato,onUpdated:i.handleUpdated,onDeleted:i.handleDeleted},null,8,["idresenia","imagen","nombre","descripcion","rating-inicial","idusuario","idplato","onUpdated","onDeleted"])))),128))])):((0,s.uX)(),(0,s.CE)("p",Yr,"No has calificado ningún platillo aún."))])}const ei={class:"menu-card"},ai={class:"card-content"},oi=["src"],ti={class:"stars"},si=["onClick"],ri={class:"card-actions"};function ii(e,a,o,t,r,i){const l=(0,s.g2)("SuccessModal"),n=(0,s.g2)("ConfirmationModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",ei,[(0,s.Lk)("div",ai,[(0,s.Lk)("img",{src:o.imagen,alt:"plato",class:"imagen"},null,8,oi),a[4]||(a[4]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("h3",null,(0,X.v_)(o.nombre),1),(0,s.Lk)("p",null,(0,X.v_)(o.descripcion),1)]),(0,s.Lk)("div",ti,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(5,(e=>(0,s.Lk)("span",{key:e,class:(0,X.C4)(["star",{active:e<=r.rating,editable:r.isEditable}]),onClick:a=>r.isEditable?i.setRating(e):null}," ★ ",10,si))),64))]),(0,s.Lk)("div",ri,[r.isEditable?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"save-btn",onClick:a[1]||(a[1]=(...e)=>i.saveChanges&&i.saveChanges(...e))},"Guardar")):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"modify-btn",onClick:a[0]||(a[0]=(...e)=>i.enableEdit&&i.enableEdit(...e))},"Modificar")),(0,s.Lk)("button",{class:"delete-btn",onClick:a[2]||(a[2]=(...e)=>i.eliminarResenia&&i.eliminarResenia(...e))},"Eliminar")])]),r.mostrarModal?((0,s.uX)(),(0,s.Wv)(l,{key:0,mensaje:r.mensajeModal,onOnClose:a[3]||(a[3]=e=>r.mostrarModal=!1)},null,8,["mensaje"])):(0,s.Q3)("",!0),r.mostrarConfirmationModal?((0,s.uX)(),(0,s.Wv)(n,{key:1,mensaje:"¿Estás seguro de que deseas eliminar esta calificación?",onOnCancel:i.cancelarEliminacion,onOnConfirm:i.confirmarEliminacion},null,8,["onOnCancel","onOnConfirm"])):(0,s.Q3)("",!0)],64)}var li={name:"CardMenuWithRating",components:{SuccessModal:ja,ConfirmationModal:ds},props:{idresenia:{type:Number,required:!0},imagen:{type:String,required:!0},nombre:{type:String,required:!0},descripcion:{type:String,required:!0},ratingInicial:{type:Number,default:0},idusuario:{type:Number,required:!0},idplato:{type:Number,required:!0}},data(){return{rating:this.ratingInicial,isEditable:!1,editando:null,mostrarModal:!1,mensajeModal:"",mostrarConfirmationModal:!1}},methods:{setRating(e){this.rating=e},enableEdit(){this.isEditable=!0,this.editando={idplato:this.idplato,nombre:this.nombre,rating:this.rating},console.log("Editando plato:",this.editando)},async saveChanges(){try{if(!this.idusuario||!this.idplato)return void alert("Faltan datos para actualizar la calificación.");console.log("Guardando cambios para el plato:",this.editando);const e=await Se.A.get("/api/calificaciones/existe",{params:{idusuario:this.idusuario,idplato:this.idplato}});console.log("Respuesta de la verificación:",e.data),e.data.existe?(await Se.A.put("/api/calificaciones/actualizar",{puntuacion:this.rating,idusuario:this.idusuario,idplato:this.idplato}),this.mensajeModal=`Calificación actualizada a ${this.rating} estrellas`):(await Se.A.post("/api/calificaciones",{puntuacion:this.rating,idusuario:this.idusuario,idplato:this.idplato}),this.mensajeModal=`Calificación creada con ${this.rating} estrellas`),this.isEditable=!1,this.editando=null,this.mostrarModal=!0,this.$emit("updated",{idresenia:this.idresenia,rating:this.rating})}catch(e){console.error("Error al guardar la calificación:",e),alert("Hubo un problema al guardar la calificación.")}},async eliminarResenia(){this.mostrarConfirmationModal=!0},async confirmarEliminacion(){try{await Se.A.delete(`/api/calificaciones/${this.idresenia}`),this.mensajeModal=`La calificación de ${this.nombre} fue eliminada.`,this.mostrarModal=!0,this.mostrarConfirmationModal=!1,this.$emit("deleted",this.idresenia)}catch(e){console.error("Error al eliminar la calificación:",e),alert("Hubo un problema al eliminar la calificación.")}},cancelarEliminacion(){this.mostrarConfirmationModal=!1}}};const ni=(0,g.A)(li,[["render",ii],["__scopeId","data-v-34bf144e"]]);var ci=ni,di={name:"MisCalificaciones",components:{CardMenuWithRating:ci},data(){return{calificaciones:[],error:null,idusuario:localStorage.getItem("id")?parseInt(localStorage.getItem("id"),10):null}},methods:{async cargarCalificaciones(){try{const e=localStorage.getItem("id");if(!e)return void(this.error="No se encontró un usuario logueado.");const a=await Se.A.get(`/api/calificaciones/usuario/${e}`);this.calificaciones=a.data}catch(e){console.error("Error al cargar las calificaciones:",e),this.error="Ocurrió un error al cargar tus calificaciones."}},handleRating({nombre:e,rating:a}){console.log(`Nueva calificación para ${e}: ${a} estrellas`)},handleUpdated({idresenia:e,rating:a}){const o=this.calificaciones.find((a=>a.idresenia===e));o&&(o.puntuacion=a)},handleDeleted(e){this.calificaciones=this.calificaciones.filter((a=>a.idresenia!==e))}},mounted(){this.cargarCalificaciones()}};const ui=(0,g.A)(di,[["render",Zr],["__scopeId","data-v-a64d6ae8"]]);var pi=ui;const mi={class:"main"},hi={class:"cards"};function fi(e,a,o,t,r,i){const l=(0,s.g2)("CarouselComponent"),n=(0,s.g2)("ListaPedidosMesero"),c=(0,s.g2)("FiltroCategorias"),d=(0,s.g2)("CardMenuPedido"),u=(0,s.g2)("FooterComponent"),p=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(l),(0,s.bF)(n,{cantidadesSeleccionadas:r.cantidadesSeleccionadas,platillos:r.platillos,onPedidoRealizado:i.mostrarSuccessModal,onReiniciarCantidades:a[0]||(a[0]=e=>r.cantidadesSeleccionadas={})},null,8,["cantidadesSeleccionadas","platillos","onPedidoRealizado"]),(0,s.bF)(c,{onCategoriaSeleccionada:a[1]||(a[1]=e=>r.categoriaSeleccionada=e)}),(0,s.Lk)("div",mi,[(0,s.Lk)("div",hi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.platillosFiltrados,(e=>((0,s.uX)(),(0,s.Wv)(d,{key:e.idplato,imagen:e.imagen,nombre:e.nombre,descripcion:e.descripcion,precio:e.precio,descuento:e.descuento,id:e.idplato,cantidad:r.cantidadesSeleccionadas[e.idplato]||0,onActualizarCantidad:i.actualizarCantidad},null,8,["imagen","nombre","descripcion","precio","descuento","id","cantidad","onActualizarCantidad"])))),128))])]),(0,s.bF)(u),r.successModalVisible?((0,s.uX)(),(0,s.Wv)(p,{key:0,mensaje:r.successMensaje,onOnClose:i.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)])}const vi={class:"modal-content"},bi={class:"id-usuario"},gi={class:"table-container"},ki={class:"table"};function Ci(e,a,o,r,i,l){const n=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"floating-button",onClick:a[0]||(a[0]=(...e)=>l.toggleModal&&l.toggleModal(...e))},a[5]||(a[5]=[(0,s.Lk)("i",{class:"fas fa-utensils"},null,-1)])),(0,s.bF)(t.eB,{name:"fade"},{default:(0,s.k6)((()=>[i.isModalOpen?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:a[4]||(a[4]=(0,t.D$)(((...e)=>l.toggleModal&&l.toggleModal(...e)),["self"]))},[(0,s.Lk)("div",vi,[(0,s.Lk)("button",{class:"close-icon",onClick:a[1]||(a[1]=(...e)=>l.toggleModal&&l.toggleModal(...e))},a[6]||(a[6]=[(0,s.Lk)("i",{class:"fa-solid fa-x"},null,-1)])),a[9]||(a[9]=(0,s.Lk)("h2",null,"Pedido Cliente",-1)),(0,s.Lk)("div",bi,[a[7]||(a[7]=(0,s.Lk)("label",{for:"idUsuario"},"ID Usuario:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"idUsuario","onUpdate:modelValue":a[2]||(a[2]=e=>i.pedidoData.idusuario=e),placeholder:"Ingrese ID del usuario"},null,512),[[t.Jo,i.pedidoData.idusuario]])]),(0,s.Lk)("div",gi,[(0,s.Lk)("table",ki,[a[8]||(a[8]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Platillo"),(0,s.Lk)("th",null,"Precio"),(0,s.Lk)("th",null,"Cantidad"),(0,s.Lk)("th",null,"Subtotal")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.platillosSeleccionados,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.idplato},[(0,s.Lk)("td",null,(0,X.v_)(e.nombre),1),(0,s.Lk)("td",null,(0,X.v_)(e.descuento?`${e.precioConDescuento} Bs. (Oferta)`:`${e.precio} Bs.`),1),(0,s.Lk)("td",null,(0,X.v_)(e.cantidad),1),(0,s.Lk)("td",null,(0,X.v_)(e.subtotal)+" Bs.",1)])))),128))])]),(0,s.Lk)("h2",null,[(0,s.Lk)("strong",null,"Total: "+(0,X.v_)(l.total)+" Bs. ",1)])]),(0,s.Lk)("button",{class:"order-button",onClick:a[3]||(a[3]=(...e)=>l.realizarPedido&&l.realizarPedido(...e))},"Realizar pedido")])])):(0,s.Q3)("",!0)])),_:1})]),i.successModalVisible?((0,s.uX)(),(0,s.Wv)(n,{key:0,mensaje:i.successMensaje,onOnClose:l.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)],64)}var Li={name:"ListaPedidosMesero",components:{SuccessModal:ja},props:{cantidadesSeleccionadas:{type:Object,required:!0},platillos:{type:Array,required:!0}},computed:{platillosSeleccionados(){return this.platillos.filter((e=>this.cantidadesSeleccionadas[e.idplato]>0)).map((e=>{const a=e.descuento?e.precio-e.precio*e.descuento/100:e.precio;return{...e,precioConDescuento:a.toFixed(2),cantidad:this.cantidadesSeleccionadas[e.idplato],subtotal:(this.cantidadesSeleccionadas[e.idplato]*a).toFixed(2)}}))},total(){return this.platillosSeleccionados.reduce(((e,a)=>e+parseFloat(a.subtotal)),0).toFixed(2)}},data(){return{isModalOpen:!1,successModalVisible:!1,successMensaje:"",pedidoData:{idusuario:""}}},methods:{toggleModal(){this.isModalOpen=!this.isModalOpen},async realizarPedido(){if(0===this.platillosSeleccionados.length)return void alert("Debe seleccionar productos primero");if(!this.pedidoData.idusuario)return void alert("Debe ingresar el ID del usuario antes de realizar un pedido.");const e={fecha:(new Date).toISOString().slice(0,10),hora:(new Date).toTimeString().slice(0,8),estado:0,idusuario:parseInt(this.pedidoData.idusuario,10),precio_total:this.total,detalles:this.platillosSeleccionados.map((e=>({idplato:e.idplato,cantidad:e.cantidad})))};try{const a=await Se.A.post("http://localhost:5000/api/pedidos",e);await Se.A.post("http://localhost:5000/api/usuario/confirmar-pedido",{idUsuario:a.data.idusuario,detalles:a.data.detalles,precio_total:a.data.precio_total}),this.$emit("pedidoRealizado"),this.toggleModal()}catch(a){console.error("Error al realizar el pedido:",a),alert("Hubo un error al realizar el pedido. Por favor, inténtelo nuevamente.")}},mostrarSuccessModal(e){this.successMensaje=e,this.successModalVisible=!0},closeSuccessModal(){this.successModalVisible=!1},generarPDF(){const e=new At.jsPDF;e.setFontSize(18),e.setFont("helvetica","bold"),e.text("DETALLE DEL PEDIDO",10,20);const a=(new Date).toISOString().slice(0,10),o=(new Date).toTimeString().slice(0,8);e.setFontSize(12),e.setFont("helvetica","normal"),e.text(`Fecha: ${a}`,10,30),e.text(`Hora: ${o}`,10,36);const t=this.platillosSeleccionados.map((e=>[e.nombre,e.descuento?`${e.precioConDescuento} Bs. (Oferta)`:`${e.precio} Bs.`,e.cantidad,`${e.subtotal} Bs.`]));e.autoTable({startY:50,head:[["Platillo","Precio","Cantidad","Subtotal"]],body:t,theme:"grid",styles:{font:"helvetica",fontSize:12,halign:"center"},headStyles:{fillColor:[255,223,102],textColor:[50,34,9]},bodyStyles:{textColor:[50,34,9]}});const s=e.lastAutoTable.finalY+10;e.setFontSize(16),e.setFont("helvetica","bold"),e.text(`Total: ${this.total} Bs.`,10,s),e.save("pedido.pdf")}}};const yi=(0,g.A)(Li,[["render",Ci],["__scopeId","data-v-16b4b143"]]);var Ei=yi,Mi={name:"MenuPedidoMesero",components:{CarouselComponent:ae,CardMenuPedido:yt,FiltroCategorias:lt,ListaPedidosMesero:Ei,SuccessModal:ja},data(){return{platillos:[],categoriaSeleccionada:null,cargando:!1,error:null,cantidadesSeleccionadas:{},successModalVisible:!1,successMensaje:"",isModalOpen:!1}},computed:{platillosFiltrados(){return this.categoriaSeleccionada?this.platillos.filter((e=>e.idcategoria===this.categoriaSeleccionada)):this.platillos}},mounted(){this.obtenerPlatillosOfertas()},methods:{async obtenerPlatillosOfertas(){try{const e=await Se.A.get("http://localhost:5000/api/platillos/platillos-ofertas");this.platillos=e.data,await this.obtenerOfertas(),this.platillos=this.platillos.map((e=>{const a=this.ofertas.find((a=>a.idPlato===e.idplato));return e.descuento=a?a.descuento:null,e})),console.log("Platillos con descuentos:",this.platillos)}catch(e){console.error("Error al obtener los platillos:",e)}},actualizarCantidad(e,a){this.cantidadesSeleccionadas={...this.cantidadesSeleccionadas,[e]:a}},reiniciarCantidades(){this.cantidadesSeleccionadas={}},mostrarSuccessModal(){this.successModalVisible=!0,this.successMensaje="¡Pedido realizado exitosamente!"},closeSuccessModal(){this.successModalVisible=!1,this.openModal()},openModal(){this.isModalOpen=!0},closeModal(){this.isModalOpen=!1},handleSubmitted(e){console.log("Calificación enviada:",e),this.closeModal()}}};const wi=(0,g.A)(Mi,[["render",fi],["__scopeId","data-v-dc3f4ed4"]]);var Si=wi;const Ai={ref:"mapa",width:"800",height:"400"},_i={id:"info-mesa"},xi={key:3,class:"modal"};function Pi(e,a,o,r,i,l){const n=(0,s.g2)("HeaderAdminTitle"),c=(0,s.g2)("NuevaReserva");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n,{icon:"fa fa-map-marker-alt",title:"Mapa de Mesas",subtitle:"Visualiza y gestiona la distribución de las mesas en tu restaurante"}),2==e.rol?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a[0]||(a[0]=e=>l.mostrarFormulario("añadir"))},"Añadir Mesa")):(0,s.Q3)("",!0),2==e.rol?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:a[1]||(a[1]=e=>l.guardarCoordenadas())},"Guardar Mesas")):(0,s.Q3)("",!0),((0,s.uX)(),(0,s.CE)("svg",Ai,null,512)),(0,s.Lk)("div",_i,(0,X.v_)(i.infoMesa),1),i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"overlay",onClick:a[2]||(a[2]=(...e)=>l.cerrarModal&&l.cerrarModal(...e))})):(0,s.Q3)("",!0),i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",xi,[(0,s.Lk)("h2",null,(0,X.v_)("añadir"===i.modoFormulario?"Añadir Mesa":"Editar Mesa"),1),(0,s.Lk)("form",{onSubmit:a[7]||(a[7]=(0,t.D$)((e=>"añadir"===i.modoFormulario?l.agregarMesa():l.actualizarMesa()),["prevent"]))},[a[8]||(a[8]=(0,s.Lk)("label",{for:"nombre"},"Nombre:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>i.mesaForm.nombre=e),required:""},null,512),[[t.Jo,i.mesaForm.nombre]]),a[9]||(a[9]=(0,s.Lk)("label",{for:"capacidad"},"Capacidad:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":a[4]||(a[4]=e=>i.mesaForm.capacidad=e),min:"1",required:""},null,512),[[t.Jo,i.mesaForm.capacidad]]),a[10]||(a[10]=(0,s.Lk)("button",{type:"submit",style:{"grid-column":"span 2"}},"Aceptar",-1)),(0,s.Lk)("button",{type:"button",onClick:a[5]||(a[5]=(...e)=>l.borrarMesaConfirmada&&l.borrarMesaConfirmada(...e)),style:{"grid-column":"span 2"}},"Eliminar"),(0,s.Lk)("button",{type:"button",onClick:a[6]||(a[6]=(...e)=>l.cerrarModal&&l.cerrarModal(...e)),style:{"grid-column":"span 2"}},"Cancelar")],32)])):(0,s.Q3)("",!0),i.modalNuevaReservaVisible?((0,s.uX)(),(0,s.Wv)(c,{key:4,titulo:"Nueva Reserva",idmesa:i.mesaSeleccionada.idmesa,onOnClose:l.cerrarModalNuevaReserva},null,8,["idmesa","onOnClose"])):(0,s.Q3)("",!0)])}o(7588);var Fi={name:"ReservasPage",components:{NuevaReserva:Ns,HeaderAdminTitle:Ja},data(){return{mesas:[],infoMesa:"",clickTimeout:null,mostrarModal:!1,mostrarModalConfirmacion:!1,modalNuevaReservaVisible:!1,modoFormulario:"",mesaSeleccionada:{},actualizarMesas:[],mesaForm:{nombre:"",capacidad:1,posx:"",posy:""}}},created(){this.rol=parseInt(localStorage.getItem("rol"),10)},async mounted(){const e=Rs();await e.obtenerMesas(),this.mesas=e.mesas,this.crearMapa()},methods:{cerrarModalNuevaReserva(){this.modalNuevaReservaVisible=!1},crearMapa(){const e=Os.Ltv(this.$refs.mapa);e.append("rect").attr("class","fondo").attr("width","100%").attr("height","100%").attr("fill","#A16F23");const a=Os.$Er().on("start",((a,o)=>{e.selectAll(".mesa-label").remove()})).on("drag",((a,o)=>{o.posx=a.x,o.posy=a.y,e.selectAll(".mesa").filter((e=>e.idmesa===o.idmesa)).attr("cx",o.posx).attr("cy",o.posy),this.actualizarMesaCor(o)})).on("end",((a,o)=>{e.selectAll(".mesa-label").data(this.mesas).enter().append("text").attr("class","mesa-label").attr("x",(e=>e.posx)).attr("y",(e=>e.posy+5)).attr("text-anchor","middle").attr("font-size","16px").attr("font-weight","bold").attr("fill","#322209").text((e=>e.nombre))}));e.selectAll(".mesa").data(this.mesas).enter().append("circle").attr("class","mesa").attr("r",35).attr("cx",(e=>e.posx)).attr("cy",(e=>e.posy)).style("fill","#FFFEDC").style("stroke","#000").style("cursor",(this.rol,"pointer")).call(2==this.rol?a:()=>{}).on("click",((e,a)=>{clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{1===this.rol?this.abrirModalNuevaReserva(a):this.mostrarFormulario("editar",a)}),200)})),e.selectAll(".mesa-label").data(this.mesas).enter().append("text").attr("class","mesa-label").attr("x",(e=>e.posx)).attr("y",(e=>e.posy+5)).attr("text-anchor","middle").attr("font-size","16px").attr("font-weight","bold").attr("fill","#322209").text((e=>e.nombre)),e.append("rect").attr("x",50).attr("y",350).attr("width",100).attr("height",40).attr("fill","#724A0E").attr("stroke","#000"),e.append("text").attr("x",100).attr("y",375).attr("text-anchor","middle").attr("font-size","16px").attr("fill","#ffffff").text("Entrada"),e.append("rect").attr("x",540).attr("y",80).attr("width",2).attr("height",250).attr("fill","#ffffff").attr("stroke","#fff")},actualizarMesaCor(e){const a=this.actualizarMesas.findIndex((a=>a.idmesa===e.idmesa));-1!==a?(this.actualizarMesas[a].posx=e.x,this.actualizarMesas[a].posy=e.y):this.actualizarMesas.push({...e})},guardarCoordenadas(){if(this.actualizarMesas.length>0){const e=Rs(),a=[];this.actualizarMesas.forEach((o=>{const t={idmesa:o.idmesa,posx:o.posx,posy:o.posy};a.push(e.actualizarMesa(o.idmesa,t).then((()=>{console.log(`Mesa ${o.idmesa} actualizada correctamente.`)})).catch((e=>{console.error("Error al guardar las coordenadas de la mesa:",e)})))})),Promise.all(a).then((()=>{e.obtenerMesas(),this.actualizarMesas=[],_e().fire({icon:"success",title:"Guardado exitoso",text:"Las coordenadas de las mesas se han actualizado correctamente.",timer:2e3,showConfirmButton:!1})})).catch((e=>{console.error("Error al guardar las mesas:",e),_e().fire({icon:"error",title:"Error",text:"Ocurrió un error al guardar las mesas."})}))}},abrirModalNuevaReserva(e){this.modalNuevaReservaVisible=!0,this.mesaSeleccionada=e,console.log(`Abriendo modal de reserva para la mesa: ${e.nombre}`)},mostrarInfo(e){this.infoMesa=`Mesa: ${e.nombre}, Capacidad: ${e.capacidad}`},mostrarFormulario(e,a=null){this.modoFormulario=e,this.mesaSeleccionada=a,"editar"===e&&this.mesaSeleccionada?this.mesaForm={...this.mesaSeleccionada}:this.mesaForm={nombre:"",capacidad:1},this.mostrarModal=!0,console.log("Modal visible:",this.mostrarModal)},cerrarModal(){this.mostrarModal=!1,this.mostrarModalConfirmacion=!1},mostrarArray(){console.log("array de mesas para actualizar: ",this.actualizarMesas)},agregarMesa(){const e={nombre:this.mesaForm.nombre,capacidad:this.mesaForm.capacidad,posx:250,posy:250},a=Rs();a.crearMesa(e).then((()=>{this.cerrarModal(),this.actualizarMapa()})).catch((e=>{console.error("Error al agregar la mesa:",e)}))},actualizarMesa(){const e={nombre:this.mesaForm.nombre,capacidad:this.mesaForm.capacidad,posx:this.mesaForm.posx,posy:this.mesaForm.posy},a=Rs();a.actualizarMesa(this.mesaSeleccionada.idmesa,e).then((()=>{this.cerrarModal(),this.actualizarMapa(),a.obtenerMesas(),_e().fire({icon:"success",title:"Actualización exitosa",text:`La mesa "${e.nombre}" se ha actualizado correctamente.`,timer:2e3,showConfirmButton:!1})})).catch((e=>{console.error("Error al actualizar la mesa:",e),_e().fire({icon:"error",title:"Error",text:"Ocurrió un error al actualizar la mesa."})}))},mostrarModalBorrar(){this.mesaSeleccionada&&(this.mostrarModalConfirmacion=!0)},borrarMesaConfirmada(){this.mesaSeleccionada&&this.mesaSeleccionada.idmesa?_e().fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer. Se eliminará la mesa seleccionada.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((e=>{if(e.isConfirmed){const e=Rs();e.borrarMesa(this.mesaSeleccionada.idmesa).then((()=>{_e().fire("¡Eliminada!","La mesa ha sido eliminada con éxito.","success"),this.cerrarModal(),this.actualizarMapa(),e.obtenerMesas()})).catch((e=>{console.error("Error al borrar la mesa desde el store:",e),_e().fire("Error","Ocurrió un error al intentar eliminar la mesa.","error")}))}})):(_e().fire("No hay mesa seleccionada","Por favor, selecciona una mesa para eliminar.","info"),console.error("No hay mesa seleccionada para eliminar."))},actualizarMapa(){Os.Ltv(this.$refs.mapa).selectAll(".mesa").remove(),this.crearMapa()}}};const Oi=(0,g.A)(Fi,[["render",Pi],["__scopeId","data-v-602ee4a1"]]);var Ri=Oi;const Xi={class:"table-container"},Ii={class:"offers-table"},Di=["onClick"],Vi=["onClick"],$i={class:"form-container"},Ui={class:"form-row"},zi={class:"form-group"},ji={class:"form-group"},Ni={class:"form-row"},qi={class:"form-group"},Ti={class:"form-group"},Bi={class:"form-row"},Wi={class:"form-group"},Hi={class:"form-group"},Qi={class:"form-row"},Ji={class:"form-group"},Ki={class:"form-group custom-combo-box"},Gi={key:0,class:"combo-box-list"},Yi=["onClick"],Zi={key:0,class:"combo-box-no-results"},el={class:"form-group image-upload"},al={key:0,class:"image-preview"},ol=["src"],tl={key:1},sl=["disabled"];function rl(e,a,o,r,i,l){const n=(0,s.g2)("ConfirmationModal"),c=(0,s.g2)("ofertaEditComponent"),d=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",null,[a[30]||(a[30]=(0,s.Lk)("header",{class:"offers-header"},[(0,s.Lk)("h2",null,[(0,s.Lk)("i",{class:"fas fa-tags"}),(0,s.eW)(" Ofertas ")]),(0,s.Lk)("p",null,"Administra y crea nuevas ofertas para tus clientes")],-1)),i.modalVisible?((0,s.uX)(),(0,s.Wv)(n,{key:0,mensaje:`¿Seguro que desea eliminar la oferta ${i.ofertaAEliminar.titulo}?`,onOnCancel:l.cerrarModalConfirmation,onOnConfirm:l.eliminarOferta},null,8,["mensaje","onOnCancel","onOnConfirm"])):(0,s.Q3)("",!0),i.ModalEditar?((0,s.uX)(),(0,s.Wv)(c,{key:1,oferta:i.ofertaAEditar,onOnCancel:l.cerrarModalEditar,onOnOfertaEditada:l.actualizarListaOfertas},null,8,["oferta","onOnCancel","onOnOfertaEditada"])):(0,s.Q3)("",!0),(0,s.Lk)("div",Xi,[(0,s.Lk)("table",Ii,[a[18]||(a[18]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Id"),(0,s.Lk)("th",null,"Titulo"),(0,s.Lk)("th",null,"Requisito"),(0,s.Lk)("th",null,"Descripcion"),(0,s.Lk)("th",null,"Descuento"),(0,s.Lk)("th",null,"Fecha Inicio"),(0,s.Lk)("th",null,"Fecha Expiracion"),(0,s.Lk)("th",null,"Acciones")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.ofertas,((e,o)=>((0,s.uX)(),(0,s.CE)("tr",{key:o},[(0,s.Lk)("td",null,(0,X.v_)(e.idoferta),1),(0,s.Lk)("td",null,(0,X.v_)(e.titulo),1),(0,s.Lk)("td",null,(0,X.v_)(e.requerimiento),1),(0,s.Lk)("td",null,(0,X.v_)(e.descripcion),1),(0,s.Lk)("td",null,(0,X.v_)(e.descuento)+"%",1),(0,s.Lk)("td",null,(0,X.v_)(e.fecha_inicio),1),(0,s.Lk)("td",null,(0,X.v_)(e.fecha_fin),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"action-button edit-button",onClick:a=>l.mostrarModalEditar(e)},a[16]||(a[16]=[(0,s.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,Di),(0,s.Lk)("button",{class:"action-button delete-button",onClick:a=>l.mostrarModalEliminar(e)},a[17]||(a[17]=[(0,s.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Vi)])])))),128))])])]),(0,s.Lk)("div",$i,[a[29]||(a[29]=(0,s.Lk)("h2",null,"Agregar Oferta",-1)),(0,s.Lk)("form",{onSubmit:a[15]||(a[15]=(0,t.D$)(((...e)=>l.crearOferta&&l.crearOferta(...e)),["prevent"])),class:"modern-form"},[(0,s.Lk)("div",Ui,[(0,s.Lk)("div",zi,[a[19]||(a[19]=(0,s.Lk)("label",{for:"titulo"},[(0,s.Lk)("i",{class:"fas fa-heading"}),(0,s.eW)(" Título ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.nuevaOferta.titulo=e),id:"titulo",type:"text",placeholder:"Título de la oferta",required:""},null,512),[[t.Jo,i.nuevaOferta.titulo]])]),(0,s.Lk)("div",ji,[a[20]||(a[20]=(0,s.Lk)("label",{for:"requerimiento"},[(0,s.Lk)("i",{class:"fas fa-tasks"}),(0,s.eW)(" Requisito ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.nuevaOferta.requerimiento=e),id:"requerimiento",type:"text",placeholder:"Requisito de la oferta",required:""},null,512),[[t.Jo,i.nuevaOferta.requerimiento]])])]),(0,s.Lk)("div",Ni,[(0,s.Lk)("div",qi,[a[21]||(a[21]=(0,s.Lk)("label",{for:"descripcion"},[(0,s.Lk)("i",{class:"fas fa-file-alt"}),(0,s.eW)(" Descripción ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.nuevaOferta.descripcion=e),id:"descripcion",type:"text",placeholder:"Descripción de la oferta",required:""},null,512),[[t.Jo,i.nuevaOferta.descripcion]])]),(0,s.Lk)("div",Ti,[a[22]||(a[22]=(0,s.Lk)("label",{for:"descuento"},[(0,s.Lk)("i",{class:"fas fa-percent"}),(0,s.eW)(" Descuento ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>i.nuevaOferta.descuento=e),id:"descuento",type:"number",min:"0",max:"100",placeholder:"Descuento (%)",required:""},null,512),[[t.Jo,i.nuevaOferta.descuento]])])]),(0,s.Lk)("div",Bi,[(0,s.Lk)("div",Wi,[a[23]||(a[23]=(0,s.Lk)("label",{for:"fecha_inicio"},[(0,s.Lk)("i",{class:"fas fa-calendar-alt"}),(0,s.eW)(" Fecha de Inicio ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>i.nuevaOferta.fecha_inicio=e),id:"fecha_inicio",type:"date",required:""},null,512),[[t.Jo,i.nuevaOferta.fecha_inicio]])]),(0,s.Lk)("div",Hi,[a[24]||(a[24]=(0,s.Lk)("label",{for:"fecha_fin"},[(0,s.Lk)("i",{class:"fas fa-calendar-check"}),(0,s.eW)(" Fecha de Expiración ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>i.nuevaOferta.fecha_fin=e),id:"fecha_fin",type:"date",required:""},null,512),[[t.Jo,i.nuevaOferta.fecha_fin]])])]),(0,s.Lk)("div",Qi,[(0,s.Lk)("div",Ji,[(0,s.Lk)("div",Ki,[a[25]||(a[25]=(0,s.Lk)("label",{for:"buscarPlatillo"},[(0,s.Lk)("i",{class:"fas fa-search"}),(0,s.eW)(" Buscar Platillo ")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>i.filtroPlatillo=e),placeholder:"Buscar platillo por nombre",class:"search-box",onFocus:a[7]||(a[7]=(...e)=>l.abrirComboBox&&l.abrirComboBox(...e)),onBlur:a[8]||(a[8]=(...e)=>l.cerrarComboBox&&l.cerrarComboBox(...e)),onInput:a[9]||(a[9]=(...e)=>l.abrirComboBox&&l.abrirComboBox(...e))},null,544),[[t.Jo,i.filtroPlatillo]]),i.comboBoxAbierto?((0,s.uX)(),(0,s.CE)("ul",Gi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.platillosFiltrados,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.idplato,onClick:a=>l.seleccionarPlatillo(e.idplato,e.nombre),class:"combo-box-item"},(0,X.v_)(e.nombre),9,Yi)))),128)),0===l.platillosFiltrados.length?((0,s.uX)(),(0,s.CE)("li",Zi," No se encontraron resultados ")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",el,[a[28]||(a[28]=(0,s.Lk)("label",{for:"src"},"Imagen",-1)),(0,s.Lk)("div",{class:"upload-area",onDrop:a[12]||(a[12]=(0,t.D$)(((...e)=>l.handleFileDrop&&l.handleFileDrop(...e)),["prevent"])),onDragover:a[13]||(a[13]=(0,t.D$)((()=>{}),["prevent"]))},[i.nuevaOferta.srcPreview?((0,s.uX)(),(0,s.CE)("div",al,[(0,s.Lk)("img",{src:i.nuevaOferta.srcPreview,alt:"Previsualización de imagen"},null,8,ol),(0,s.Lk)("button",{type:"button",class:"remove-image",onClick:a[10]||(a[10]=(...e)=>l.removeImage&&l.removeImage(...e))},"✖")])):((0,s.uX)(),(0,s.CE)("div",tl,[a[26]||(a[26]=(0,s.Lk)("i",{class:"fas fa-image"},null,-1)),a[27]||(a[27]=(0,s.Lk)("p",null,[(0,s.eW)("Arrastra y suelta una imagen aquí o "),(0,s.Lk)("span",null,"haz clic para seleccionar")],-1)),(0,s.Lk)("input",{type:"file",id:"src",name:"imagen",onChange:a[11]||(a[11]=(...e)=>l.handleFileChange&&l.handleFileChange(...e)),accept:"image/jpeg, image/png"},null,32)]))],32)])]),(0,s.Lk)("button",{type:"submit",class:"submit-button",disabled:i.isSubmitting,onClick:a[14]||(a[14]=e=>l.crearOferta())},(0,X.v_)(i.isSubmitting?"Creando oferta...":"Crear Oferta"),9,sl)],32)]),i.mostrarModalExito?((0,s.uX)(),(0,s.Wv)(d,{key:2,mensaje:i.mensajeModal,onOnClose:l.cerrarModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)])}const il={class:"modal-overlay"},ll={class:"modal-content"},nl={class:"form-container"},cl={class:"form-row"},dl={class:"form-group"},ul={class:"form-group"},pl={class:"form-row"},ml={class:"form-group"},hl={class:"form-group"},fl={class:"form-row"},vl={class:"form-group"},bl={class:"form-group"},gl={class:"form-row"},kl={class:"form-group"},Cl={class:"form-group custom-combo-box"},Ll={key:0,class:"combo-box-list"},yl=["onClick"],El={key:0,class:"combo-box-no-results"},Ml={class:"form-group image-upload"},wl={key:0,class:"image-preview"},Sl=["src"],Al={key:1},_l={class:"btns-container"};function xl(e,a,o,r,i,l){const n=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",il,[(0,s.Lk)("div",ll,[(0,s.Lk)("div",nl,[a[27]||(a[27]=(0,s.Lk)("h2",null,"Editar Oferta",-1)),(0,s.Lk)("form",{onSubmit:a[15]||(a[15]=(0,t.D$)(((...e)=>l.editarOferta&&l.editarOferta(...e)),["prevent"])),class:"modern-form"},[(0,s.Lk)("div",cl,[(0,s.Lk)("div",dl,[a[16]||(a[16]=(0,s.Lk)("label",{for:"titulo"},[(0,s.Lk)("i",{class:"fas fa-heading"}),(0,s.eW)(" Título ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.nuevaOferta.titulo=e),id:"titulo",type:"text",placeholder:"Título de la oferta",required:""},null,512),[[t.Jo,i.nuevaOferta.titulo]])]),(0,s.Lk)("div",ul,[a[17]||(a[17]=(0,s.Lk)("label",{for:"requerimiento"},[(0,s.Lk)("i",{class:"fas fa-tasks"}),(0,s.eW)(" Requisito ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.nuevaOferta.requerimiento=e),id:"requerimiento",type:"text",placeholder:"Requisito de la oferta",required:""},null,512),[[t.Jo,i.nuevaOferta.requerimiento]])])]),(0,s.Lk)("div",pl,[(0,s.Lk)("div",ml,[a[18]||(a[18]=(0,s.Lk)("label",{for:"descripcion"},[(0,s.Lk)("i",{class:"fas fa-file-alt"}),(0,s.eW)(" Descripción ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.nuevaOferta.descripcion=e),id:"descripcion",type:"text",placeholder:"Descripción de la oferta",required:""},null,512),[[t.Jo,i.nuevaOferta.descripcion]])]),(0,s.Lk)("div",hl,[a[19]||(a[19]=(0,s.Lk)("label",{for:"descuento"},[(0,s.Lk)("i",{class:"fas fa-percent"}),(0,s.eW)(" Descuento ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>i.nuevaOferta.descuento=e),id:"descuento",type:"number",min:"0",max:"100",placeholder:"Descuento (%)",required:""},null,512),[[t.Jo,i.nuevaOferta.descuento]])])]),(0,s.Lk)("div",fl,[(0,s.Lk)("div",vl,[a[20]||(a[20]=(0,s.Lk)("label",{for:"fecha_inicio"},[(0,s.Lk)("i",{class:"fas fa-calendar-alt"}),(0,s.eW)(" Fecha de Inicio ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>i.nuevaOferta.fecha_inicio=e),id:"fecha_inicio",type:"date",required:""},null,512),[[t.Jo,i.nuevaOferta.fecha_inicio]])]),(0,s.Lk)("div",bl,[a[21]||(a[21]=(0,s.Lk)("label",{for:"fecha_fin"},[(0,s.Lk)("i",{class:"fas fa-calendar-check"}),(0,s.eW)(" Fecha de Expiración ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>i.nuevaOferta.fecha_fin=e),id:"fecha_fin",type:"date",required:""},null,512),[[t.Jo,i.nuevaOferta.fecha_fin]])])]),(0,s.Lk)("div",gl,[(0,s.Lk)("div",kl,[(0,s.Lk)("div",Cl,[a[22]||(a[22]=(0,s.Lk)("label",{for:"buscarPlatillo"},[(0,s.Lk)("i",{class:"fas fa-search"}),(0,s.eW)(" Buscar Platillo ")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>i.filtroPlatillo=e),placeholder:"Buscar platillo por nombre",class:"search-box",onFocus:a[7]||(a[7]=(...e)=>l.abrirComboBox&&l.abrirComboBox(...e)),onBlur:a[8]||(a[8]=(...e)=>l.cerrarComboBox&&l.cerrarComboBox(...e)),onInput:a[9]||(a[9]=(...e)=>l.abrirComboBox&&l.abrirComboBox(...e))},null,544),[[t.Jo,i.filtroPlatillo]]),i.comboBoxAbierto?((0,s.uX)(),(0,s.CE)("ul",Ll,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.platillosFiltrados,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.idplato,onClick:a=>l.seleccionarPlatillo(e.idplato,e.nombre),class:"combo-box-item"},(0,X.v_)(e.nombre),9,yl)))),128)),0===l.platillosFiltrados.length?((0,s.uX)(),(0,s.CE)("li",El," No se encontraron resultados ")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Ml,[a[25]||(a[25]=(0,s.Lk)("label",{for:"src"},"Imagen",-1)),(0,s.Lk)("div",{class:"upload-area",onDrop:a[12]||(a[12]=(0,t.D$)(((...e)=>l.handleFileDrop&&l.handleFileDrop(...e)),["prevent"])),onDragover:a[13]||(a[13]=(0,t.D$)((()=>{}),["prevent"]))},[i.nuevaOferta.srcPreview?((0,s.uX)(),(0,s.CE)("div",wl,[(0,s.Lk)("img",{src:i.nuevaOferta.srcPreview,alt:"Previsualización de imagen"},null,8,Sl),(0,s.Lk)("button",{type:"button",class:"remove-image",onClick:a[10]||(a[10]=(...e)=>l.removeImage&&l.removeImage(...e))},"✖")])):((0,s.uX)(),(0,s.CE)("div",Al,[a[23]||(a[23]=(0,s.Lk)("i",{class:"fas fa-image"},null,-1)),a[24]||(a[24]=(0,s.Lk)("p",null,[(0,s.eW)("Arrastra y suelta una imagen aquí o "),(0,s.Lk)("span",null,"haz clic para seleccionar")],-1)),(0,s.Lk)("input",{type:"file",id:"src",name:"imagen",onChange:a[11]||(a[11]=(...e)=>l.handleFileChange&&l.handleFileChange(...e)),accept:"image/jpeg, image/png"},null,32)]))],32)])]),(0,s.Lk)("div",_l,[a[26]||(a[26]=(0,s.Lk)("button",{type:"submit",class:"submit-button"},"Confirmar Edicion",-1)),(0,s.Lk)("button",{type:"button",onClick:a[14]||(a[14]=(...e)=>l.onCancel&&l.onCancel(...e)),class:"cancel-button"},"Cancelar Edicion")])],32)])])]),e.successModalVisible?((0,s.uX)(),(0,s.Wv)(n,{key:0,mensaje:e.successMensaje,onOnClose:e.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)],64)}var Pl={name:"ofertaEditComponent",components:{SuccessModal:ja},emits:["onCancel"],props:{oferta:{type:Object,required:!0}},watch:{oferta:{immediate:!0,handler(e){if(e){this.nuevaOferta={titulo:e.titulo||"",requerimiento:e.requerimiento||"",descripcion:e.descripcion||"",fecha_inicio:e.fecha_inicio||"",fecha_fin:e.fecha_fin||"",descuento:e.descuento||0,idPlato:e.idPlato||null,src:null,srcPreview:e.src?`http://localhost:5000/${e.src}`:null};const a=this.platillos.find((a=>a.idplato===e.idPlato));a&&(this.filtroPlatillo=a.nombre)}}}},data(){return{mostrarModalExito:!1,mensajeModal:"Oferta creada con exito!",ofertas:[],nuevaOferta:{titulo:"",requerimiento:"",descripcion:"",fecha_inicio:"",fecha_fin:"",descuento:0,idPlato:null,src:null,srcPreview:null},platillos:[],filtroPlatillo:"",comboBoxAbierto:!1}},mounted(){this.obtenerPlatillos()},computed:{platillosFiltrados(){return this.platillos.filter((e=>e.nombre.toLowerCase().includes(this.filtroPlatillo.toLowerCase())))}},methods:{onCancel(){this.$emit("onCancel")},async obtenerPlatillos(){try{const e=await Se.A.get("http://localhost:5000/api/platillos");if(this.platillos=e.data,this.nuevaOferta.idplato){const e=this.platillos.find((e=>e.idplato===this.nuevaOferta.idPlato));e&&(this.filtroPlatillo=e.nombre)}}catch(e){console.error("Error al obtener los platillos:",e)}},abrirComboBox(){this.comboBoxAbierto=!0},cerrarComboBox(){setTimeout((()=>{this.comboBoxAbierto=!1}),200)},seleccionarPlatillo(e,a){this.nuevaOferta.idPlato=e,this.filtroPlatillo=a,this.comboBoxAbierto=!1},mostrarSuccessModal(e){this.mensajeModal=e,this.mostrarModalExito=!0},cerrarModal(){this.mostrarModalExito=!1},async editarOferta(){try{if(!this.nuevaOferta.titulo||!this.nuevaOferta.requerimiento||!this.nuevaOferta.descripcion||!this.nuevaOferta.fecha_inicio||!this.nuevaOferta.fecha_fin||!this.nuevaOferta.descuento||!this.nuevaOferta.idPlato)return void alert("Por favor, completa todos los campos antes de enviar.");const e=new FormData;for(let a in this.nuevaOferta)"src"===a&&this.nuevaOferta.src?e.append("imagen",this.nuevaOferta.src):"srcPreview"!==a&&e.append(a,this.nuevaOferta[a]);for(let a of e.entries())console.log(a[0],a[1]);await Se.A.put(`http://localhost:5000/api/ofertas/${this.oferta.idoferta}`,e,{headers:{"Content-Type":"multipart/form-data"}}),this.$emit("onOfertaEditada"),this.mostrarSuccessModal("Oferta editada correctamente."),this.onCancel()}catch(e){console.error("Error al editar la oferta:",e),alert("Ocurrió un error al editar la oferta. Por favor, inténtalo de nuevo.")}},handleFileChange(e){const a=e.target.files[0];a&&("image/jpeg"===a.type||"image/png"===a.type?(this.nuevaOferta.src=a,this.nuevaOferta.srcPreview=URL.createObjectURL(a),console.log("Imagen cargada: ",this.nuevaOferta.srcPreview)):alert("Solo se permiten archivos JPEG y PNG."))},handleFileDrop(e){const a=e.dataTransfer.files[0];a&&("image/jpeg"===a.type||"image/png"===a.type?(this.nuevaOferta.src=a,this.nuevaOferta.srcPreview=URL.createObjectURL(a),console.log("Imagen cargada (drag & drop): ",this.nuevaOferta.srcPreview)):alert("Solo se permiten archivos JPEG y PNG."))},removeImage(){this.nuevaOferta.src=null,this.nuevaOferta.srcPreview=null}}};const Fl=(0,g.A)(Pl,[["render",xl]]);var Ol=Fl,Rl={name:"OfertasAdminComponent",components:{SuccessModal:ja,ConfirmationModal:ds,ofertaEditComponent:Ol},data(){return{mostrarModalExito:!1,ModalEditar:!1,mensajeModal:"Oferta creada con exito!",modalVisible:!1,ofertas:[],ofertaAEliminar:{},ofertaAEditar:{},nuevaOferta:{titulo:"",requerimiento:"",descripcion:"",fecha_inicio:"",fecha_fin:"",descuento:0,idPlato:null,src:null,srcPreview:null},platillos:[],filtroPlatillo:"",comboBoxAbierto:!1,isSubmitting:!1}},mounted(){this.obtenerPlatillos(),this.obtenerOfertas()},computed:{platillosFiltrados(){return this.platillos.filter((e=>e.nombre.toLowerCase().includes(this.filtroPlatillo.toLowerCase())))}},methods:{async obtenerPlatillos(){try{const e=await Se.A.get("http://localhost:5000/api/platillos");this.platillos=e.data}catch(e){console.error("Error al obtener los platillos:",e)}},abrirComboBox(){this.comboBoxAbierto=!0},cerrarComboBox(){setTimeout((()=>{this.comboBoxAbierto=!1}),200)},seleccionarPlatillo(e,a){this.nuevaOferta.idPlato=e,this.filtroPlatillo=a,this.comboBoxAbierto=!1},mostrarModalEditar(e){console.log("DATOS QUE SE ENVIAN: ",e),this.ModalEditar=!0,this.ofertaAEditar=e},async actualizarListaOfertas(){await this.obtenerOfertas(),this.mostrarSuccessModal("Oferta editada correctamente."),this.mostrarModalEditar=!1},cerrarModalEditar(){this.ModalEditar=!1},mostrarSuccessModal(e){this.mensajeModal=e,this.mostrarModalExito=!0},mostrarModalEliminar(e){this.modalVisible=!0,this.ofertaAEliminar=e},cerrarModalConfirmation(){this.modalVisible=!1},async eliminarOferta(){try{await Se.A.delete(`http://localhost:5000/api/ofertas/${this.ofertaAEliminar.idoferta}`),this.ofertas=this.ofertas.filter((e=>e.idoferta!==this.ofertaAEliminar.idoferta)),this.cerrarModalConfirmation(),this.mostrarSuccessModal("Oferta eliminada correctamente.")}catch(e){console.error("Error al eliminar la oferta:",e),this.mostrarSuccessModal("Error al eliminar la oferta")}},async obtenerOfertas(){try{const e=await Se.A.get("http://localhost:5000/api/ofertas"),a=e.data;this.ofertas=Array.isArray(a)?a:[a]}catch(e){console.error("Error al obtener las ofertas:",e),e.response?console.error("Error en la respuesta:",e.response):e.request?console.error("No se recibió respuesta del servidor:",e.request):console.error("Error al configurar la solicitud:",e.message)}},async crearOferta(){if(console.log("PRIMERO"),!this.isSubmitting){this.isSubmitting=!0,console.log("ESTADO: ",this.isSubmitting);try{if(!this.nuevaOferta.titulo||!this.nuevaOferta.requerimiento||!this.nuevaOferta.descripcion||!this.nuevaOferta.fecha_inicio||!this.nuevaOferta.fecha_fin||!this.nuevaOferta.descuento||!this.nuevaOferta.idPlato||!this.nuevaOferta.src)return void alert("Por favor, completa todos los campos antes de enviar.");const e=new FormData;for(let o in this.nuevaOferta)"src"===o?e.append("imagen",this.nuevaOferta.src):"srcPreview"!==o&&e.append(o,this.nuevaOferta[o]);this.nuevaOferta={titulo:"",requerimiento:"",descripcion:"",fecha_inicio:"",fecha_fin:"",descuento:0,idPlato:null,src:null,srcPreview:null},this.obtenerOfertas();const a=await Se.A.post("http://localhost:5000/api/ofertas",e,{headers:{"Content-Type":"multipart/form-data"}});201===a.status&&(this.mostrarSuccessModal("Oferta creada con éxito. Correos enviados."),this.obtenerOfertas())}catch(e){console.error("Error al crear la oferta:",e),alert("Ocurrió un error al crear la oferta. Por favor, inténtalo de nuevo.")}finally{this.isSubmitting=!1}}},cerrarModal(){this.mostrarModalExito=!1},handleFileChange(e){const a=e.target.files[0];a&&("image/jpeg"===a.type||"image/png"===a.type?(this.nuevaOferta.src=a,this.nuevaOferta.srcPreview=URL.createObjectURL(a),console.log("Imagen cargada: ",this.nuevaOferta.srcPreview)):alert("Solo se permiten archivos JPEG y PNG."))},handleFileDrop(e){const a=e.dataTransfer.files[0];a&&("image/jpeg"===a.type||"image/png"===a.type?(this.nuevaOferta.src=a,this.nuevaOferta.srcPreview=URL.createObjectURL(a),console.log("Imagen cargada (drag & drop): ",this.nuevaOferta.srcPreview)):alert("Solo se permiten archivos JPEG y PNG."))},removeImage(){this.nuevaOferta.src=null,this.nuevaOferta.srcPreview=null}}};const Xl=(0,g.A)(Rl,[["render",rl],["__scopeId","data-v-aa08c2d8"]]);var Il=Xl;const Dl={class:"table-container"},Vl={class:"table"},$l={key:0},Ul={key:1},zl={key:2},jl={key:3},Nl={key:4},ql={key:5},Tl={key:6},Bl={key:7},Wl={class:"botones"},Hl=["onClick"],Ql=["onClick"],Jl=["onClick"];function Kl(e,a,o,r,i,l){const n=(0,s.g2)("HeaderAdminTitle"),c=(0,s.g2)("ConfirmationModal"),d=(0,s.g2)("FormNewPlatillo"),u=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n,{icon:"fa fa-cutlery",title:"Platillos",subtitle:"Visualiza los platillos que ofrese tu restaurante"}),i.modalVisible?((0,s.uX)(),(0,s.Wv)(c,{key:0,mensaje:`¿Seguro que desea eliminar el platillo ${i.platilloAEliminar.nombre}?`,onOnCancel:l.cerrarModal,onOnConfirm:l.eliminarPlatillo},null,8,["mensaje","onOnCancel","onOnConfirm"])):(0,s.Q3)("",!0),i.modalParaDestacarVisible?((0,s.uX)(),(0,s.Wv)(c,{key:1,mensaje:i.modalMensaje,onOnCancel:l.cerrarModalDestacar,onOnConfirm:l.toggleDestacadoConfirmado},null,8,["mensaje","onOnCancel","onOnConfirm"])):(0,s.Q3)("",!0),(0,s.Lk)("div",Dl,[(0,s.Lk)("table",Vl,[a[10]||(a[10]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Id"),(0,s.Lk)("th",null,"Nombre"),(0,s.Lk)("th",null,"Descripción"),(0,s.Lk)("th",null,"Precio"),(0,s.Lk)("th",null,"Categoría"),(0,s.Lk)("th",null,"Acciones")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.platillos,((e,o)=>((0,s.uX)(),(0,s.CE)("tr",{key:o},[(0,s.Lk)("td",null,(0,X.v_)(e.idplato),1),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",$l,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.platilloEditado.nombre=e)},null,512),[[t.Jo,i.platilloEditado.nombre]])])):((0,s.uX)(),(0,s.CE)("td",Ul,(0,X.v_)(e.nombre),1)),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",zl,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.platilloEditado.descripcion=e)},null,512),[[t.Jo,i.platilloEditado.descripcion]])])):((0,s.uX)(),(0,s.CE)("td",jl,(0,X.v_)(e.descripcion),1)),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",Nl,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":a[2]||(a[2]=e=>i.platilloEditado.precio=e)},null,512),[[t.Jo,i.platilloEditado.precio]])])):((0,s.uX)(),(0,s.CE)("td",ql,(0,X.v_)(e.precio)+" Bs.",1)),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",Tl,[(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":a[3]||(a[3]=e=>i.platilloEditado.idcategoria=e)},null,512),[[t.Jo,i.platilloEditado.idcategoria]])])):((0,s.uX)(),(0,s.CE)("td",Bl,(0,X.v_)(e.idcategoria),1)),(0,s.Lk)("td",Wl,[o!==i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"action-button edit-button",onClick:a=>l.seleccionarPlatilloParaEditar(o,e)},a[6]||(a[6]=[(0,s.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,Hl)):(0,s.Q3)("",!0),o!==i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"action-button delete-button",onClick:a=>l.mostrarModalEliminar(e)},a[7]||(a[7]=[(0,s.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,Ql)):(0,s.Q3)("",!0),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("button",{key:2,class:"action-button button-save",onClick:a[4]||(a[4]=(...e)=>l.guardarCambios&&l.guardarCambios(...e))},a[8]||(a[8]=[(0,s.Lk)("i",{class:"fa-solid fa-floppy-disk"},null,-1)]))):(0,s.Q3)("",!0),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("button",{key:3,class:"action-button button-cancel",onClick:a[5]||(a[5]=(...e)=>l.cancelarCambios&&l.cancelarCambios(...e))},a[9]||(a[9]=[(0,s.Lk)("i",{class:"fa-solid fa-xmark"},null,-1)]))):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:a=>l.mostrarModalDestacar(e),class:"action-button star-button"},[(0,s.Lk)("i",{class:(0,X.C4)(2===e.estado?"fas fa-star":"far fa-star")},null,2)],8,Jl)])])))),128))])]),(0,s.bF)(d)]),i.successModalVisible?((0,s.uX)(),(0,s.Wv)(u,{key:2,mensaje:i.successMensaje,onOnClose:l.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)])}const Gl={class:"form-container"},Yl={class:"form-row"},Zl={class:"form-group"},en={class:"form-group"},an={class:"form-row"},on={class:"form-group"},tn={class:"form-group custom-combo-box"},sn={key:0,class:"combo-box-list"},rn=["onClick"],ln={key:0,class:"combo-box-no-results"},nn={class:"form-group image-upload"},cn={key:0,class:"image-preview"},dn=["src"],un={key:1};function pn(e,a,o,r,i,l){const n=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",Gl,[a[20]||(a[20]=(0,s.Lk)("h2",null,"Agregar Platillo",-1)),(0,s.Lk)("form",{onSubmit:a[11]||(a[11]=(0,t.D$)(((...e)=>l.crearPlatillo&&l.crearPlatillo(...e)),["prevent"])),class:"modern-form"},[(0,s.Lk)("div",Yl,[(0,s.Lk)("div",Zl,[a[12]||(a[12]=(0,s.Lk)("label",{for:"nombre"},[(0,s.Lk)("i",{class:"fas fa-utensils"}),(0,s.eW)(" Nombre ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.nuevoPlatillo.nombre=e),id:"nombre",type:"text",placeholder:"Nombre del platillo",required:""},null,512),[[t.Jo,i.nuevoPlatillo.nombre]])]),(0,s.Lk)("div",en,[a[13]||(a[13]=(0,s.Lk)("label",{for:"precio"},[(0,s.Lk)("i",{class:"fas fa-dollar-sign"}),(0,s.eW)(" Precio (Bs) ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.nuevoPlatillo.precio=e),id:"precio",type:"number",min:"1",placeholder:"Precio",required:""},null,512),[[t.Jo,i.nuevoPlatillo.precio]])])]),(0,s.Lk)("div",an,[(0,s.Lk)("div",on,[a[14]||(a[14]=(0,s.Lk)("label",{for:"descripcion"},[(0,s.Lk)("i",{class:"fas fa-file-alt"}),(0,s.eW)(" Descripción ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.nuevoPlatillo.descripcion=e),id:"descripcion",type:"text",placeholder:"Descripción del platillo",required:""},null,512),[[t.Jo,i.nuevoPlatillo.descripcion]])]),(0,s.Lk)("div",tn,[a[15]||(a[15]=(0,s.Lk)("label",{for:"buscarCategoria"},[(0,s.Lk)("i",{class:"fas fa-list"}),(0,s.eW)(" Categoría ")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>i.filtroCategoria=e),placeholder:"Buscar categoría",class:"search-box",onFocus:a[4]||(a[4]=(...e)=>l.abrirComboBox&&l.abrirComboBox(...e)),onBlur:a[5]||(a[5]=(...e)=>l.cerrarComboBox&&l.cerrarComboBox(...e)),onInput:a[6]||(a[6]=(...e)=>l.abrirComboBox&&l.abrirComboBox(...e))},null,544),[[t.Jo,i.filtroCategoria]]),i.comboBoxAbierto?((0,s.uX)(),(0,s.CE)("ul",sn,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.categoriasFiltradas,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.idcategoria,onClick:a=>l.seleccionarCategoria(e.idcategoria,e.tipo),class:"combo-box-item"},(0,X.v_)(e.tipo),9,rn)))),128)),0===l.categoriasFiltradas.length?((0,s.uX)(),(0,s.CE)("li",ln," No se encontraron resultados ")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",nn,[a[18]||(a[18]=(0,s.Lk)("label",{for:"imagen"},"Imagen",-1)),(0,s.Lk)("div",{class:"upload-area",onDrop:a[9]||(a[9]=(0,t.D$)(((...a)=>e.handleFileDrop&&e.handleFileDrop(...a)),["prevent"])),onDragover:a[10]||(a[10]=(0,t.D$)((()=>{}),["prevent"]))},[i.nuevoPlatillo.srcPreview?((0,s.uX)(),(0,s.CE)("div",cn,[(0,s.Lk)("img",{src:i.nuevoPlatillo.srcPreview,alt:"Previsualización de imagen"},null,8,dn),(0,s.Lk)("button",{type:"button",class:"remove-image",onClick:a[7]||(a[7]=(...e)=>l.removeImage&&l.removeImage(...e))},"✖")])):((0,s.uX)(),(0,s.CE)("div",un,[a[16]||(a[16]=(0,s.Lk)("i",{class:"fas fa-image"},null,-1)),a[17]||(a[17]=(0,s.Lk)("p",null,[(0,s.eW)("Arrastra y suelta una imagen aquí o "),(0,s.Lk)("span",null,"haz clic para seleccionar")],-1)),(0,s.Lk)("input",{type:"file",id:"imagen",onChange:a[8]||(a[8]=(...e)=>l.handleFileChange&&l.handleFileChange(...e)),accept:"image/jpeg, image/png"},null,32)]))],32)]),a[19]||(a[19]=(0,s.Lk)("button",{type:"submit",class:"submit-button"},"Crear Platillo",-1))],32)]),i.successModalVisible?((0,s.uX)(),(0,s.Wv)(n,{key:0,mensaje:i.successMensaje,onOnClose:l.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)],64)}var mn={name:"FormNewPlatillo",components:{SuccessModal:ja},data(){return{nuevoPlatillo:{nombre:"",descripcion:"",precio:"",idCategoria:null,src:null,srcPreview:null},categorias:[],filtroCategoria:"",comboBoxAbierto:!1,successModalVisible:!1,successMensaje:""}},mounted(){this.obtenerCategorias()},computed:{categoriasFiltradas(){return this.categorias.filter((e=>e.tipo.toLowerCase().includes(this.filtroCategoria.toLowerCase())))}},methods:{async obtenerCategorias(){try{const e=await Se.A.get("http://localhost:5000/api/categorias");this.categorias=e.data}catch(e){console.error("Error al obtener las categorías:",e)}},abrirComboBox(){this.comboBoxAbierto=!0},cerrarComboBox(){setTimeout((()=>{this.comboBoxAbierto=!1}),200)},seleccionarCategoria(e,a){this.nuevoPlatillo.idCategoria=e,this.filtroCategoria=a,this.comboBoxAbierto=!1},async crearPlatillo(){if(!this.nuevoPlatillo.nombre||!this.nuevoPlatillo.precio||!this.nuevoPlatillo.descripcion||!this.nuevoPlatillo.idCategoria||!this.nuevoPlatillo.src)return void alert("Completa todos los campos.");const e=new FormData;for(let o in this.nuevoPlatillo)"src"===o?e.append("imagen",this.nuevoPlatillo.src):e.append(o,this.nuevoPlatillo[o]);try{await Se.A.post("http://localhost:5000/api/platillos",e,{headers:{"Content-Type":"multipart/form-data"}}),this.mostrarSuccessModal("Platillo creado correctamente"),this.resetForm()}catch(a){console.error("Error al crear el platillo:",a),alert("Error al crear el platillo")}},handleFileChange(e){const a=e.target.files[0];!a||"image/jpeg"!==a.type&&"image/png"!==a.type?alert("Solo se permiten archivos JPEG y PNG."):(this.nuevoPlatillo.src=a,this.nuevoPlatillo.srcPreview=URL.createObjectURL(a))},removeImage(){this.nuevoPlatillo.src=null,this.nuevoPlatillo.srcPreview=null},resetForm(){this.nuevoPlatillo={nombre:"",descripcion:"",precio:"",idCategoria:null,src:null,srcPreview:null}},mostrarSuccessModal(e){this.successMensaje=e,this.successModalVisible=!0},closeSuccessModal(){this.successModalVisible=!1}}};const hn=(0,g.A)(mn,[["render",pn]]);var fn=hn,vn={name:"PlatillosAdminComponent",components:{ConfirmationModal:ds,FormNewPlatillo:fn,SuccessModal:ja,HeaderAdminTitle:Ja},data(){return{platillos:[],filaEnEdicion:null,platilloEditado:{},platilloAEliminar:{},platilloADestacar:{},modalVisible:!1,modalParaDestacarVisible:!1,successModalVisible:!1,modalMensaje:"",successMensaje:""}},mounted(){this.obtenerPlatillos()},methods:{async obtenerPlatillos(){try{const e=await Se.A.get("http://localhost:5000/api/platillos");this.platillos=e.data.map((e=>({...e,estado:e.estado||0})))}catch(e){console.error("Error al obtener los platillos:",e)}},seleccionarPlatilloParaEditar(e,a){this.filaEnEdicion=e,this.platilloEditado={...a}},async guardarCambios(){try{const e={nombre:this.platilloEditado.nombre,descripcion:this.platilloEditado.descripcion,precio:this.platilloEditado.precio,idCategoria:this.platilloEditado.idcategoria,imagen:this.platilloEditado.imagen||null};await Se.A.put(`http://localhost:5000/api/platillos/${this.platilloEditado.idplato}`,e),this.platillos.splice(this.filaEnEdicion,1,{...this.platilloEditado}),this.filaEnEdicion=null,this.mostrarSuccessModal("Platillo actualizado correctamente")}catch(e){console.error("Error al guardar cambios:",e),this.mostrarSuccessModal("Error al actualizar el platillo")}},cancelarCambios(){this.filaEnEdicion=null,this.platilloEditado={}},mostrarModalEliminar(e){this.platilloAEliminar=e,this.modalVisible=!0},cerrarModal(){this.modalVisible=!1},async eliminarPlatillo(){try{await Se.A.put(`http://localhost:5000/api/platillos/desactivar/${this.platilloAEliminar.idplato}`),this.platillos=this.platillos.filter((e=>e.idplato!==this.platilloAEliminar.idplato)),this.cerrarModal(),this.mostrarSuccessModal("Platillo eliminado correctamente")}catch(e){console.error("Error al eliminar el platillo:",e),this.mostrarSuccessModal("Error al eliminar el platillo")}},mostrarModalDestacar(e){this.platilloADestacar=e,this.modalMensaje=`¿Quieres ${2===e.estado?"quitar el destaque":"destacar"} el platillo "${e.nombre}"?`,this.modalParaDestacarVisible=!0},cerrarModalDestacar(){this.modalParaDestacarVisible=!1},async toggleDestacadoConfirmado(){try{const e=await Se.A.put(`http://localhost:5000/api/platillos/toggle-destacado/${this.platilloADestacar.idplato}`);if(e.data&&"number"===typeof e.data.nuevoEstado){const a=this.platillos.findIndex((e=>e.idplato===this.platilloADestacar.idplato));-1!==a&&(this.platillos[a].estado=e.data.nuevoEstado,this.$forceUpdate(),this.mostrarSuccessModal(`El platillo "${this.platilloADestacar.nombre}" ahora está ${2===e.data.nuevoEstado?"destacado":"no destacado"}.`))}else this.mostrarSuccessModal("Error en la respuesta del servidor.")}catch(e){console.error("Error al cambiar el estado del platillo:",e),this.mostrarSuccessModal("Error al cambiar el estado del platillo.")}finally{this.cerrarModalDestacar()}},mostrarSuccessModal(e){this.successMensaje=e,this.successModalVisible=!0},closeSuccessModal(){this.successModalVisible=!1}}};const bn=(0,g.A)(vn,[["render",Kl],["__scopeId","data-v-ec392e52"]]);var gn=bn;const kn={class:"search-container"},Cn={class:"search-box"},Ln={class:"table-container"},yn={class:"offers-table"},En=["onUpdate:modelValue"],Mn=["value"],wn={key:1},Sn=["onClick"];function An(e,a,o,r,i,l){const n=(0,s.g2)("FromNewUser");return(0,s.uX)(),(0,s.CE)("div",null,[a[3]||(a[3]=(0,s.Lk)("header",{class:"offers-header"},[(0,s.Lk)("h2",null,[(0,s.Lk)("i",{class:"fas fa-tags"}),(0,s.eW)(" Usuarios ")]),(0,s.Lk)("p",null,"Administra y cambia el rol de tus usuarios")],-1)),(0,s.Lk)("div",kn,[(0,s.Lk)("div",Cn,[a[1]||(a[1]=(0,s.Lk)("i",{class:"fas fa-search search-icon"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>i.searchQuery=e),placeholder:"Buscar por nombre o apellidos...",class:"search-input"},null,512),[[t.Jo,i.searchQuery]])])]),(0,s.Lk)("div",Ln,[(0,s.Lk)("table",yn,[a[2]||(a[2]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Id"),(0,s.Lk)("th",null,"Nombre"),(0,s.Lk)("th",null,"Apellidos"),(0,s.Lk)("th",null,"Correo"),(0,s.Lk)("th",null,"Rol"),(0,s.Lk)("th",null,"Acción")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.filteredUsuarios,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.idusuario},[(0,s.Lk)("td",null,(0,X.v_)(e.idusuario),1),(0,s.Lk)("td",null,(0,X.v_)(e.nombre),1),(0,s.Lk)("td",null,(0,X.v_)(e.apellidos),1),(0,s.Lk)("td",null,(0,X.v_)(e.correo),1),(0,s.Lk)("td",null,[e.isEditing?(0,s.bo)(((0,s.uX)(),(0,s.CE)("select",{key:0,"onUpdate:modelValue":a=>e.selectedRolIndex=a},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.roles,((e,a)=>((0,s.uX)(),(0,s.CE)("option",{key:e.idrol,value:a},(0,X.v_)(e.rol),9,Mn)))),128))],8,En)),[[t.u1,e.selectedRolIndex]]):((0,s.uX)(),(0,s.CE)("span",wn,(0,X.v_)(l.obtenerNombreRol(e.idrol)),1))]),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"action-button edit-button",onClick:a=>l.toggleEdit(e)},[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.isEditing?"fa-check":"fa-edit"])},null,2)],8,Sn)])])))),128))])])]),(0,s.bF)(n,{onUsuarioCreado:l.onUsuarioCreado},null,8,["onUsuarioCreado"])])}o(1148);const _n={class:"form-container"},xn={class:"form-group"},Pn={class:"form-group"},Fn={class:"form-group"},On={class:"form-group"},Rn={class:"password-wrapper"},Xn=["type"],In={class:"form-group"},Dn=["value"];function Vn(e,a,o,r,i,l){const n=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",_n,[a[13]||(a[13]=(0,s.Lk)("h2",null,"Agregar Usuario",-1)),(0,s.Lk)("form",{onSubmit:a[6]||(a[6]=(0,t.D$)(((...e)=>l.crearUsuario&&l.crearUsuario(...e)),["prevent"])),class:"modern-form"},[(0,s.Lk)("div",xn,[a[7]||(a[7]=(0,s.Lk)("label",{for:"nombre"},[(0,s.Lk)("i",{class:"fas fa-user"}),(0,s.eW)(" Nombre ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.nuevoUsuario.nombre=e),id:"nombre",type:"text",placeholder:"Nombre",required:""},null,512),[[t.Jo,i.nuevoUsuario.nombre]])]),(0,s.Lk)("div",Pn,[a[8]||(a[8]=(0,s.Lk)("label",{for:"apellidos"},[(0,s.Lk)("i",{class:"fas fa-user-friends"}),(0,s.eW)(" Apellidos ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.nuevoUsuario.apellidos=e),id:"apellidos",type:"text",placeholder:"Apellidos",required:""},null,512),[[t.Jo,i.nuevoUsuario.apellidos]])]),(0,s.Lk)("div",Fn,[a[9]||(a[9]=(0,s.Lk)("label",{for:"correo"},[(0,s.Lk)("i",{class:"fas fa-envelope"}),(0,s.eW)(" Id Usuario ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>i.nuevoUsuario.correo=e),id:"correo",type:"email",placeholder:"Correo electrónico",required:""},null,512),[[t.Jo,i.nuevoUsuario.correo]])]),(0,s.Lk)("div",On,[a[10]||(a[10]=(0,s.Lk)("label",{for:"password"},[(0,s.Lk)("i",{class:"fas fa-lock"}),(0,s.eW)(" Contraseña ")],-1)),(0,s.Lk)("div",Rn,[(0,s.bo)((0,s.Lk)("input",{type:i.mostrarPassword?"text":"password","onUpdate:modelValue":a[3]||(a[3]=e=>i.nuevoUsuario.password=e),id:"password",placeholder:"Contraseña",required:""},null,8,Xn),[[t.hp,i.nuevoUsuario.password]]),(0,s.Lk)("span",{class:"toggle-password",onClick:a[4]||(a[4]=e=>i.mostrarPassword=!i.mostrarPassword)},[(0,s.Lk)("i",{class:(0,X.C4)(i.mostrarPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),(0,s.Lk)("div",In,[a[11]||(a[11]=(0,s.Lk)("label",{for:"rol"},[(0,s.Lk)("i",{class:"fas fa-user-tag"}),(0,s.eW)(" Rol ")],-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>i.nuevoUsuario.idrol=e),id:"rol",required:""},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.roles,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.idrol,value:e.idrol},(0,X.v_)(e.rol),9,Dn)))),128))],512),[[t.u1,i.nuevoUsuario.idrol]])]),a[12]||(a[12]=(0,s.Lk)("button",{type:"submit",class:"submit-button"},"Crear Usuario",-1))],32),i.successModalVisible?((0,s.uX)(),(0,s.Wv)(n,{key:0,mensaje:i.successMensaje,onOnClose:l.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)])}var $n={name:"FormNewUsuario",components:{SuccessModal:ja},data(){return{roles:[],nuevoUsuario:{nombre:"",apellidos:"",correo:"",password:"yummy.2025@",activo:null,idrol:null},successModalVisible:!1,successMensaje:"",mostrarPassword:!1}},watch:{"nuevoUsuario.nombre":"actualizarCorreo","nuevoUsuario.apellidos":"actualizarCorreo"},methods:{actualizarCorreo(){const e=this.nuevoUsuario.nombre.trim().toLowerCase().replace(/\s+/g,""),a=this.nuevoUsuario.apellidos.trim().toLowerCase().replace(/\s+/g,"");this.nuevoUsuario.correo=e&&a?`${e}.${a}@ucb.edu.bo`:""},async crearUsuario(){try{const e={nombre:this.nuevoUsuario.nombre,apellidos:this.nuevoUsuario.apellidos,email:this.nuevoUsuario.correo,password:this.nuevoUsuario.password,activo:this.nuevoUsuario.activo,idrol:this.nuevoUsuario.idrol},a=await Se.A.post("http://localhost:5000/api/usuario/registrar",e);this.mostrarSuccessModal("Usuario creado correctamente"),this.resetForm(),this.$emit("usuario-creado",a.data)}catch(e){console.error("Error al crear usuario:",e.response?.data||e),this.mostrarSuccessModal("Error al crear el usuario")}},resetForm(){this.nuevoUsuario={nombre:"",apellidos:"",correo:"",password:"yummy.2025@",activo:null,idrol:this.nuevoUsuario.idrol},this.mostrarPassword=!1},mostrarSuccessModal(e){this.successMensaje=e,this.successModalVisible=!0},closeSuccessModal(){this.successModalVisible=!1}},async mounted(){try{const e=await Se.A.get("http://localhost:5000/api/rol");this.roles=e.data,this.roles.length&&(this.nuevoUsuario.idrol=this.roles[0].idrol)}catch(e){console.error("No se pudo cargar la lista de roles:",e)}}};const Un=(0,g.A)($n,[["render",Vn],["__scopeId","data-v-6db8f3cc"]]);var zn=Un,jn={name:"UsuariosAdminComponent",components:{FromNewUser:zn},data(){return{usuarios:[],roles:[],searchQuery:""}},mounted(){this.obtenerUsuarios(),this.obtenerRoles()},computed:{filteredUsuarios(){const e=this.removeDiacritics(this.searchQuery.toLowerCase()).trim();if(!e)return this.usuarios;const a=e.split(/\s+/).filter((e=>e.length>0));return this.usuarios.filter((e=>{const o=this.removeDiacritics(`${e.nombre||""} ${e.apellidos||""}`).toLowerCase();return a.every((e=>o.includes(e)))}))}},methods:{onUsuarioCreado(e){this.usuarios.unshift({...e,isEditing:!1,selectedRolIndex:this.roles.findIndex((a=>a.idrol===e.idrol))})},removeDiacritics(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},async obtenerUsuarios(){try{const e=await Se.A.get("http://localhost:5000/api/usuario");this.usuarios=e.data.map((e=>({...e,isEditing:!1,selectedRolIndex:null})))}catch(e){console.error("Error al obtener los usuarios:",e)}},async obtenerRoles(){try{const e=await Se.A.get("http://localhost:5000/api/rol");this.roles=e.data}catch(e){console.error("Error al obtener los roles:",e)}},obtenerNombreRol(e){const a=this.roles.find((a=>a.idrol===e));return a?a.rol:"Desconocido"},toggleEdit(e){if(e.isEditing)this.actualizarRol(e);else{e.isEditing=!0;const a=this.roles.findIndex((a=>a.idrol===e.idrol));e.selectedRolIndex=a}},async actualizarRol(e){try{const a=e.selectedRolIndex,o=this.roles[a].idrol;console.log("Rol seleccionado: ",o);const t=await Se.A.put(`http://localhost:5000/api/usuario/${e.idusuario}/rol`,{idRol:o});console.log("Rol actualizado correctamente",t),e.idrol=o,e.isEditing=!1}catch(a){console.error("Error al actualizar el rol:",a)}}}};const Nn=(0,g.A)(jn,[["render",An],["__scopeId","data-v-04f0bad8"]]);var qn=Nn;const Tn={class:"first-data-container"},Bn={class:"info-card cantidad-container"},Wn={class:"info-card ingresos-container"},Hn={class:"info-card resenia-container"},Qn={class:"charts-container"};function Jn(e,a,o,r,i,l){const n=(0,s.g2)("LineChartDia"),c=(0,s.g2)("BarChartMes"),d=(0,s.g2)("RadarChartConsumo"),u=(0,s.g2)("PieChartProductos"),p=(0,s.g2)("BarChartResenia");return(0,s.uX)(),(0,s.CE)("div",null,[a[10]||(a[10]=(0,s.Lk)("header",{class:"dashboard-header"},[(0,s.Lk)("h1",null,[(0,s.Lk)("i",{class:"fas fa-chart-line"}),(0,s.eW)(" Dashboard ")]),(0,s.Lk)("p",null,"Visualiza las métricas clave de tu negocio")],-1)),(0,s.Lk)("div",null,[a[3]||(a[3]=(0,s.Lk)("label",{for:"month-filter"},"Filtrar por mes: ",-1)),(0,s.bo)((0,s.Lk)("select",{id:"month-filter","onUpdate:modelValue":a[0]||(a[0]=e=>i.selectedMonth=e),onChange:a[1]||(a[1]=(...e)=>l.fetchAllData&&l.fetchAllData(...e))},a[2]||(a[2]=[(0,s.Fv)('<option value="00">General</option><option value="01">Enero</option><option value="02">Febrero</option><option value="03">Marzo</option><option value="04">Abril</option><option value="05">Mayo</option><option value="06">Junio</option><option value="07">Julio</option><option value="08">Agosto</option><option value="09">Septiembre</option><option value="10">Octubre</option><option value="11">Noviembre</option><option value="12">Diciembre</option>',13)]),544),[[t.u1,i.selectedMonth]])]),(0,s.Lk)("div",Tn,[(0,s.Lk)("div",Bn,[a[4]||(a[4]=(0,s.Lk)("i",{class:"fas fa-shopping-cart"},null,-1)),a[5]||(a[5]=(0,s.Lk)("h2",null,"Pedidos Realizados",-1)),(0,s.Lk)("p",null,(0,X.v_)(i.totalPedidos),1)]),(0,s.Lk)("div",Wn,[a[6]||(a[6]=(0,s.Lk)("i",{class:"fas fa-dollar-sign"},null,-1)),a[7]||(a[7]=(0,s.Lk)("h2",null,"Ingresos Totales",-1)),(0,s.Lk)("p",null,(0,X.v_)(i.ingresosTotales)+" Bs",1)]),(0,s.Lk)("div",Hn,[a[8]||(a[8]=(0,s.Lk)("i",{class:"fas fa-star"},null,-1)),a[9]||(a[9]=(0,s.Lk)("h2",null,"Calificación Promedio",-1)),(0,s.Lk)("p",null,(0,X.v_)(i.calificacionPromedio)+" ★",1)])]),(0,s.Lk)("div",Qn,[(0,s.bF)(n,{data:i.dataG1,"chart-title":`Ingresos Totales por Día en ${l.getMonthName()}`},null,8,["data","chart-title"]),(0,s.bF)(c,{data:i.dataG2,"chart-title":"Ingresos Totales por Mes"},null,8,["data"]),(0,s.bF)(d,{data:i.dataG3,"chart-title":`Consumo por Horas en ${l.getMonthName()}`},null,8,["data","chart-title"]),(0,s.bF)(u,{data:i.dataG4,"chart-title":`Productos mas vendidos en ${l.getMonthName()}`},null,8,["data","chart-title"]),(0,s.bF)(p,{data:i.dataG5,"chart-title":`Reseñas por Platillos en ${l.getMonthName()}`},null,8,["data","chart-title"])])])}const Kn={key:0},Gn={ref:"chartCanvas"},Yn={key:1};function Zn(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",null,[o.data&&o.data.length>0?((0,s.uX)(),(0,s.CE)("div",Kn,[(0,s.Lk)("canvas",Gn,null,512)])):((0,s.uX)(),(0,s.CE)("div",Yn,a[0]||(a[0]=[(0,s.Lk)("p",null,"No hay datos disponibles para esta fecha.",-1)])))])}var ec=o(3468),ac=(o(1420),{name:"LineChartVentas",props:{data:{type:Array,required:!0},chartTitle:{type:String,default:"Ingresos Totales por Día"}},data(){return{chart:null}},mounted(){ec.t1.register(...ec.$L),this.createChart(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){this.chart&&this.chart.destroy(),window.removeEventListener("resize",this.handleResize)},watch:{data:{handler(e){if(!e||0===e.length)return console.warn("Datos vacíos detectados."),void(this.chart&&(this.chart.destroy(),this.chart=null));this.chart?(this.chart.data.datasets[0].data=e,this.chart.update()):this.createChart()},immediate:!0,deep:!0}},methods:{createChart(){this.data&&0!==this.data.length?this.$nextTick((()=>{const e=this.$refs.chartCanvas.getContext("2d");e?this.chart=new ec.t1(e,{type:"line",data:{datasets:[{label:"Ingresos (Bs)",data:this.data,backgroundColor:"rgba(255, 153, 0, 0.2)",borderColor:"rgba(255, 153, 0, 1)",borderWidth:2,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:this.chartTitle}},scales:{x:{type:"time",time:{parser:"yyyy-MM-dd",unit:"day",displayFormats:{day:"yyyy MMM dd"}},title:{display:!0,text:"Fecha"}},y:{title:{display:!0,text:"Ingresos (Bs)"}}}}}):console.error("No se pudo obtener el contexto del canvas.")})):console.warn("No hay datos para crear el gráfico.")}}});const oc=(0,g.A)(ac,[["render",Zn],["__scopeId","data-v-40bf9b27"]]);var tc=oc;const sc={ref:"chartCanvas"};function rc(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("canvas",sc,null,512)])}var ic={name:"BarChartVentasMes",props:{data:{type:Array,required:!0},chartTitle:{type:String,default:"Ingresos Totales por Mes"}},data(){return{chart:null}},mounted(){ec.t1.register(...ec.$L),this.createChart(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){this.chart&&this.chart.destroy(),window.removeEventListener("resize",this.handleResize)},watch:{data:{handler(e){this.chart?(this.chart.data.datasets[0].data=e,this.chart.update()):this.createChart()},immediate:!0,deep:!0}},methods:{createChart(){if(!this.data||0===this.data.length)return;const e=this.$refs.chartCanvas.getContext("2d");this.chart=new ec.t1(e,{type:"bar",data:{datasets:[{label:"Ingresos (Bs)",data:this.data,backgroundColor:"rgba(255, 153, 0, 0.2)",borderColor:"rgba(255, 153, 0, 1)",borderWidth:2,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:this.chartTitle}},scales:{x:{type:"time",time:{parser:"yyyy-MM",unit:"day",displayFormats:{day:"MMM"}},title:{display:!0,text:"Fecha"}},y:{title:{display:!0,text:"Ingresos (Bs)"}}}}})}}};const lc=(0,g.A)(ic,[["render",rc],["__scopeId","data-v-a6da7c4c"]]);var nc=lc;const cc={key:0},dc={ref:"chartCanvas"},uc={key:1};function pc(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",null,[o.data&&o.data.length>0?((0,s.uX)(),(0,s.CE)("div",cc,[(0,s.Lk)("canvas",dc,null,512)])):((0,s.uX)(),(0,s.CE)("div",uc,a[0]||(a[0]=[(0,s.Lk)("p",null,"No hay datos disponibles para esta fecha.",-1)])))])}var mc={name:"RadarChartConsumo",props:{data:{type:Array,required:!0},chartTitle:{type:String,default:"Consumo por Horas"}},data(){return{chart:null}},mounted(){ec.t1.register(...ec.$L),this.createChart(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){this.chart&&this.chart.destroy(),window.removeEventListener("resize",this.handleResize)},watch:{data:{handler(e){if(!e||0===e.length)return console.warn("Datos vacíos detectados."),void(this.chart&&(this.chart.destroy(),this.chart=null));this.chart?(this.chart.data.labels=e.map((e=>e.x)),this.chart.data.datasets[0].data=e.map((e=>e.y)),this.chart.update()):this.createChart()},immediate:!0,deep:!0}},methods:{createChart(){const e=[9,10,11,12,13,14,15,16,17,18,19,20,21,22],a=e.map((e=>{const a=this.data.find((a=>a.x==e));return a?a.y:0}));this.data&&0!==this.data.length?this.$nextTick((()=>{const o=this.$refs.chartCanvas.getContext("2d");o?this.chart=new ec.t1(o,{type:"radar",data:{labels:e,datasets:[{label:"Consumo por Hora",data:a,backgroundColor:"rgba(255, 153, 0, 0.2)",borderColor:"rgba(255, 153, 0, 1)",pointBackgroundColor:"rgba(255, 153, 0, 1)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:this.chartTitle}},scales:{r:{beginAtZero:!0}}}}):console.error("No se pudo obtener el contexto del canvas.")})):console.warn("No hay datos para crear el gráfico.")}}};const hc=(0,g.A)(mc,[["render",pc],["__scopeId","data-v-1ed410f6"]]);var fc=hc;const vc={key:0},bc={ref:"chartCanvas"},gc={key:1};function kc(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",null,[o.data&&o.data.length>0?((0,s.uX)(),(0,s.CE)("div",vc,[(0,s.Lk)("canvas",bc,null,512)])):((0,s.uX)(),(0,s.CE)("div",gc,a[0]||(a[0]=[(0,s.Lk)("p",null,"No hay datos disponibles para esta fecha.",-1)])))])}const Cc={red:"rgba(255, 99, 132, 0.6)",blue:"rgba(54, 162, 235, 0.6)",green:"rgba(75, 192, 192, 0.6)",yellow:"rgba(255, 206, 86, 0.6)",purple:"rgba(153, 102, 255, 0.6)",orange:"rgba(255, 159, 64, 0.6)"};var Lc={name:"PieChartProductos",props:{data:{type:Array,required:!0},chartTitle:{type:String,default:"Productos Mas Vendidos"}},data(){return{chart:null}},mounted(){ec.t1.register(...ec.$L),this.createChart(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){this.chart&&this.chart.destroy(),window.removeEventListener("resize",this.handleResize)},watch:{data:{handler(e){if(!e||0===e.length)return console.warn("Datos vacíos detectados."),void(this.chart&&(this.chart.destroy(),this.chart=null));this.chart?(this.chart.data.labels=e.map((e=>e.x)),this.chart.data.datasets[0].data=e.map((e=>e.y)),this.chart.update()):this.createChart()},immediate:!0,deep:!0}},methods:{createChart(){this.data&&0!==this.data.length?this.$nextTick((()=>{const e=this.$refs.chartCanvas?.getContext("2d");e?this.chart=new ec.t1(e,{type:"pie",data:{labels:this.data.map((e=>e.x)),datasets:[{label:"Cantidad consumida: ",data:this.data.map((e=>e.y)),backgroundColor:Object.values(Cc)}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:this.chartTitle}}}}):console.error("No se pudo obtener el contexto del canvas.")})):console.warn("No hay datos para crear el gráfico.")}}};const yc=(0,g.A)(Lc,[["render",kc],["__scopeId","data-v-01e9178c"]]);var Ec=yc;const Mc={key:0},wc={ref:"chartCanvas"},Sc={key:1};function Ac(e,a,o,t,r,i){return(0,s.uX)(),(0,s.CE)("div",null,[o.data&&o.data.length>0?((0,s.uX)(),(0,s.CE)("div",Mc,[(0,s.Lk)("canvas",wc,null,512)])):((0,s.uX)(),(0,s.CE)("div",Sc,a[0]||(a[0]=[(0,s.Lk)("p",null,"No hay datos disponibles para esta fecha.",-1)])))])}var _c={name:"LineChartResenia",props:{data:{type:Array,required:!0},chartTitle:{type:String,default:"Reseñas por Platillos"}},data(){return{chart:null}},mounted(){ec.t1.register(...ec.$L),this.createChart()},beforeUnmount(){this.chart&&this.chart.destroy()},watch:{data:{handler(e){if(!e||0===e.length)return console.warn("Datos vacíos detectados."),void(this.chart&&(this.chart.destroy(),this.chart=null));if(this.chart){const a=JSON.parse(JSON.stringify(e));this.chart.data.labels=a.map((e=>e.nombre_plato)),this.chart.data.datasets[0].data=a.map((e=>e.promedio_resenia)),this.chart.data.datasets[1].data=a.map((e=>e.total_resenias)),this.chart.update()}else this.createChart()},immediate:!0,deep:!0}},methods:{createChart(){if(!this.data||0===this.data.length)return void console.warn("No hay datos para crear el gráfico.");const e=JSON.parse(JSON.stringify(this.data)),a=e.map((e=>e.nombre_plato)),o=e.map((e=>e.promedio_resenia)),t=e.map((e=>e.total_resenias));this.$nextTick((()=>{const e=this.$refs.chartCanvas.getContext("2d");if(!e)return void console.error("No se pudo obtener el contexto del canvas.");const s={labels:a,datasets:[{label:"Promedio de Reseñas",data:o,backgroundColor:"rgba(255, 153, 0, 0.2)",borderColor:"rgba(255, 153, 0, 1)",borderWidth:2,fill:!0},{label:"Total de Reseñas",data:t,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:2,fill:!0}]},r={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:this.chartTitle}},scales:{x:{title:{display:!0,text:"Platillos"}},y:{beginAtZero:!0,title:{display:!0,text:"Reseñas"}}}},i=JSON.parse(JSON.stringify(r));i.plugins.title.text=this.chartTitle,this.chart=new ec.t1(e,{type:"bar",data:s,options:i})}))}}};const xc=(0,g.A)(_c,[["render",Ac],["__scopeId","data-v-35642794"]]);var Pc=xc,Fc={components:{LineChartDia:tc,BarChartMes:nc,RadarChartConsumo:fc,PieChartProductos:Ec,BarChartResenia:Pc},data(){return{selectedMonth:"00",dataG0:[],dataG1:[],dataG2:[],dataG3:[],dataG4:[],dataG5:[],totalPedidos:0,ingresosTotales:0,calificacionPromedio:0}},mounted(){this.fetchIngresosPorDia(),this.fetchIngresosPorMes(),this.fetchConsumoPorHoras(),this.fetchProductosMasVendidos(),this.fetchReseniaPorPlatos(),this.fetchnumeros()},methods:{async fetchnumeros(){try{const e=await Se.A.get("http://localhost:5000/api/dashboard/total-pedidos",{params:{month:this.selectedMonth}}),a=await Se.A.get("http://localhost:5000/api/dashboard/ingresos-totales",{params:{month:this.selectedMonth}}),o=await Se.A.get("http://localhost:5000/api/dashboard/calificacion-promedio",{params:{month:this.selectedMonth}});this.totalPedidos=e.data[0]?.total_pedidos||0,this.ingresosTotales=a.data[0]?.ingresos_totales||0,this.calificacionPromedio=o.data[0]?.promedio_calificacion||0}catch(e){console.error("Error al obtener los ingresos por día:",e)}},getMonthName(){const e=["General","Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],a=parseInt(this.selectedMonth,10);return e[a]||"General"},async fetchAllData(){await this.fetchIngresosPorDia(),await this.fetchnumeros(),await this.fetchConsumoPorHoras(),await this.fetchProductosMasVendidos(),await this.fetchReseniaPorPlatos()},async fetchIngresosPorDia(){try{this.dataG1=[];const e=await Se.A.get("http://localhost:5000/api/dashboard/ingresos-dia",{params:{month:this.selectedMonth}}),a=e.data;this.dataG1=a.map((e=>({x:e.fecha,y:e.ingresos})))}catch(e){console.error("Error al obtener los ingresos por día:",e)}},async fetchIngresosPorMes(){try{const e=await Se.A.get("http://localhost:5000/api/dashboard/ingresos-mes"),a=e.data;this.dataG2=a.map((e=>({x:e.mes,y:e.total_ventas})))}catch(e){console.error("Error al obtener los ingresos por día:",e)}},async fetchConsumoPorHoras(){try{this.dataG3=[];const e=await Se.A.get("http://localhost:5000/api/dashboard/consumo-hora",{params:{month:this.selectedMonth}}),a=e.data;console.log("DATOS POR HORA: ",a),this.dataG3=a.map((e=>({x:e.hora,y:e.total_pedidos})))}catch(e){console.error("Error al obtener los ingresos por día:",e)}},async fetchProductosMasVendidos(){try{this.dataG4=[];const e=await Se.A.get("http://localhost:5000/api/dashboard/productos-mas-vendidos",{params:{month:this.selectedMonth}}),a=e.data;this.dataG4=a.map((e=>({x:e.nombre,y:e.total_vendidos})))}catch(e){console.error("Error al obtener los ingresos por día:",e)}},async fetchReseniaPorPlatos(){try{this.dataG5=[];const e=await Se.A.get("http://localhost:5000/api/dashboard/resenias-plato",{params:{month:this.selectedMonth}}),a=e.data;this.dataG5=a.map((e=>({nombre_plato:e.nombre_plato,promedio_resenia:e.promedio_resenia,total_resenias:e.total_resenias}))),console.log("RESENIA: ",this.dataG5)}catch(e){console.error("Error al obtener reseñas por platos:",e)}}}};const Oc=(0,g.A)(Fc,[["render",Jn]]);var Rc=Oc;const Xc={class:"table-container"},Ic={class:"table"},Dc={key:0},Vc=["onUpdate:modelValue"],$c={key:1},Uc={key:2},zc={key:3},jc={key:4},Nc={key:5},qc={key:6},Tc={key:7},Bc={key:8},Wc={key:9},Hc={key:10},Qc={key:11},Jc={key:12},Kc={key:13},Gc={key:14},Yc={key:15},Zc={key:16},ed={key:17},ad={key:18},od={key:19},td={key:20},sd={key:21},rd={key:22},id={key:23},ld={key:24},nd={key:25},cd={key:26},dd={key:27},ud={class:"botones"},pd=["onClick"],md=["onClick"];function hd(e,a,o,r,i,l){const n=(0,s.g2)("HeaderAdminTitle"),c=(0,s.g2)("ConfirmationModal"),d=(0,s.g2)("FormNewRol"),u=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n,{icon:"fas fa-user-tag",title:"Rol",subtitle:"Visualiza la Matriz de Roles"}),i.modalVisible?((0,s.uX)(),(0,s.Wv)(c,{key:0,mensaje:`¿Seguro que desea eliminar el Rol ${i.rolAEliminar.rol}?`,onOnCancel:l.cerrarModal,onOnConfirm:l.eliminarRol},null,8,["mensaje","onOnCancel","onOnConfirm"])):(0,s.Q3)("",!0),(0,s.Lk)("div",Xc,[(0,s.Lk)("table",Ic,[a[19]||(a[19]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"IdRol"),(0,s.Lk)("th",null,"Rol"),(0,s.Lk)("th",null,"Asignacion de Roles"),(0,s.Lk)("th",null,"Dashboard"),(0,s.Lk)("th",null,"Ofertas"),(0,s.Lk)("th",null,"Usuario"),(0,s.Lk)("th",null,"Platillos"),(0,s.Lk)("th",null,"Pedidos"),(0,s.Lk)("th",null,"Reservas"),(0,s.Lk)("th",null,"Mapa Interactivo"),(0,s.Lk)("th",null,"Oferta Cliente"),(0,s.Lk)("th",null,"Pedido Cliente"),(0,s.Lk)("th",null,"Mapa Cliente"),(0,s.Lk)("th",null,"Menu Cliente"),(0,s.Lk)("th",null,"Logs"),(0,s.Lk)("th",null,"Acciones")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.roles,((e,o)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.idrol},[(0,s.Lk)("td",null,(0,X.v_)(e.idrol),1),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",Dc,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>i.rolEditado.rol=e},null,8,Vc),[[t.Jo,i.rolEditado.rol]])])):((0,s.uX)(),(0,s.CE)("td",$c,(0,X.v_)(e.rol),1)),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",Uc,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>i.rolEditado.asignacionroles=e)},null,512),[[t.lH,i.rolEditado.asignacionroles]])])):((0,s.uX)(),(0,s.CE)("td",zc,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.asignacionroles?"fa-check":"fa-times",e.asignacionroles?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",jc,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=e=>i.rolEditado.dashboard=e)},null,512),[[t.lH,i.rolEditado.dashboard]])])):((0,s.uX)(),(0,s.CE)("td",Nc,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.dashboard?"fa-check":"fa-times",e.dashboard?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",qc,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=e=>i.rolEditado.ofertas=e)},null,512),[[t.lH,i.rolEditado.ofertas]])])):((0,s.uX)(),(0,s.CE)("td",Tc,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.ofertas?"fa-check":"fa-times",e.ofertas?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",Bc,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=e=>i.rolEditado.usuarios=e)},null,512),[[t.lH,i.rolEditado.usuarios]])])):((0,s.uX)(),(0,s.CE)("td",Wc,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.usuarios?"fa-check":"fa-times",e.usuarios?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",Hc,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=e=>i.rolEditado.platillos=e)},null,512),[[t.lH,i.rolEditado.platillos]])])):((0,s.uX)(),(0,s.CE)("td",Qc,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.platillos?"fa-check":"fa-times",e.platillos?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",Jc,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=e=>i.rolEditado.pedidos=e)},null,512),[[t.lH,i.rolEditado.pedidos]])])):((0,s.uX)(),(0,s.CE)("td",Kc,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.pedidos?"fa-check":"fa-times",e.pedidos?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",Gc,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=e=>i.rolEditado.reservas=e)},null,512),[[t.lH,i.rolEditado.reservas]])])):((0,s.uX)(),(0,s.CE)("td",Yc,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.reservas?"fa-check":"fa-times",e.reservas?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",Zc,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=e=>i.rolEditado.mapainteractivo=e)},null,512),[[t.lH,i.rolEditado.mapainteractivo]])])):((0,s.uX)(),(0,s.CE)("td",ed,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.mapainteractivo?"fa-check":"fa-times",e.mapainteractivo?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",ad,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[8]||(a[8]=e=>i.rolEditado.ofertacliente=e)},null,512),[[t.lH,i.rolEditado.ofertacliente]])])):((0,s.uX)(),(0,s.CE)("td",od,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.ofertacliente?"fa-check":"fa-times",e.ofertacliente?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",td,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[9]||(a[9]=e=>i.rolEditado.pedidocliente=e)},null,512),[[t.lH,i.rolEditado.pedidocliente]])])):((0,s.uX)(),(0,s.CE)("td",sd,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.pedidocliente?"fa-check":"fa-times",e.pedidocliente?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",rd,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=e=>i.rolEditado.mapacliente=e)},null,512),[[t.lH,i.rolEditado.mapacliente]])])):((0,s.uX)(),(0,s.CE)("td",id,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.mapacliente?"fa-check":"fa-times",e.mapacliente?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",ld,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[11]||(a[11]=e=>i.rolEditado.menucliente=e)},null,512),[[t.lH,i.rolEditado.menucliente]])])):((0,s.uX)(),(0,s.CE)("td",nd,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.menucliente?"fa-check":"fa-times",e.menucliente?"true-icon":"false-icon"])},null,2)])),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("td",cd,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[12]||(a[12]=e=>i.rolEditado.logs=e)},null,512),[[t.lH,i.rolEditado.logs]])])):((0,s.uX)(),(0,s.CE)("td",dd,[(0,s.Lk)("i",{class:(0,X.C4)(["fas",e.logs?"fa-check":"fa-times",e.logs?"true-icon":"false-icon"])},null,2)])),(0,s.Lk)("td",ud,[o!==i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"action-button edit-button",onClick:a=>l.seleccionarRolParaEditar(o,e)},a[15]||(a[15]=[(0,s.Lk)("i",{class:"fas fa-edit"},null,-1)]),8,pd)):(0,s.Q3)("",!0),o!==i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"action-button delete-button",onClick:a=>l.mostrarModalEliminar(e)},a[16]||(a[16]=[(0,s.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,md)):(0,s.Q3)("",!0),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("button",{key:2,class:"action-button button-save",onClick:a[13]||(a[13]=(...e)=>l.guardarCambios&&l.guardarCambios(...e))},a[17]||(a[17]=[(0,s.Lk)("i",{class:"fa-solid fa-floppy-disk"},null,-1)]))):(0,s.Q3)("",!0),o===i.filaEnEdicion?((0,s.uX)(),(0,s.CE)("button",{key:3,class:"action-button button-cancel",onClick:a[14]||(a[14]=(...e)=>l.cancelarCambios&&l.cancelarCambios(...e))},a[18]||(a[18]=[(0,s.Lk)("i",{class:"fa-solid fa-xmark"},null,-1)]))):(0,s.Q3)("",!0)])])))),128))])]),(0,s.bF)(d,{onRolCreado:l.addRol},null,8,["onRolCreado"])]),i.successModalVisible?((0,s.uX)(),(0,s.Wv)(u,{key:1,mensaje:i.successMensaje,onOnClose:l.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)])}const fd={class:"form-container"},vd={class:"form-group"},bd={class:"form-row"},gd=["onUpdate:modelValue"];function kd(e,a,o,r,i,l){const n=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",fd,[a[4]||(a[4]=(0,s.Lk)("h2",null,"Agregar Rol",-1)),(0,s.Lk)("form",{onSubmit:a[1]||(a[1]=(0,t.D$)(((...e)=>l.crearRol&&l.crearRol(...e)),["prevent"])),class:"modern-form"},[(0,s.Lk)("div",vd,[a[2]||(a[2]=(0,s.Lk)("label",{for:"rol"},[(0,s.Lk)("i",{class:"fas fa-user-tag"}),(0,s.eW)(" Nombre del rol ")],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.nuevoRol.rol=e),id:"rol",type:"text",placeholder:"Nombre del rol",required:""},null,512),[[t.Jo,i.nuevoRol.rol]])]),(0,s.Lk)("div",bd,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.permisos,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"form-group",key:e.key},[(0,s.Lk)("label",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a=>i.nuevoRol[e.key]=a},null,8,gd),[[t.lH,i.nuevoRol[e.key]]]),(0,s.eW)(" "+(0,X.v_)(e.label),1)])])))),128))]),a[3]||(a[3]=(0,s.Lk)("button",{type:"submit",class:"submit-button"},"Crear Rol",-1))],32),i.successModalVisible?((0,s.uX)(),(0,s.Wv)(n,{key:0,mensaje:i.successMensaje,onOnClose:l.closeSuccessModal},null,8,["mensaje","onOnClose"])):(0,s.Q3)("",!0)])}var Cd={name:"FormNewRol",components:{SuccessModal:ja},data(){return{nuevoRol:{rol:"",asignacionroles:!1,dashboard:!1,ofertas:!1,usuarios:!1,platillos:!1,pedidos:!1,reservas:!1,mapainteractivo:!1,ofertacliente:!1,pedidocliente:!1,mapacliente:!1,menucliente:!1,logs:!1},permisos:[{key:"asignacionroles",label:"Asignación de Roles"},{key:"dashboard",label:"Dashboard"},{key:"mapacliente",label:"Mapa Interactivo Cliente"},{key:"mapainteractivo",label:"Mapa Interactivo"},{key:"menucliente",label:"Menú Cliente"},{key:"pedidocliente",label:"Reservas Cliente"},{key:"ofertacliente",label:"Oferta Cliente"},{key:"ofertas",label:"Ofertas"},{key:"pedidos",label:"Pedidos"},{key:"platillos",label:"Platillos"},{key:"reservas",label:"Reservas"},{key:"usuarios",label:"Usuarios"},{key:"logs",label:"Logs"}],successModalVisible:!1,successMensaje:""}},methods:{async crearRol(){const e=this.nuevoRol.rol,a="string"===typeof e?e.trim():"";if(a){this.nuevoRol.rol=a;try{const e=localStorage.getItem("token"),a=await Se.A.post("http://localhost:5000/api/rol",this.nuevoRol,{headers:{Authorization:`Bearer ${e}`}});this.$emit("rol-creado",a.data),this.mostrarSuccessModal("Rol creado correctamente"),this.resetForm()}catch(o){console.error("Error al crear rol:",o.response?.data||o),this.mostrarSuccessModal("Error al crear el rol")}}else alert("El nombre del rol es obligatorio.")},resetForm(){Object.keys(this.nuevoRol).forEach((e=>{this.nuevoRol[e]="boolean"!==typeof this.nuevoRol[e]&&""}))},mostrarSuccessModal(e){this.successMensaje=e,this.successModalVisible=!0},closeSuccessModal(){this.successModalVisible=!1}}};const Ld=(0,g.A)(Cd,[["render",kd],["__scopeId","data-v-323b0652"]]);var yd=Ld,Ed={name:"RolesTable",components:{FormNewRol:yd,ConfirmationModal:ds,SuccessModal:ja,HeaderAdminTitle:Ja},data(){return{roles:[],filaEnEdicion:null,rolEditado:{},rolAEliminar:{},modalVisible:!1,successModalVisible:!1,successMensaje:""}},mounted(){this.obtenerRoles()},methods:{async obtenerRoles(){try{const e=localStorage.getItem("token"),a=await Se.A.get("http://localhost:5000/api/rol",{headers:{Authorization:`Bearer ${e}`}});this.roles=a.data}catch(e){console.error("Error al obtener los roles:",e)}},addRol(e){this.roles.push(e),this.mostrarSuccessModal("Rol agregado correctamente")},seleccionarRolParaEditar(e,a){this.filaEnEdicion=e,this.rolEditado={...a}},async guardarCambios(){try{const e=localStorage.getItem("token");await Se.A.put(`http://localhost:5000/api/rol/${this.rolEditado.idrol}`,this.rolEditado,{headers:{Authorization:`Bearer ${e}`}}),this.roles.splice(this.filaEnEdicion,1,{...this.rolEditado}),this.filaEnEdicion=null,this.mostrarSuccessModal("Rol actualizado correctamente")}catch(e){console.error("Error al guardar cambios:",e),this.mostrarSuccessModal("Error al actualizar el rol")}},cancelarCambios(){this.filaEnEdicion=null,this.rolEditado={}},mostrarModalEliminar(e){this.rolAEliminar=e,this.modalVisible=!0},cerrarModal(){this.modalVisible=!1},async eliminarRol(){try{const e=localStorage.getItem("token");await Se.A.delete(`http://localhost:5000/api/rol/${this.rolAEliminar.idrol}`,{headers:{Authorization:`Bearer ${e}`}}),this.roles=this.roles.filter((e=>e.idrol!==this.rolAEliminar.idrol)),this.cerrarModal(),this.mostrarSuccessModal("Rol eliminado correctamente")}catch(e){console.error("Error al eliminar el rol:",e),this.mostrarSuccessModal("Error al eliminar el rol")}},mostrarSuccessModal(e){this.successMensaje=e,this.successModalVisible=!0},closeSuccessModal(){this.successModalVisible=!1}}};const Md=(0,g.A)(Ed,[["render",hd],["__scopeId","data-v-164bcf7a"]]);var wd=Md;const Sd={class:"filters"},Ad={class:"table-container"},_d={class:"table"};function xd(e,a,o,r,i,l){const n=(0,s.g2)("HeaderAdminTitle"),c=(0,s.g2)("SuccessModal");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(n,{icon:"fas fa-clipboard-list",title:"Logs",subtitle:"Visualiza los registros de actividad"}),(0,s.Lk)("div",Sd,[(0,s.Lk)("label",null,[a[6]||(a[6]=(0,s.eW)(" Origen: ")),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.filterOrigen=e)},a[5]||(a[5]=[(0,s.Lk)("option",{value:""},"Todos",-1),(0,s.Lk)("option",{value:"usuario"},"Usuario",-1),(0,s.Lk)("option",{value:"sistema"},"Sistema",-1)]),512),[[t.u1,i.filterOrigen]])]),(0,s.Lk)("label",null,[a[7]||(a[7]=(0,s.eW)(" Código: ")),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":a[1]||(a[1]=e=>i.filterCodigo=e),placeholder:"e.g. 200"},null,512),[[t.Jo,i.filterCodigo]])]),(0,s.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>l.obtenerLogs&&l.obtenerLogs(...e))},"Aplicar filtros"),(0,s.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>l.resetFiltros&&l.resetFiltros(...e))},"Limpiar filtros")]),(0,s.Lk)("div",Ad,[(0,s.Lk)("table",_d,[a[8]||(a[8]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"IdLog"),(0,s.Lk)("th",null,"Acción"),(0,s.Lk)("th",null,"Medio"),(0,s.Lk)("th",null,"Fecha"),(0,s.Lk)("th",null,"Origen"),(0,s.Lk)("th",null,"IdUsuario"),(0,s.Lk)("th",null,"Código")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.logs,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.idlog},[(0,s.Lk)("td",null,(0,X.v_)(e.idlog),1),(0,s.Lk)("td",null,(0,X.v_)(e.accion),1),(0,s.Lk)("td",null,(0,X.v_)(e.medio),1),(0,s.Lk)("td",null,(0,X.v_)(l.formatFecha(e.fecha)||"–"),1),(0,s.Lk)("td",null,(0,X.v_)(e.origen),1),(0,s.Lk)("td",null,(0,X.v_)(e.idusuario),1),(0,s.Lk)("td",null,(0,X.v_)(e.codigo),1)])))),128))])])]),i.successModalVisible?((0,s.uX)(),(0,s.Wv)(c,{key:0,mensaje:i.successMensaje,onOnClose:a[4]||(a[4]=e=>i.successModalVisible=!1)},null,8,["mensaje"])):(0,s.Q3)("",!0)])}var Pd=o(1394),Fd=o(3996),Od=o(1706),Rd={name:"LogsTable",components:{HeaderAdminTitle:Ja,SuccessModal:ja},data(){return{logs:[],successModalVisible:!1,successMensaje:"",filterOrigen:"",filterCodigo:""}},mounted(){this.obtenerLogs()},methods:{async obtenerLogs(){try{const e=localStorage.getItem("token"),a={};this.filterOrigen&&(a.origen=this.filterOrigen),this.filterCodigo&&(a.codigo=this.filterCodigo);const{data:o}=await Se.A.get("http://localhost:5000/api/log",{headers:{Authorization:`Bearer ${e}`},params:a});this.logs=o}catch(e){console.error("Error al obtener los logs:",e),this.successMensaje="Error al cargar los registros",this.successModalVisible=!0}},resetFiltros(){this.filterOrigen="",this.filterCodigo="",this.obtenerLogs()},formatFecha(e){if(!e)return"";const a="string"===typeof e?(0,Pd.H)(e):new Date(e);return(0,Fd.f)(a)?(0,Od.GP)(a,"dd/MM/yyyy HH:mm:ss"):(console.warn("Fecha inválida en log:",e),"")}}};const Xd=(0,g.A)(Rd,[["render",xd],["__scopeId","data-v-512c2934"]]);var Id=Xd;const Dd=(0,x.aE)({history:(0,x.LA)(),routes:[{path:"/",name:"Home",component:fe},{path:"/ofertas",name:"Ofertas",component:Yo},{path:"/iniciarsesion",name:"LogIn",component:Be},{path:"/registro",name:"RegistroUsuario",component:Fe},{path:"/reservas",name:"Reservas",component:Ya},{path:"/ofertas",name:"Ofertas",component:Yo},{path:"/menu",name:"Menu",component:ur},{path:"/recupera",name:"Recupera",component:yo},{path:"/cambioPass/:id",name:"CambioPassword",component:Io},{path:"/mapa",name:"MapaUsuario",component:Bs},{path:"/menucliente",name:"MenuCliente",component:ur},{path:"/menupedido",name:"MenuPedido",component:jt},{path:"/temporal",name:"Calificaciones",component:Er},{path:"/misreservas",name:"MisReservas",component:Rr},{path:"/mispedidos",name:"MisPedidos",component:Qr},{path:"/miscalificaciones",name:"MisCalificaciones",component:pi},{path:"/menumesero",name:"MenuMesero",component:Si},{path:"/panelAdministrativo",name:"PanelAdministrativo",component:uo,children:[{path:"rol",name:"Rol",component:wd},{path:"section1",name:"Dashboard",component:Rc},{path:"ofertas",name:"AdminOfertas",component:Il},{path:"usuarios",name:"AdminUsuarios",component:qn},{path:"platillos",name:"AdminPlatillos",component:gn},{path:"reservas",name:"AdminReservas",component:Ya},{path:"mapa",name:"MapaAdmin",component:Ri},{path:"pedidosadmin",name:"PedidosAdmin",component:ks},{path:"logs",name:"LogsSistema",component:Id}]}]});Dd.beforeEach(((e,a,o)=>{if(e.meta.requiresAuth){const e=localStorage.getItem("token");e?o():o({name:"LogIn"})}else o()}));var Vd=Dd;o(414),o(6044);const $d=(0,t.Ef)(_),Ud=(0,je.Ey)();$d.use(Ud),$d.use(Vd),$d.mount("#app")}},a={};function o(t){var s=a[t];if(void 0!==s)return s.exports;var r=a[t]={exports:{}};return e[t].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(a,t,s,r){if(!t){var i=1/0;for(d=0;d<e.length;d++){t=e[d][0],s=e[d][1],r=e[d][2];for(var l=!0,n=0;n<t.length;n++)(!1&r||i>=r)&&Object.keys(o.O).every((function(e){return o.O[e](t[n])}))?t.splice(n--,1):(l=!1,r<i&&(i=r));if(l){e.splice(d--,1);var c=s();void 0!==c&&(a=c)}}return a}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,s,r]}}(),function(){o.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(a,{a:a}),a}}(),function(){var e,a=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};o.t=function(t,s){if(1&s&&(t=this(t)),8&s)return t;if("object"===typeof t&&t){if(4&s&&t.__esModule)return t;if(16&s&&"function"===typeof t.then)return t}var r=Object.create(null);o.r(r);var i={};e=e||[null,a({}),a([]),a(a)];for(var l=2&s&&t;"object"==typeof l&&!~e.indexOf(l);l=a(l))Object.getOwnPropertyNames(l).forEach((function(e){i[e]=function(){return t[e]}}));return i["default"]=function(){return t},o.d(r,i),r}}(),function(){o.d=function(e,a){for(var t in a)o.o(a,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(a,t){return o.f[t](e,a),a}),[]))}}(),function(){o.u=function(e){return"js/"+e+"."+{354:"a7a8f044",668:"4190f13f",838:"6c91d19a"}[e]+".js"}}(),function(){o.miniCssF=function(e){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="yummy:";o.l=function(t,s,r,i){if(e[t])e[t].push(s);else{var l,n;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==a+r){l=u;break}}l||(n=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.setAttribute("data-webpack",a+r),l.src=t),e[t]=[s];var p=function(a,o){l.onerror=l.onload=null,clearTimeout(m);var s=e[t];if(delete e[t],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach((function(e){return e(o)})),a)return a(o)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),n&&document.head.appendChild(l)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={524:0};o.f.j=function(a,t){var s=o.o(e,a)?e[a]:void 0;if(0!==s)if(s)t.push(s[2]);else{var r=new Promise((function(o,t){s=e[a]=[o,t]}));t.push(s[2]=r);var i=o.p+o.u(a),l=new Error,n=function(t){if(o.o(e,a)&&(s=e[a],0!==s&&(e[a]=void 0),s)){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+a+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,s[1](l)}};o.l(i,n,"chunk-"+a,a)}},o.O.j=function(a){return 0===e[a]};var a=function(a,t){var s,r,i=t[0],l=t[1],n=t[2],c=0;if(i.some((function(a){return 0!==e[a]}))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(n)var d=n(o)}for(a&&a(t);c<i.length;c++)r=i[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},t=self["webpackChunkyummy"]=self["webpackChunkyummy"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=o.O(void 0,[504],(function(){return o(1405)}));t=o.O(t)})();